From domi at vision.ee.ethz.ch  Tue Aug  1 04:34:51 2006
From: domi at vision.ee.ethz.ch (Dominik Szczerba)
Date: Tue Aug  1 04:35:05 2006
Subject: [Paraview] polygon offset again
In-Reply-To: <E4C1C0FFED3E6B49AC2C1DA9723BE11E025C2509@ES20SNLNT.srn.sandia.gov>
References: <E4C1C0FFED3E6B49AC2C1DA9723BE11E025C2509@ES20SNLNT.srn.sandia.gov>
Message-ID: <44CF122B.4050005@vision.ee.ethz.ch>

> Shoving in glpolygon offset is one of those 'features' that may shoot
> you in the foot 6 ways from Sunday. ParaView does lots of complicated
> stuff (tiled display, image compositing, volume rendering, probing,
> etc...). Adding in an offset is one of those things which would have to
> be AOK'd by the principal developers and would probably involve some
> discussion first. :)

I see, so it's not simply forgotten but not easy to add. What about a 
switch for users (like me) that run PV in a simple configuration to just 
inspect small to medium-sized simulation results?

> 
> I know this is probably unsatisfying but why not just set your line
> width to 2? It works great. :)

Polygon offset is still much better, esp. at close ups.

Thanks,
Dominik

> 
>   Brian Wylie - Org 1424
>   Sandia National Laboratories
>   MS 0822 - Building 880/A1-J
>   (505)844-2238 FAX(505)845-0833                       
>        ____                  _    __
>       / __ \____  _________ | |  / (_)__ _      __ 
>      / /_/ / __ `/ ___/ __ `/ | / / / _ \ | /| / /
>     / ____/ /_/ / /  / /_/ /| |/ / /  __/ |/ |/ /
>    /_/    \__,_/_/   \__,_/ |___/_/\___/|__/|__/
> 
>                                     Unleash the Beast
>  
> 
>> -----Original Message-----
>> From: paraview-bounces+bnwylie=sandia.gov@paraview.org 
>> [mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org] On 
>> Behalf Of Dominik Szczerba
>> Sent: Saturday, July 29, 2006 1:48 PM
>> To: paraview@paraview.org
>> Subject: [Paraview] polygon offset again
>>
>> I submitted it once as a minor bug but havent seen it 
>> resolved for quite some tome now. I can actually do it myself 
>> for my own needs, but dont know how to do it right: where to 
>> put the following line in the source code to get e.g. edges 
>> displayed right in a tet mesh?
>>
>> #ifdef GL_VERSION_1_1
>>    glEnable(GL_POLYGON_OFFSET_FILL);
>>    glPolygonOffset (1., 1.);
>> #endif
>>
>> of the VTK's way:
>>
>> SetResolveCoincidentTopologyToPolygonOffset()
>>
>> It is apparently missing in my cvs version. Could someone 
>> quickly tell me where to add this to the source code?
>>
>> thanks
>> Dominik
>>
>> --
>> Dominik Szczerba, Ph.D.
>> Computer Vision Lab CH-8092 Zurich
>> http://www.vision.ee.ethz.ch/~domi
>> _______________________________________________
>> ParaView mailing list
>> ParaView@paraview.org
>> http://www.paraview.org/mailman/listinfo/paraview
>>
>>

-- 
Dominik Szczerba, Ph.D.
Computer Vision Lab CH-8092 Zurich
http://www.vision.ee.ethz.ch/~domi
From milan.frank at gmail.com  Tue Aug  1 05:49:21 2006
From: milan.frank at gmail.com (Milan Frank)
Date: Tue Aug  1 05:49:47 2006
Subject: [Paraview] Server Manager and Python interface
Message-ID: <d3d4ab920608010249q75d22ca3paa0e0011ba5900da@mail.gmail.com>

Hi all,

I'm trying to use the python interface of ParaViews Server Manager. It
seems to me as not actually intensively used way to access Server
Manager functionality. I'm I right?

Recently I used the vtkSMDoubleRangeDomain class. IMO, I was the first
person who ever used this class that way. Two essential methods
(GetMaximum, GetMinimum) contains a reference parameter. So, they are
skipped by automated Python wrapper and thus, they are inaccessible
from python. The trivial solution is to add my own new methods without
reference parameters. Unfortunately, it means I have to go to Server
Manager source code to be able to use it properly in Python ...

I'd like to ask. What are the Kitwares plans with this interface? Is
there going to be some special testing/development effort in near
feature? Is there anyone else using this interface?

I have had another difficulty concerning animation system. If there is
an observer registered with vtkSMAnimationSceneProxy on
"AnimationCueTickEvent" then I can not see any easy way how to get
current animation time in Python.

In C++, there is a parameter "calldata" (of the observer callback
function) that receives an AnimationCueInfo. This objects seems to
contain all important information including the current animation
time. Everything is OK in C++.

In Python, we receive an instance of the event source only
(vtkSMAnimationSceneProxy in this case). There is no "current
animation time" information available.

Are there any suggestions how to resolve this difficulty?

I'd like to note, there is exactly the same problem with the VTK
Python interface. I've already posted that on VTK mailing list too,
without any response at all.

Thank you in advance for any response,
Milan.
From utkarsh.ayachit at kitware.com  Tue Aug  1 10:09:52 2006
From: utkarsh.ayachit at kitware.com (Utkarsh Ayachit)
Date: Tue Aug  1 10:11:18 2006
Subject: [Paraview] Server Manager and Python interface
In-Reply-To: <d3d4ab920608010249q75d22ca3paa0e0011ba5900da@mail.gmail.com>
References: <d3d4ab920608010249q75d22ca3paa0e0011ba5900da@mail.gmail.com>
Message-ID: <44CF60B0.3060203@kitware.com>

Hi Milan,

> I'm trying to use the python interface of ParaViews Server Manager. It
> seems to me as not actually intensively used way to access Server
> Manager functionality. I'm I right?
That's true as far as the current state goes. However, in ParaView3, one
of our objectives is to provide a full-fledged Python client that can be
used to control/access the server manager.

> Recently I used the vtkSMDoubleRangeDomain class. IMO, I was the first
> person who ever used this class that way. Two essential methods
> (GetMaximum, GetMinimum) contains a reference parameter. So, they are
> skipped by automated Python wrapper and thus, they are inaccessible
> from python. The trivial solution is to add my own new methods without
> reference parameters. Unfortunately, it means I have to go to Server
> Manager source code to be able to use it properly in Python ...
You are correct, such cases need to caught and fixed so that the server
manager API becomes more python friendly.

> I'd like to ask. What are the Kitwares plans with this interface? Is
> there going to be some special testing/development effort in near
> feature? Is there anyone else using this interface?
Like I mentioned earlier, we plan to make this a usuable, fully
functional client, hence we expect more and more people will be
actively using this interface.

> I have had another difficulty concerning animation system. If there is
> an observer registered with vtkSMAnimationSceneProxy on
> "AnimationCueTickEvent" then I can not see any easy way how to get
> current animation time in Python.
AnimationCue has been fixed on the CVS head. vtkSMAnimationCue now has
API to get the AnimationTime and DeltaTime (information provided via
the AnimationInfo struct in the event handler). Same is true with the
vtkSMAnimationCueProxy. I am also attaching a patch for the changes.


Utkarsh.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Animation.patch
Type: text/x-patch
Size: 5461 bytes
Desc: not available
Url : http://public.kitware.com/pipermail/paraview/attachments/20060801/4e40a93f/Animation-0001.bin
From guardian72 at guardian72.com  Tue Aug  1 15:33:20 2006
From: guardian72 at guardian72.com (Rick Wagner)
Date: Tue Aug  1 15:32:48 2006
Subject: [Paraview] Custom AMR Reader Example?
In-Reply-To: <b4cbb0870607011630r458315aamc41b7db7cb90892f@mail.gmail.com>
References: <b4cbb0870607011630r458315aamc41b7db7cb90892f@mail.gmail.com>
Message-ID: <C7FAD328-7598-4B2F-9AEE-DCF3059BFBCA@guardian72.com>

Hi,

Our lab is working on VTK  converter and custom reader for ParaView  
for our data, and I'm hoping someone has an example they'd be willing  
to share. For reference, our datasets consist of hierarchical,  
structured, Cartesian grids in HDF5. The HDF5 part is unimportant,  
since we already deal with it when we rebuild the hierarchy.

I've read the MultiBlock examples, but I'd like to start with  
something more substantial. Eventually, we need this to be compatible  
with a parallel server process, but for now, I'd be happy to have our  
data in a format ParaView can read.

For those who may be interested, the program we maintain is Enzo,  
which is a hybrid AMR code used for cosmology simulations. We've  
generated datasets with over half a million grids (each with several  
scalar and vector fields), and right now we have no way to look at  
the data in its entirety.

Thanks,
Rick
lca.ucsd.edu

From m.janssens at opencfd.co.uk  Wed Aug  2 02:51:49 2006
From: m.janssens at opencfd.co.uk (Mattijs Janssens)
Date: Wed Aug  2 02:51:57 2006
Subject: [Paraview] Custom AMR Reader Example?
In-Reply-To: <C7FAD328-7598-4B2F-9AEE-DCF3059BFBCA@guardian72.com>
References: <b4cbb0870607011630r458315aamc41b7db7cb90892f@mail.gmail.com>
	<C7FAD328-7598-4B2F-9AEE-DCF3059BFBCA@guardian72.com>
Message-ID: <200608020751.50213.m.janssens@opencfd.co.uk>

In the OpenFOAM public domain CFD code there is a Paraview (2.4) reader which 
might be interesting to look at. There is also a converter to legacy VTK 
format.

On Tuesday 01 August 2006 20:33, Rick Wagner wrote:
> Hi,
>
> Our lab is working on VTK  converter and custom reader for ParaView
> for our data, and I'm hoping someone has an example they'd be willing
> to share. For reference, our datasets consist of hierarchical,
> structured, Cartesian grids in HDF5. The HDF5 part is unimportant,
> since we already deal with it when we rebuild the hierarchy.
>
> I've read the MultiBlock examples, but I'd like to start with
> something more substantial. Eventually, we need this to be compatible
> with a parallel server process, but for now, I'd be happy to have our
> data in a format ParaView can read.
>
> For those who may be interested, the program we maintain is Enzo,
> which is a hybrid AMR code used for cosmology simulations. We've
> generated datasets with over half a million grids (each with several
> scalar and vector fields), and right now we have no way to look at
> the data in its entirety.
>
> Thanks,
> Rick
> lca.ucsd.edu
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview

-- 

Mattijs Janssens

OpenCFD Ltd.
The Mews, Picketts Lodge,
Picketts Lane, Salfords,
Surrey RH1 5RG.
Tel: +44 (0)1293 821272
Email: M.Janssens@OpenCFD.co.uk
URL: http://www.OpenCFD.co.uk
From eschenbe at psc.edu  Wed Aug  2 10:22:32 2006
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Aug  2 10:22:33 2006
Subject: [Paraview] ParaView Works Too Good
Message-ID: <A2D6106F385C68C3905ADB66@harpo.psc.edu>

The first time I compiled and ran 2.4.4 using my new module it produced the following error message (slightly edited) when ParaView was run:

   # Error or warning: ERROR: In
   .../paraview/VTK/IO/vtkXMLParser.cxx, line 211
   vtkSMXMLParser (142f3ab00): Cannot open XML file:
   .../myfiles/cloudSM.xml

but then it ran perfectly! The new module described in cloudSM.xml worked as expected. How can this be? Did you finish that new class vtkReadUsersMind?

I had a typo in the xml for my new module "cloud" and so the error was appropriate. But why didn't it catch this when ParaView was compiled?

More importantly, why is it loading files like this at runtime? If it requires such a file at runtime then everyone who uses ParaView at our site with my module will need access to my files. And I will not be able to move/change the referenced files.

Thanks in advance for any illumination!

Kent
Pittsburgh Supercomputing Center

From milan.frank at gmail.com  Thu Aug  3 08:03:22 2006
From: milan.frank at gmail.com (Milan Frank)
Date: Thu Aug  3 08:03:30 2006
Subject: [Paraview] ParaViews vtkCommonPython is not the sam as in VTK
Message-ID: <d3d4ab920608030503o9547f2er685b0668af0f186d@mail.gmail.com>

Hi All,

I'm working with ParaView Python interface. I can see that quite a lot
of changes has been made recently in this area. Because of this, I'm
in serious troubles now.

Due to wxPython cooperation I was in need to employ full scale vtk
python wrappers instead of the minimized ParaView version called
vtkCommonPython.

After the latest CVS update I'm unable to re-do my previous solution ...

Could anyone suggest some way how to get rid of the ParaViews
vtkCommonPython and use these VTKs Python libraries?

Thank you in advance,
Milan
From shawn.mcknezie at gmail.com  Thu Aug  3 11:38:57 2006
From: shawn.mcknezie at gmail.com (shawn mckenzie)
Date: Thu Aug  3 11:39:01 2006
Subject: [Paraview] filter accepting multiple inputs: possible with one
	vtkMulitiGroupDataSet and one vtkDataSet?
Message-ID: <d71426460608030838q231144daxc8133d7629f71741@mail.gmail.com>

All,

I have a filter with two input ports. I would like to allow a multigroup
data set in one port while the other takes in any vtkDataSet.
Paraview does not let me input one of each ype.  Although specified to allow
both, when i run Paraview the widget only allows MultiGroupDataSet menu
objects for both ports or regular dataSet objects for both.

In my server manager xml i specify:

<InputProperty
              name="Source"
              command="SetSource">
                <ProxyGroupDomain name="groups">
                    <Group name="sources"/>
                    <Group name="filters"/>
                </ProxyGroupDomain>
                <DataTypeDomain name="input_type"
composite_data_supported="1">
                      <DataType value="vtkDataSet"/>
                      <DataType value="vtkMultiGroupDataSet"/>
                </DataTypeDomain>
            </InputProperty>
            <InputProperty name="Input" command="AddInput"
clean_command="RemoveAllInputs" multiple_input="1">
                    <ProxyGroupDomain name="groups">
                        <Group name="sources"/>
                        <Group name="filters"/>
                    </ProxyGroupDomain>
                    <DataTypeDomain name="input_type">
                           <DataType value="vtkDataSet"/>
                    </DataTypeDomain>
            </InputProperty>


I am using a custom filter similar to vtkProbeFilter with two inputs.
Is there any way to allow for this option (one input as
vtkMultiGroupDataSet, the other as vtkDataSet)?


Thank you in advance
Shawn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060803/72a7c2ff/attachment.htm
From utkarsh.ayachit at kitware.com  Thu Aug  3 13:13:47 2006
From: utkarsh.ayachit at kitware.com (Utkarsh Ayachit)
Date: Thu Aug  3 13:13:24 2006
Subject: [Paraview] ParaViews vtkCommonPython is not the sam as in VTK
In-Reply-To: <d3d4ab920608030503o9547f2er685b0668af0f186d@mail.gmail.com>
References: <d3d4ab920608030503o9547f2er685b0668af0f186d@mail.gmail.com>
Message-ID: <44D22ECB.2090705@kitware.com>

Hi Milan,

Can you please elaborate what was your "previous solution" and what are 
the difficulties that you facing due to the new changes? If I remember 
correctly, the only thing that changed was adding of a bunch of more 
classes to vtkCommonPython (apart from "paraview") python module.

Utkarsh.

Milan Frank wrote:
> Hi All,
> 
> I'm working with ParaView Python interface. I can see that quite a lot
> of changes has been made recently in this area. Because of this, I'm
> in serious troubles now.
> 
> Due to wxPython cooperation I was in need to employ full scale vtk
> python wrappers instead of the minimized ParaView version called
> vtkCommonPython.
> 
> After the latest CVS update I'm unable to re-do my previous solution ...
> 
> Could anyone suggest some way how to get rid of the ParaViews
> vtkCommonPython and use these VTKs Python libraries?
> 
> Thank you in advance,
> Milan
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
> 

From woodring at lanl.gov  Thu Aug  3 15:03:52 2006
From: woodring at lanl.gov (Jon Woodring)
Date: Thu Aug  3 15:03:57 2006
Subject: [Paraview] How does one add a Mapper to ParaView?
Message-ID: <44D24898.5050801@lanl.gov>

I've found the documentation in the Wiki and there doesn't seem to be 
any (easy) way to add a Mapper to ParaView.

I have been able to compile a stand alone PV module, and my Mapper works 
fine in a stand alone VTK program.

I have been able to generate the .pvsm for the module, but the hitch 
comes to creating the .xml descriptor for the client.

Where do I go from here?  It it something that I am missing in the 
client?  In the existing .xml files in the ParaView source, I do not see 
any that describe the Mappers, though the .pvsm for the Mappers are 
present for the server.  How do I hook in a new Mapper for the client?

Am I to assume that only readers, writers, and filters can be added to 
ParaView at run time?  Thus, do I need to hack ParaView if I want it to 
display data in a different method (use my Mapper)?

-Jon
From milan.frank at gmail.com  Fri Aug  4 05:49:23 2006
From: milan.frank at gmail.com (Milan Frank)
Date: Fri Aug  4 05:49:29 2006
Subject: [Paraview] ParaViews vtkCommonPython is not the sam as in VTK
In-Reply-To: <44D22ECB.2090705@kitware.com>
References: <d3d4ab920608030503o9547f2er685b0668af0f186d@mail.gmail.com>
	<44D22ECB.2090705@kitware.com>
Message-ID: <d3d4ab920608040249i4773a45bw270f7ac3b837ac95@mail.gmail.com>

Hi Utkarsh,

honestly, my biggest problem is the size and complexity of the
ParaViews CMake scripts. They are also modified very often by other
developers. To maintain my separate branch consists of time consuming
and error-susceptible merging. That is why I have used my
minimalistic, unclear solution (to employ VTKs vtkXxxPython.dll
instead of the ParaViews vtkCommonPython.dll).

What I have done ... First of all, I built VTK separately (directly
from the ParaView source code tree). Than I manually copied created
python wrappers (vtkXxxPython.lib and vtkXxxPython.dll) into paraviews
"bin" build directory.

After that, I simply commented out the "KIT Common" part (Line: 153 to
EOF) in the ParaView\Utilities\VTKPythonWrapping\CMakeLists.txt file.
I suppose, this is responsible for the creation of the
vtkCommonPython.lib/.dll. So, the manually copied one is not
rewritten.

Next step is the modification of
ParaView\Servers\ServerManager\CMakeLists.txt. I have added
vtkIOPython and vtkRenderingPython to KIT_PYTHON_LIBS (Line 157). This
tells linker where to find some additional functions.

This solution worked until recently. I had been able to use ParaView
classes together with all VTK classes.

Now I'm receiving exception:
vtkProcessModuleConnectionManager: Invalid connection ID: 4

When I debug, it seems there is no Interactor created inside
SMRenderModuleProxy ...

I suspect, it is some compilation related mess caused by my unclear
"solution". If so, you'll probably be unable to give me any help with
that.

Just a quick question, is there any special reason to have some "light
weight" version of VTK Python wrapper especially for ParaView, instead
of "full featured" VTK Python wrappers?

I'm thinking now, to simply add some extra modules to the ParaViews
vtkCommonPython could be the right solution for me ...

Thanks,
Milan.

On 8/3/06, Utkarsh Ayachit <utkarsh.ayachit@kitware.com> wrote:
> Hi Milan,
>
> Can you please elaborate what was your "previous solution" and what are
> the difficulties that you facing due to the new changes? If I remember
> correctly, the only thing that changed was adding of a bunch of more
> classes to vtkCommonPython (apart from "paraview") python module.
>
> Utkarsh.
>
> Milan Frank wrote:
> > Hi All,
> >
> > I'm working with ParaView Python interface. I can see that quite a lot
> > of changes has been made recently in this area. Because of this, I'm
> > in serious troubles now.
> >
> > Due to wxPython cooperation I was in need to employ full scale vtk
> > python wrappers instead of the minimized ParaView version called
> > vtkCommonPython.
> >
> > After the latest CVS update I'm unable to re-do my previous solution ...
> >
> > Could anyone suggest some way how to get rid of the ParaViews
> > vtkCommonPython and use these VTKs Python libraries?
> >
> > Thank you in advance,
> > Milan
> > _______________________________________________
> > ParaView mailing list
> > ParaView@paraview.org
> > http://www.paraview.org/mailman/listinfo/paraview
> >
>
>


-- 
Ing. Milan Frank
FIRST Numerics Ltd
Cardiff Medicentre, Heath Park
Cardiff CF14 4UJ, United Kingdom
Tel: +44(0)2920 682162
Fax: +44(0)2920 682161
GSM: +44(0)7738878895
m.frank@firstnumerics.com
www.firstnumerics.com
From biddisco at cscs.ch  Fri Aug  4 08:10:54 2006
From: biddisco at cscs.ch (John Biddiscombe)
Date: Fri Aug  4 08:11:09 2006
Subject: [Paraview] filter accepting multiple inputs: possible with one
	vtkMulitiGroupDataSet and one vtkDataSet?
In-Reply-To: <d71426460608030838q231144daxc8133d7629f71741@mail.gmail.com>
References: <d71426460608030838q231144daxc8133d7629f71741@mail.gmail.com>
Message-ID: <44D3394E.9060809@cscs.ch>

shawn

I had similar problems some time ago with  multiple input filters and I 
think I submitted a bug report. The problem is primarily caused by the 
vtkCompositeDataPipeline executive which loops incorrectly over the 
filter inputs when one is composite and the other regular. I've been 
working through the code for other reasons (creating new executives for 
time dependent data handling) and although I see where the problem lies, 
have not actually fixed it. It's on my list of things to look at. If you 
(or anyone else) implements any solutions before I do, then please let 
me know.

JB

> All,
>
> I have a filter with two input ports. I would like to allow a 
> multigroup data set in one port while the other takes in any vtkDataSet.
> Paraview does not let me input one of each ype.  Although specified to 
> allow both, when i run Paraview the widget only allows 
> MultiGroupDataSet menu objects for both ports or regular dataSet 
> objects for both.
>
> In my server manager xml i specify:
>
> <InputProperty
>               name="Source"
>               command="SetSource">
>                 <ProxyGroupDomain name="groups">
>                     <Group name="sources"/>
>                     <Group name="filters"/>
>                 </ProxyGroupDomain>
>                 <DataTypeDomain name="input_type" 
> composite_data_supported="1">
>                       <DataType value="vtkDataSet"/>
>                       <DataType value="vtkMultiGroupDataSet"/>
>                 </DataTypeDomain>
>             </InputProperty>
>             <InputProperty name="Input" command="AddInput" 
> clean_command="RemoveAllInputs" multiple_input="1">
>                     <ProxyGroupDomain name="groups">
>                         <Group name="sources"/>
>                         <Group name="filters"/>
>                     </ProxyGroupDomain>
>                     <DataTypeDomain name="input_type">
>                            <DataType value="vtkDataSet"/>
>                     </DataTypeDomain>
>             </InputProperty>
>
>
> I am using a custom filter similar to vtkProbeFilter with two inputs.
> Is there any way to allow for this option (one input as 
> vtkMultiGroupDataSet, the other as vtkDataSet)?
>
>
> Thank you in advance
> Shawn
> ------------------------------------------------------------------------
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>   


-- 
John Biddiscombe,                            email:biddisco @ cscs.ch
http://www.cscs.ch/about/BJohn.php
CSCS, Swiss National Supercomputing Centre  | Tel:  +41 (91) 610.82.07
Via Cantonale, 6928 Manno, Switzerland      | Fax:  +41 (91) 610.82.82


From berk.geveci at gmail.com  Fri Aug  4 08:48:14 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Fri Aug  4 08:48:20 2006
Subject: [Paraview] filter accepting multiple inputs: possible with one
	vtkMulitiGroupDataSet and one vtkDataSet?
In-Reply-To: <d71426460608030838q231144daxc8133d7629f71741@mail.gmail.com>
References: <d71426460608030838q231144daxc8133d7629f71741@mail.gmail.com>
Message-ID: <a2ab21560608040548wac59d5eha43ffd162c4b3715@mail.gmail.com>

Hi Shawn,

This seems to be a bug (although not related to what John is describing).
Somehow, the input menu gets populated by composite and simple data objects.
Unless the bug is fixed, there doesn't seem to be a way around it.

-Berk

On 8/3/06, shawn mckenzie <shawn.mcknezie@gmail.com> wrote:
>
> All,
>
> I have a filter with two input ports. I would like to allow a multigroup
> data set in one port while the other takes in any vtkDataSet.
> Paraview does not let me input one of each ype.  Although specified to
> allow both, when i run Paraview the widget only allows MultiGroupDataSet
> menu objects for both ports or regular dataSet objects for both.
>
> In my server manager xml i specify:
>
> <InputProperty
>               name="Source"
>               command="SetSource">
>                 <ProxyGroupDomain name="groups">
>                     <Group name="sources"/>
>                     <Group name="filters"/>
>                 </ProxyGroupDomain>
>                 <DataTypeDomain name="input_type"
> composite_data_supported="1">
>                       <DataType value="vtkDataSet"/>
>                       <DataType value="vtkMultiGroupDataSet"/>
>                 </DataTypeDomain>
>             </InputProperty>
>             <InputProperty name="Input" command="AddInput"
> clean_command="RemoveAllInputs" multiple_input="1">
>                     <ProxyGroupDomain name="groups">
>                         <Group name="sources"/>
>                         <Group name="filters"/>
>                     </ProxyGroupDomain>
>                     <DataTypeDomain name="input_type">
>                            <DataType value="vtkDataSet"/>
>                     </DataTypeDomain>
>             </InputProperty>
>
>
> I am using a custom filter similar to vtkProbeFilter with two inputs.
> Is there any way to allow for this option (one input as
> vtkMultiGroupDataSet, the other as vtkDataSet)?
>
>
> Thank you in advance
> Shawn
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060804/323c98f1/attachment.htm
From utkarsh.ayachit at kitware.com  Fri Aug  4 10:23:18 2006
From: utkarsh.ayachit at kitware.com (Utkarsh Ayachit)
Date: Fri Aug  4 10:23:05 2006
Subject: [Paraview] ParaViews vtkCommonPython is not the sam as in VTK
In-Reply-To: <d3d4ab920608040249i4773a45bw270f7ac3b837ac95@mail.gmail.com>
References: <d3d4ab920608030503o9547f2er685b0668af0f186d@mail.gmail.com>	
	<44D22ECB.2090705@kitware.com>
	<d3d4ab920608040249i4773a45bw270f7ac3b837ac95@mail.gmail.com>
Message-ID: <44D35856.6080409@kitware.com>

Hi Milan,

ParaView does not warp all of VTK simply to keep the size of the python 
libraries down. Also, the utility of wrapping all VTK is minimal. Since 
in the ParaView environment, one cannot use VTK objects directly, one 
should use proxies etc etc. Ofcourse, a small subset it still necessary 
and that's what vtkCommonPython is in ParaView.

I think I know why you are getting the Invalid Connection ID error. 
Previously pvpython was exactly like pvbatch (except with a python 
interpreter instead of tcl). In batch mode, there is not concept of 
server connections. When the client would start up, it would create an 
internal "server" which was used for all the VTK objects created etc etc.

Since we wanted to make the python client a full-fledged client, it was 
essential that it supported connecting to remote servers. Hence, now the 
pvpython is more like pvclient. You have to connect to a server 
explicitly. Ofcourse, one can simply connect to a "built-in" server on 
the client itself, it doesn't have to be remote. But, one has to create 
that connection. We've introduced a new "paraview" module that 
simplifies the creation of connections etc etc. Here's a link to the 
Wiki page:

http://www.paraview.org/Wiki/index.php?title=ParaView:pvpython

The points to remember are that every script must create a connection 
and then on every proxy created, we must set the correct connection ID.

Utkarsh.


Milan Frank wrote:
> Hi Utkarsh,
> 
> honestly, my biggest problem is the size and complexity of the
> ParaViews CMake scripts. They are also modified very often by other
> developers. To maintain my separate branch consists of time consuming
> and error-susceptible merging. That is why I have used my
> minimalistic, unclear solution (to employ VTKs vtkXxxPython.dll
> instead of the ParaViews vtkCommonPython.dll).
> 
> What I have done ... First of all, I built VTK separately (directly
> from the ParaView source code tree). Than I manually copied created
> python wrappers (vtkXxxPython.lib and vtkXxxPython.dll) into paraviews
> "bin" build directory.
> 
> After that, I simply commented out the "KIT Common" part (Line: 153 to
> EOF) in the ParaView\Utilities\VTKPythonWrapping\CMakeLists.txt file.
> I suppose, this is responsible for the creation of the
> vtkCommonPython.lib/.dll. So, the manually copied one is not
> rewritten.
> 
> Next step is the modification of
> ParaView\Servers\ServerManager\CMakeLists.txt. I have added
> vtkIOPython and vtkRenderingPython to KIT_PYTHON_LIBS (Line 157). This
> tells linker where to find some additional functions.
> 
> This solution worked until recently. I had been able to use ParaView
> classes together with all VTK classes.
> 
> Now I'm receiving exception:
> vtkProcessModuleConnectionManager: Invalid connection ID: 4
> 
> When I debug, it seems there is no Interactor created inside
> SMRenderModuleProxy ...
> 
> I suspect, it is some compilation related mess caused by my unclear
> "solution". If so, you'll probably be unable to give me any help with
> that.
> 
> Just a quick question, is there any special reason to have some "light
> weight" version of VTK Python wrapper especially for ParaView, instead
> of "full featured" VTK Python wrappers?
> 
> I'm thinking now, to simply add some extra modules to the ParaViews
> vtkCommonPython could be the right solution for me ...
> 
> Thanks,
> Milan.
> 
> On 8/3/06, Utkarsh Ayachit <utkarsh.ayachit@kitware.com> wrote:
>> Hi Milan,
>>
>> Can you please elaborate what was your "previous solution" and what are
>> the difficulties that you facing due to the new changes? If I remember
>> correctly, the only thing that changed was adding of a bunch of more
>> classes to vtkCommonPython (apart from "paraview") python module.
>>
>> Utkarsh.
>>
>> Milan Frank wrote:
>> > Hi All,
>> >
>> > I'm working with ParaView Python interface. I can see that quite a lot
>> > of changes has been made recently in this area. Because of this, I'm
>> > in serious troubles now.
>> >
>> > Due to wxPython cooperation I was in need to employ full scale vtk
>> > python wrappers instead of the minimized ParaView version called
>> > vtkCommonPython.
>> >
>> > After the latest CVS update I'm unable to re-do my previous solution 
>> ...
>> >
>> > Could anyone suggest some way how to get rid of the ParaViews
>> > vtkCommonPython and use these VTKs Python libraries?
>> >
>> > Thank you in advance,
>> > Milan
>> > _______________________________________________
>> > ParaView mailing list
>> > ParaView@paraview.org
>> > http://www.paraview.org/mailman/listinfo/paraview
>> >
>>
>>
> 
> 

From aterrel at uchicago.edu  Fri Aug  4 13:38:09 2006
From: aterrel at uchicago.edu (Andy Terrel)
Date: Fri Aug  4 13:38:43 2006
Subject: [Paraview] New to Paraview, Question on scripting
Message-ID: <20060804123809.ABL83833@m4500-00.uchicago.edu>

Hello,

Hi I have only recently started using paraview and have been
perusing the paraview guide.  I would like to be able to
process a large number of .vtu files and then save them to
jpegs, so I would like the ablity to write a script to do
this.  I haven't been able to find a tutorial or a guide to
the tcl scripting commands that would help me do this.  Where
can I look to learn how to write scripts for paraview?

Thanks,
Andy 

-----------------------
Andy Terrel
Computer Science Dept.
University of Chicago
-----------------------
From randall.hand at gmail.com  Fri Aug  4 14:06:11 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Fri Aug  4 14:06:15 2006
Subject: [Paraview] Paraview on a tiled display
In-Reply-To: <C0EF9F96.6315%kmorel@sandia.gov>
References: <b02264720607280839h32fe9b92te2b2db3907b48f24@mail.gmail.com>
	<C0EF9F96.6315%kmorel@sandia.gov>
Message-ID: <b02264720608041106l5de41594kb284fadf4d80ec2d@mail.gmail.com>

Ok, with the info from Kenneth, I made the change and it's working great!

So, how should I return this patch back to you?  I just tried doing a 'diff
-Naur' to generate a patch for you, but it started including almost every
single file.  Seems an "out of core" build isn't completly "out of core"
afterall.

On 7/28/06, kmorel <kmorel@sandia.gov> wrote:
>
> > But is there any way to account for the Bezel width?  Is there any
> > configurable parameter to define a "gap" between tiles?
>
> This request is already captured as bug #1132:
> http://www.paraview.org/Bug/bug.php?op=show&bugid=1132&pos=1
>
> This actually should not be too hard to implement since the underlying
> parallel rendering code already supports mullions.  It's just a matter of
> adding some new parameters to pvserver and spacing the tiles out
> differently.
>
> This bug has been on my to-do list for, gosh, over a year now.  But, since
> we rarely use tile displays anymore and the tile displays that we do have
> don't have any spaces or overlap, this has been the lowest priority and I
> never get to it.
>
> If someone would like to implement this (hint, hint) and make sure
> everything (rendering and annotation) is working correctly, I am perfectly
> happy to point to the correct sections of code to change.
>
> -Ken
>
>
>


-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060804/92c3d72e/attachment.htm
From randall.hand at gmail.com  Fri Aug  4 16:04:49 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Fri Aug  4 16:04:53 2006
Subject: [Paraview] Paraview on a tiled display
In-Reply-To: <b02264720608041106l5de41594kb284fadf4d80ec2d@mail.gmail.com>
References: <b02264720607280839h32fe9b92te2b2db3907b48f24@mail.gmail.com>
	<C0EF9F96.6315%kmorel@sandia.gov>
	<b02264720608041106l5de41594kb284fadf4d80ec2d@mail.gmail.com>
Message-ID: <b02264720608041304g575b58a7l8c6c6601757a19c8@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: patchfile
Type: application/octet-stream
Size: 35610 bytes
Desc: not available
Url : http://public.kitware.com/pipermail/paraview/attachments/20060804/9d3f4342/patchfile-0001.obj
From randall.hand at gmail.com  Mon Aug  7 09:43:31 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Mon Aug  7 09:44:33 2006
Subject: [Paraview] Paraview on a tiled display
In-Reply-To: <b02264720608041304g575b58a7l8c6c6601757a19c8@mail.gmail.com>
References: <b02264720607280839h32fe9b92te2b2db3907b48f24@mail.gmail.com>
	<C0EF9F96.6315%kmorel@sandia.gov>
	<b02264720608041106l5de41594kb284fadf4d80ec2d@mail.gmail.com>
	<b02264720608041304g575b58a7l8c6c6601757a19c8@mail.gmail.com>
Message-ID: <b02264720608070643g4d55469ata428213734f8073b@mail.gmail.com>

I just finished some more research and it seems that this glitch is not
related to the Change I made.

I just reverted back to a standard 2.4.4 compile (Straight from Source
downloaded from the website) and the problem persists.  If I delete my
.ParaViewrc, so I start fresh, then my 60+ million triangle dataset loads
and renders a still frame in about 1 second (Across my 12-screen
renderwall).   Once I close/kill paraview and restart it, however, the
Client Collect option has changed and rendering (No matter what I set it to)
takes about 5 seconds.  Looks like it's a legitimate bug in Paraview, or
some strange glitch in our cluster.  Any advice on tracing this down?

On 8/4/06, Randall Hand <randall.hand@gmail.com> wrote:
>
> Attached to this email, find the diff patchfile of the Servers directory
> (the only directory affected by this change).  From my testing here it seems
> to work great.  Took a little while to get the mullions computed correctly
> during the subsampled rendering, but it seems to work now.
>
> The one issue I've been unable to figure out is that, for an unknown
> reason, the Client Collect gets mangled when Mullions are Enabled.  I've
> looked all over the place and I can't figure out how this parameter gets
> passed around.  When starting paraview the parameter is read correctly from
> the .ParaViewrc and properly used, but when it's written back to the
> .ParaViewrc file it's mangled (Originally it was writing it as 43676546, and
> now after a full recompile it's writing it as 6, when both times it should
> be 100).  Also, when it comes in mangled like that, of course the first
> thing I do is reset it to 100.  Unfortunately, the rendering is
> significantly slower, as if it's still computing the reduced geometry &
> transmitting it to the client (Although the client does not render it).
> Manually resetting the parameter in the .ParaViewrc & restarting paraview
> fixed it (for that 1 run).
>
> Any ideas?
>
>
> On 8/4/06, Randall Hand < randall.hand@gmail.com> wrote:
> >
> > Ok, with the info from Kenneth, I made the change and it's working
> > great!
> >
> > So, how should I return this patch back to you?  I just tried doing a
> > 'diff -Naur' to generate a patch for you, but it started including almost
> > every single file.  Seems an "out of core" build isn't completly "out of
> > core" afterall.
> >
> > On 7/28/06, kmorel < kmorel@sandia.gov> wrote:
> >
> > > > But is there any way to account for the Bezel width?  Is there any
> > > > configurable parameter to define a "gap" between tiles?
> > >
> > > This request is already captured as bug #1132:
> > > http://www.paraview.org/Bug/bug.php?op=show&bugid=1132&pos=1
> > >
> > > This actually should not be too hard to implement since the underlying
> > > parallel rendering code already supports mullions.  It's just a matter
> > > of
> > > adding some new parameters to pvserver and spacing the tiles out
> > > differently.
> > >
> > > This bug has been on my to-do list for, gosh, over a year now.  But,
> > > since
> > > we rarely use tile displays anymore and the tile displays that we do
> > > have
> > > don't have any spaces or overlap, this has been the lowest priority
> > > and I
> > > never get to it.
> > >
> > > If someone would like to implement this (hint, hint) and make sure
> > > everything (rendering and annotation) is working correctly, I am
> > > perfectly
> > > happy to point to the correct sections of code to change.
> > >
> > > -Ken
> > >
> > >
> > >
> >
> >
> > --
> > ----------------------------------------
> > Randall Hand
> > Visualization Scientist
> > ERDC MSRC-ITL
> >
>
>
>
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>
>


-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/1860832f/attachment.html
From utkarsh.ayachit at kitware.com  Mon Aug  7 12:06:43 2006
From: utkarsh.ayachit at kitware.com (Utkarsh Ayachit)
Date: Mon Aug  7 12:06:06 2006
Subject: [Paraview] ParaViews vtkCommonPython is not the sam as in VTK
In-Reply-To: <d3d4ab920608070731yc88c682rcee92d7406add5b8@mail.gmail.com>
References: <d3d4ab920608030503o9547f2er685b0668af0f186d@mail.gmail.com>	
	<44D22ECB.2090705@kitware.com>	
	<d3d4ab920608040249i4773a45bw270f7ac3b837ac95@mail.gmail.com>	
	<44D35856.6080409@kitware.com>
	<d3d4ab920608070731yc88c682rcee92d7406add5b8@mail.gmail.com>
Message-ID: <44D76513.2060602@kitware.com>

Hi Milan,

The "Glyph" properties are an anomaly to the general rule. I'd rather 
they were renamed to "ScaleMode" "Orient" from "SetScaleMode", 
"SetOrient". This may be done in future, and the change  will be 
backwards compatible (as far as possible).

The fix you suggested seems fine for "Set" but for "Get", it tries to 
search for a property with the name "GetScaleMode", which does not 
exists. In keep with the general norm where we prepend the property name 
with Get or Set, one can do the following:

filter.SetSetScaleMode(...) or
filter.GetSetScaleMode(...).

The pyProxy API is very new. I can see improvements to it as users start 
using it and raise issues/suggestions. As with most of paraview, we'll 
try to keep the changes backwards compatible as far as possible.

Utkarsh.


Milan Frank wrote:
> Hi Utkarsh,
> 
> thank you for your suggestions and nice wiki page. Great job! It
> helped me a lot.
> 
> I'm trying to use your "paraview" python module. It works fine.
> However, I was in need to modify it a bit. Your convenient access
> methods do not work with properties beginning with "get/set" prefix.
> (ie.: "Glyph" has a property named "SetScaleMode"). I have added these
> few lines to the pyProxy.__getattr__ method:
> 
>        if re.compile("^Set").match(name) and 
> self.SMProxy.GetProperty(name):
>            self.__LastAttrName = name
>            return self.__SetProperty__
>        if re.compile("^Get").match(name) and 
> self.SMProxy.GetProperty(name):
>            self.__LastAttrName = name
>            return self.__GetProperty__
> 
> It seems, it solves the problem. I'm not sure if it is not causing
> some other (for me hidden) problems. What do you think?
> 
> I'd like to ask you another question. Can I consider the interface of
> the pyProxy class as more less stable or do you plan any major
> changes? I'd like to start using it ASAP.
> 
> Thanks,
> Milan.
> 
> 
> On 8/4/06, Utkarsh Ayachit <utkarsh.ayachit@kitware.com> wrote:
>> Hi Milan,
>>
>> ParaView does not warp all of VTK simply to keep the size of the python
>> libraries down. Also, the utility of wrapping all VTK is minimal. Since
>> in the ParaView environment, one cannot use VTK objects directly, one
>> should use proxies etc etc. Ofcourse, a small subset it still necessary
>> and that's what vtkCommonPython is in ParaView.
>>
>> I think I know why you are getting the Invalid Connection ID error.
>> Previously pvpython was exactly like pvbatch (except with a python
>> interpreter instead of tcl). In batch mode, there is not concept of
>> server connections. When the client would start up, it would create an
>> internal "server" which was used for all the VTK objects created etc etc.
>>
>> Since we wanted to make the python client a full-fledged client, it was
>> essential that it supported connecting to remote servers. Hence, now the
>> pvpython is more like pvclient. You have to connect to a server
>> explicitly. Ofcourse, one can simply connect to a "built-in" server on
>> the client itself, it doesn't have to be remote. But, one has to create
>> that connection. We've introduced a new "paraview" module that
>> simplifies the creation of connections etc etc. Here's a link to the
>> Wiki page:
>>
>> http://www.paraview.org/Wiki/index.php?title=ParaView:pvpython
>>
>> The points to remember are that every script must create a connection
>> and then on every proxy created, we must set the correct connection ID.
>>
>> Utkarsh.
>>
>>
>> Milan Frank wrote:
>> > Hi Utkarsh,
>> >
>> > honestly, my biggest problem is the size and complexity of the
>> > ParaViews CMake scripts. They are also modified very often by other
>> > developers. To maintain my separate branch consists of time consuming
>> > and error-susceptible merging. That is why I have used my
>> > minimalistic, unclear solution (to employ VTKs vtkXxxPython.dll
>> > instead of the ParaViews vtkCommonPython.dll).
>> >
>> > What I have done ... First of all, I built VTK separately (directly
>> > from the ParaView source code tree). Than I manually copied created
>> > python wrappers (vtkXxxPython.lib and vtkXxxPython.dll) into paraviews
>> > "bin" build directory.
>> >
>> > After that, I simply commented out the "KIT Common" part (Line: 153 to
>> > EOF) in the ParaView\Utilities\VTKPythonWrapping\CMakeLists.txt file.
>> > I suppose, this is responsible for the creation of the
>> > vtkCommonPython.lib/.dll. So, the manually copied one is not
>> > rewritten.
>> >
>> > Next step is the modification of
>> > ParaView\Servers\ServerManager\CMakeLists.txt. I have added
>> > vtkIOPython and vtkRenderingPython to KIT_PYTHON_LIBS (Line 157). This
>> > tells linker where to find some additional functions.
>> >
>> > This solution worked until recently. I had been able to use ParaView
>> > classes together with all VTK classes.
>> >
>> > Now I'm receiving exception:
>> > vtkProcessModuleConnectionManager: Invalid connection ID: 4
>> >
>> > When I debug, it seems there is no Interactor created inside
>> > SMRenderModuleProxy ...
>> >
>> > I suspect, it is some compilation related mess caused by my unclear
>> > "solution". If so, you'll probably be unable to give me any help with
>> > that.
>> >
>> > Just a quick question, is there any special reason to have some "light
>> > weight" version of VTK Python wrapper especially for ParaView, instead
>> > of "full featured" VTK Python wrappers?
>> >
>> > I'm thinking now, to simply add some extra modules to the ParaViews
>> > vtkCommonPython could be the right solution for me ...
>> >
>> > Thanks,
>> > Milan.
>> >
>> > On 8/3/06, Utkarsh Ayachit <utkarsh.ayachit@kitware.com> wrote:
>> >> Hi Milan,
>> >>
>> >> Can you please elaborate what was your "previous solution" and what 
>> are
>> >> the difficulties that you facing due to the new changes? If I remember
>> >> correctly, the only thing that changed was adding of a bunch of more
>> >> classes to vtkCommonPython (apart from "paraview") python module.
>> >>
>> >> Utkarsh.
>> >>
>> >> Milan Frank wrote:
>> >> > Hi All,
>> >> >
>> >> > I'm working with ParaView Python interface. I can see that quite 
>> a lot
>> >> > of changes has been made recently in this area. Because of this, I'm
>> >> > in serious troubles now.
>> >> >
>> >> > Due to wxPython cooperation I was in need to employ full scale vtk
>> >> > python wrappers instead of the minimized ParaView version called
>> >> > vtkCommonPython.
>> >> >
>> >> > After the latest CVS update I'm unable to re-do my previous solution
>> >> ...
>> >> >
>> >> > Could anyone suggest some way how to get rid of the ParaViews
>> >> > vtkCommonPython and use these VTKs Python libraries?
>> >> >
>> >> > Thank you in advance,
>> >> > Milan
>> >> > _______________________________________________
>> >> > ParaView mailing list
>> >> > ParaView@paraview.org
>> >> > http://www.paraview.org/mailman/listinfo/paraview
>> >> >
>> >>
>> >>
>> >
>> >
>>
>>
> 

From david.c.gregory at navy.mil  Mon Aug  7 13:55:17 2006
From: david.c.gregory at navy.mil (Gregory, David C CIV NSWCDL-B55)
Date: Mon Aug  7 13:55:23 2006
Subject: [Paraview] spcth_interface.c
Message-ID: <8D6309F95A065249918E4B5FA1A45E1421E1C5@naeanrfkez03>

Hello All-
 
I was wondering if there was an knowledge of the SpyMaster(SPCTH) API
which lives in the paraview/Utilities/SPCTH folder?  Is this code still
used as part of the spcth filter in Paraview?  
 
I've been trying to use the code to read both CTH7.0 and CTH7.1 files
and am having trouble. Most the header info (block dimensions, field
variable descriptions, etc.) come through just fine.  However, the field
data itself seems to be garbage.
 
I was wondering if this code is dependant upon a certain version of the
SPCTH file?  Is the developer of this particular bit of code on the
ailing list?
 
Thanks
 
-David
 
 
David C. Gregory
NSWC Dahlgren
Weapons Lethality and Effectiveness Branch - G24
17320 Dahlgren Road
Dahlgren, VA  22448
540-653-0424
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/c0fbe280/attachment.html
From graya at BATTELLE.ORG  Mon Aug  7 15:40:30 2006
From: graya at BATTELLE.ORG (Adam Gray)
Date: Mon Aug  7 15:40:46 2006
Subject: [Paraview] VTK Error: vtkIdTypeArray: St9 bad_alloc
Message-ID: <44D7972E.1070700@battelle.org>

Hello, everyone.
We are using paraview on a number of Red Hat Enterprise Linux 3 machine (all are roughly Intel Xeon, 4GB of RAM, nVidia Quadro video card). When we open a spcth file and try to fiddle around with it, we get the following error near the last timesteps of our problem.

ErrorMessage
# Error or warning: There was a VTK Error in file: /home/amy/ParaViewReleaseRoot /paraview-2.4.3/VTK/Common/vtkDataArrayTemplate.txx (105)
 vtkIdTypeArray (0xfa744340): Unable to allocate 1856028 elements of size 4: St9 bad_alloc
ErrorMessage end
ErrorMessage
# Error or warning: There was a VTK Error in file: /home/amy/ParaViewReleaseRoot /paraview-2.4.3/VTK/Common/vtkDataArrayTemplate.txx (241)
 vtkIdTypeArray (0x5cc00b40): Unable to allocate 1872506 elements of size 4: St9 bad_alloc
ErrorMessage end
Segmentation fault

The way we get this is as follows... Open a 5GB spcth problem, extract the parts as desired, and play the sequence. Watch the total memory fill up, and watch paraview quit with the above error.

All of the spcth.# files add up to 5GB, so we fear this is a memory issue. If it is, or is not, could running paraview in parallel possibly help our situation at all? Or are we mostly stuck cramming more RAM into a machine?

Thank you in advance for any help.

Adam Gray
graya@battelle.org


From david.c.gregory at navy.mil  Mon Aug  7 16:07:58 2006
From: david.c.gregory at navy.mil (Gregory, David C CIV NSWCDL-B55)
Date: Mon Aug  7 16:08:27 2006
Subject: [Paraview] spcth_interface.c
In-Reply-To: <8D6309F95A065249918E4B5FA1A45E1421E1C5@naeanrfkez03>
Message-ID: <8D6309F95A065249918E4B5FA1A45E1421E1C6@naeanrfkez03>

Please disregard.   My novice C skills have embarrassed me again.
 
-David

	-----Original Message-----
	From: paraview-bounces+david.c.gregory=navy.mil@paraview.org
[mailto:paraview-bounces+david.c.gregory=navy.mil@paraview.org] On
Behalf Of Gregory, David C CIV NSWCDL-B55
	Sent: Monday, August 07, 2006 1:55 PM
	To: paraview@paraview.org
	Subject: [Paraview] spcth_interface.c
	
	
	Hello All-
	 
	I was wondering if there was an knowledge of the
SpyMaster(SPCTH) API which lives in the paraview/Utilities/SPCTH folder?
Is this code still used as part of the spcth filter in Paraview?  
	 
	I've been trying to use the code to read both CTH7.0 and CTH7.1
files and am having trouble. Most the header info (block dimensions,
field variable descriptions, etc.) come through just fine.  However, the
field data itself seems to be garbage.
	 
	I was wondering if this code is dependant upon a certain version
of the SPCTH file?  Is the developer of this particular bit of code on
the ailing list?
	 
	Thanks
	 
	-David
	 
	 
	David C. Gregory
	NSWC Dahlgren
	Weapons Lethality and Effectiveness Branch - G24
	17320 Dahlgren Road
	Dahlgren, VA  22448
	540-653-0424
	 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/7d50695d/attachment.html
From kmorel at sandia.gov  Mon Aug  7 16:23:08 2006
From: kmorel at sandia.gov (Moreland, Kenneth)
Date: Mon Aug  7 16:23:56 2006
Subject: [Paraview] How does one add a Mapper to ParaView?
In-Reply-To: <44D24898.5050801@lanl.gov>
Message-ID: <7137A9E1D1768C44BE7DF11D30FAB32302AC980A@ES21SNLNT.srn.sandia.gov>

Assuming that your mapper is a subclass and drop in replacement for an
existing mapper that ParaView already uses, such as vtkPolyDataMapper,
you can create a dynamic or shared object library with a subclass of
vtkObjectFactory to override the creation of the appropriate mapper, and
then set your VTK_AUTOLOAD_PATH to point to your new factory.  See the
documentation for vtkObjectFactory for more details:

    http://www.vtk.org/doc/nightly/html/classvtkObjectFactory.html

-Ken

> -----Original Message-----
> From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-
> bounces+kmorel=sandia.gov@paraview.org] On Behalf Of Jon Woodring
> Sent: Thursday, August 03, 2006 1:04 PM
> To: paraview@paraview.org
> Subject: [Paraview] How does one add a Mapper to ParaView?
> 
> I've found the documentation in the Wiki and there doesn't seem to be
> any (easy) way to add a Mapper to ParaView.
> 
> I have been able to compile a stand alone PV module, and my Mapper
works
> fine in a stand alone VTK program.
> 
> I have been able to generate the .pvsm for the module, but the hitch
> comes to creating the .xml descriptor for the client.
> 
> Where do I go from here?  It it something that I am missing in the
> client?  In the existing .xml files in the ParaView source, I do not
see
> any that describe the Mappers, though the .pvsm for the Mappers are
> present for the server.  How do I hook in a new Mapper for the client?
> 
> Am I to assume that only readers, writers, and filters can be added to
> ParaView at run time?  Thus, do I need to hack ParaView if I want it
to
> display data in a different method (use my Mapper)?
> 
> -Jon
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview


From randall.hand at gmail.com  Mon Aug  7 16:27:42 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Mon Aug  7 16:27:47 2006
Subject: [Paraview] Even more Questions about ParaView on a Tiled Display
Message-ID: <b02264720608071327x2d8feaa4gfecc3fb7f2cdcff4@mail.gmail.com>

Ok, so I've got my Mullions code (still looking for any comments about that)
working on our RenderWall and I'm noticing some interesting behaviour that
i've got some questions about.

In this cluster, we have 12 nodes + 1 head node, each one connected via a
GeForce 7800GTX to a 1600x1200 LCD Display.  Each node has 2 single-core
Xeon processors Hyperthreaded, for an "effective" 4 cores, and 8G of ram.
All connected via Infiniband.  I've loaded up 2 PVTP datasets:
   a) Dataset A is a 52Million Triangle 24-part surface, RGB per point
   b) Dataset B is a 67Million Triangle 12-part surface, no data per point
(Geometry only)

(Both datasets were load-balanced with Paraview's D3 filter.)

Now when I load them in Paraview, with a Tiled Display, they both load and
I'm able to interact with them beautifully.  119Million Triangles rendered
in 1s (for a still frame).  I applied a cutting plane to one of them, and
then another D3 (to balance the newly cut surface, right?), and the results
are still fabulously interactive.  But a few things i've noticed:
1) Even tho the results are now "load balanced" again (via the D3), my
memory usage is still fairly varying.  I'm seeing numbers ranging from 1.8Gto
3.8G on various nodes.  Is this because the memory isn't really freed-up
from the Cut operation?
2) One of my 12 nodes is basically "idle".  While the other 11 nodes show
runtimes of over 250minutes on the pvserver process, one node shows less
than 5.  Images are visible on all 12 displays.
3) On every node I have 3 processes.  4 I would understand, and 1 I had
expected.  But 3?  It seems one is for the Rendering & MPI work, while the
other 2 are for computations (one has the usual spinlock runtime of
250+minutes, while the others have 0.00).

An example:
[rhand@plasma proc]$ pdsh -a top -b -n1 | grep pvserver | sort
plasma01ib: 18580 rhand     25   0 1969M 1.9G 21052 R    25.0 25.0 275:25
1 pvserver
plasma01ib: 18581 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0   0:00
3 pvserver
plasma01ib: 18582 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0   0:00
3 pvserver
plasma02ib: 18367 rhand     25   0 1926M 1.9G 21052 R    25.0 24.5 275:22
1 pvserver
plasma02ib: 18368 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5   0:00
0 pvserver
plasma02ib: 18369 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5   0:00
0 pvserver
plasma03ib: 18407 rhand     25   0 3268M 3.2G 21052 R    25.2 41.7 275:20
1 pvserver
...(snip)...
plasma11ib: 20771 rhand     25   0 1997M 1.9G 21060 S     0.0 25.4   0:00
3 pvserver
plasma12ib: 18301 rhand     18   0 4161M 4.0G 21164 S     0.0 53.1   6:38
1 pvserver
plasma12ib: 18302 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1   0:00
1 pvserver
plasma12ib: 18303 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1   0:00
1 pvserver


4) While interacting, the 2D Scalar Bar seems to resize/move down to the
display closest the origin (lower-left corner), and then return to it's
desired location when the full-res image is rendered again.  Is this a
glitch, or by design?

So can someone explain to me a bit of what's going on "behind the curtain"?
I've also had no luck chasing down what's going on with the Slow Renderings
&mangled options on tiled Displays (On the production 2.4.4 release, not my
customized mullion-enabled one)
-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/c64f4b71/attachment.htm
From randall.hand at gmail.com  Mon Aug  7 16:30:51 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Mon Aug  7 16:30:55 2006
Subject: [Paraview] Re: Even more Questions about ParaView on a Tiled Display
In-Reply-To: <b02264720608071327x2d8feaa4gfecc3fb7f2cdcff4@mail.gmail.com>
References: <b02264720608071327x2d8feaa4gfecc3fb7f2cdcff4@mail.gmail.com>
Message-ID: <b02264720608071330ve76aa91hc7c4e3a726636578@mail.gmail.com>

Oh, I almost forgot this one..

#5: Is there a known problem with Opacity & IceT?  I tried setting one of
the isosurfaces at 50% transparent, but it simply vanished.  Where it
overlapped with the other (fully opaque) surface it could be seen, but the
rest of the area was blank.

I saw a similar effect with attempting to Volume Render a different
dataset.  I could see the volume effects where they intersected solid
polygonal geometry (bounding box, etc) but nowhere else.

On 8/7/06, Randall Hand <randall.hand@gmail.com> wrote:
>
> Ok, so I've got my Mullions code (still looking for any comments about
> that) working on our RenderWall and I'm noticing some interesting behaviour
> that i've got some questions about.
>
> In this cluster, we have 12 nodes + 1 head node, each one connected via a
> GeForce 7800GTX to a 1600x1200 LCD Display.  Each node has 2 single-core
> Xeon processors Hyperthreaded, for an "effective" 4 cores, and 8G of ram.
> All connected via Infiniband.  I've loaded up 2 PVTP datasets:
>    a) Dataset A is a 52Million Triangle 24-part surface, RGB per point
>    b) Dataset B is a 67Million Triangle 12-part surface, no data per point
> (Geometry only)
>
> (Both datasets were load-balanced with Paraview's D3 filter.)
>
> Now when I load them in Paraview, with a Tiled Display, they both load and
> I'm able to interact with them beautifully.  119Million Triangles rendered
> in 1s (for a still frame).  I applied a cutting plane to one of them, and
> then another D3 (to balance the newly cut surface, right?), and the results
> are still fabulously interactive.  But a few things i've noticed:
> 1) Even tho the results are now "load balanced" again (via the D3), my
> memory usage is still fairly varying.  I'm seeing numbers ranging from
> 1.8G to 3.8G on various nodes.  Is this because the memory isn't really
> freed-up from the Cut operation?
> 2) One of my 12 nodes is basically "idle".  While the other 11 nodes show
> runtimes of over 250minutes on the pvserver process, one node shows less
> than 5.  Images are visible on all 12 displays.
> 3) On every node I have 3 processes.  4 I would understand, and 1 I had
> expected.  But 3?  It seems one is for the Rendering & MPI work, while the
> other 2 are for computations (one has the usual spinlock runtime of
> 250+minutes, while the others have 0.00).
>
> An example:
> [rhand@plasma proc]$ pdsh -a top -b -n1 | grep pvserver | sort
> plasma01ib: 18580 rhand     25   0 1969M 1.9G 21052 R    25.0 25.0275:25   1 pvserver
> plasma01ib: 18581 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0
> 0:00   3 pvserver
> plasma01ib: 18582 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0
> 0:00   3 pvserver
> plasma02ib: 18367 rhand     25   0 1926M 1.9G 21052 R    25.0 24.5275:22   1 pvserver
> plasma02ib: 18368 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5
> 0:00   0 pvserver
> plasma02ib: 18369 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5
> 0:00   0 pvserver
> plasma03ib: 18407 rhand     25   0 3268M 3.2G 21052 R    25.2 41.7275:20   1 pvserver
> ...(snip)...
> plasma11ib: 20771 rhand     25   0 1997M 1.9G 21060 S     0.0 25.4
> 0:00   3 pvserver
> plasma12ib: 18301 rhand     18   0 4161M 4.0G 21164 S     0.0 53.1
> 6:38   1 pvserver
> plasma12ib: 18302 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1
> 0:00   1 pvserver
> plasma12ib: 18303 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1
> 0:00   1 pvserver
>
>
> 4) While interacting, the 2D Scalar Bar seems to resize/move down to the
> display closest the origin (lower-left corner), and then return to it's
> desired location when the full-res image is rendered again.  Is this a
> glitch, or by design?
>
> So can someone explain to me a bit of what's going on "behind the
> curtain"?  I've also had no luck chasing down what's going on with the Slow
> Renderings &mangled options on tiled Displays (On the production 2.4.4release, not my customized mullion-enabled one)
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>



-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/81f64ee3/attachment.html
From kmorel at sandia.gov  Mon Aug  7 17:01:01 2006
From: kmorel at sandia.gov (Moreland, Kenneth)
Date: Mon Aug  7 17:01:43 2006
Subject: [Paraview] Even more Questions about ParaView on a Tiled Display
In-Reply-To: <b02264720608071327x2d8feaa4gfecc3fb7f2cdcff4@mail.gmail.com>
Message-ID: <7137A9E1D1768C44BE7DF11D30FAB32302AC9828@ES21SNLNT.srn.sandia.gov>

0.	I just finished incorporating your patch.  Because it's late,
I'm going to wait until tomorrow to check it in.

 

1. There are two reasons that your memory usage is varying.  First, it
is true that the memory is not freed-up from the Cut operation.  The
same is true of the data between reader and the first D3.  Second, if
the number of processes you have is not a power of 2, than D3 is not
perfect at distributing your data.  You can have up to twice as much
data on one node as the other.

 

2. It does seem strange that one would be so different than the other
12.  I don't have a good explanation for that.

 

3. I'm guess that has to do with your MPI implementation.  It looks like
it forks a couple of times.  I notice that of the 3 processes, only one
is running.  The other 2 may be parents that have forked and are now
waiting (perhaps as a precaution in case the MPI job crashes and needs
to be shut down cleanly).

 

4. That sounds like a glitch.  Go ahead and submit a bug report.

 

-Ken

 

________________________________

From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-bounces+kmorel=sandia.gov@paraview.org] On Behalf Of
Randall Hand
Sent: Monday, August 07, 2006 2:28 PM
To: Paraview List
Subject: [Paraview] Even more Questions about ParaView on a Tiled
Display

 

Ok, so I've got my Mullions code (still looking for any comments about
that) working on our RenderWall and I'm noticing some interesting
behaviour that i've got some questions about.

In this cluster, we have 12 nodes + 1 head node, each one connected via
a GeForce 7800GTX to a 1600x1200 LCD Display.  Each node has 2
single-core Xeon processors Hyperthreaded, for an "effective" 4 cores,
and 8G of ram.  All connected via Infiniband.  I've loaded up 2 PVTP
datasets:  
   a) Dataset A is a 52Million Triangle 24-part surface, RGB per point
   b) Dataset B is a 67Million Triangle 12-part surface, no data per
point (Geometry only)

(Both datasets were load-balanced with Paraview's D3 filter.) 

Now when I load them in Paraview, with a Tiled Display, they both load
and I'm able to interact with them beautifully.  119Million Triangles
rendered in 1s (for a still frame).  I applied a cutting plane to one of
them, and then another D3 (to balance the newly cut surface, right?),
and the results are still fabulously interactive.  But a few things i've
noticed: 
1) Even tho the results are now "load balanced" again (via the D3), my
memory usage is still fairly varying.  I'm seeing numbers ranging from
1.8G to 3.8G on various nodes.  Is this because the memory isn't really
freed-up from the Cut operation? 
2) One of my 12 nodes is basically "idle".  While the other 11 nodes
show runtimes of over 250minutes on the pvserver process, one node shows
less than 5.  Images are visible on all 12 displays.
3) On every node I have 3 processes.  4 I would understand, and 1 I had
expected.  But 3?  It seems one is for the Rendering & MPI work, while
the other 2 are for computations (one has the usual spinlock runtime of
250+minutes, while the others have 0.00).

An example:

[rhand@plasma proc]$ pdsh -a top -b -n1 | grep pvserver | sort
plasma01ib: 18580 rhand     25   0 1969M 1.9G 21052 R    25.0 25.0
275:25   1 pvserver
plasma01ib: 18581 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0
0:00   3 pvserver
plasma01ib: 18582 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0
0:00   3 pvserver
plasma02ib: 18367 rhand     25   0 1926M 1.9G 21052 R    25.0 24.5
275:22   1 pvserver 
plasma02ib: 18368 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5
0:00   0 pvserver
plasma02ib: 18369 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5
0:00   0 pvserver
plasma03ib: 18407 rhand     25   0 3268M 3.2G 21052 R    25.2 41.7
275:20   1 pvserver
...(snip)...
plasma11ib: 20771 rhand     25   0 1997M 1.9G 21060 S     0.0 25.4
0:00   3 pvserver
plasma12ib: 18301 rhand     18   0 4161M 4.0G 21164 S     0.0 53.1
6:38   1 pvserver
plasma12ib: 18302 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1
0:00   1 pvserver
plasma12ib: 18303 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1
0:00   1 pvserver 



4) While interacting, the 2D Scalar Bar seems to resize/move down to the
display closest the origin (lower-left corner), and then return to it's
desired location when the full-res image is rendered again.  Is this a
glitch, or by design? 

So can someone explain to me a bit of what's going on "behind the
curtain"?  I've also had no luck chasing down what's going on with the
Slow Renderings &mangled options on tiled Displays (On the production
2.4.4 release, not my customized mullion-enabled one)
-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/d02fcd22/attachment.htm
From andy.cedilnik at kitware.com  Mon Aug  7 17:09:27 2006
From: andy.cedilnik at kitware.com (Andy Cedilnik)
Date: Mon Aug  7 17:09:33 2006
Subject: [Paraview] spcth_interface.c
In-Reply-To: <8D6309F95A065249918E4B5FA1A45E1421E1C6@naeanrfkez03>
References: <8D6309F95A065249918E4B5FA1A45E1421E1C6@naeanrfkez03>
Message-ID: <44D7AC07.6010502@kitware.com>

Hi David,

I rewrote spcth code and is now in ParaView 
Servers/Filters/vtkSpyPlotReader.cxx. It should be able to read CTH7.0 
files, but if you have 7.1 files you could share, we can verify that it 
will read them.

       Andy

Gregory, David C CIV NSWCDL-B55 wrote:
> Please disregard.   My novice C skills have embarrassed me again.
>  
> -David
>
>     -----Original Message-----
>     *From:* paraview-bounces+david.c.gregory=navy.mil@paraview.org
>     [mailto:paraview-bounces+david.c.gregory=navy.mil@paraview.org]
>     *On Behalf Of *Gregory, David C CIV NSWCDL-B55
>     *Sent:* Monday, August 07, 2006 1:55 PM
>     *To:* paraview@paraview.org
>     *Subject:* [Paraview] spcth_interface.c
>
>     Hello All-
>      
>     I was wondering if there was an knowledge of the SpyMaster(SPCTH)
>     API which lives in the paraview/Utilities/SPCTH folder?  Is this
>     code still used as part of the spcth filter in Paraview? 
>      
>     I've been trying to use the code to read both CTH7.0 and CTH7.1
>     files and am having trouble. Most the header info (block
>     dimensions, field variable descriptions, etc.) come through just
>     fine.  However, the field data itself seems to be garbage.
>      
>     I was wondering if this code is dependant upon a certain version
>     of the SPCTH file?  Is the developer of this particular bit of
>     code on the ailing list?
>      
>     Thanks
>      
>     -David
>      
>      
>     David C. Gregory
>     NSWC Dahlgren
>     Weapons Lethality and Effectiveness Branch - G24
>     17320 Dahlgren Road
>     Dahlgren, VA  22448
>     540-653-0424
>      
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>   

From bnwylie at sandia.gov  Mon Aug  7 17:13:35 2006
From: bnwylie at sandia.gov (Wylie, Brian)
Date: Mon Aug  7 17:13:53 2006
Subject: [Paraview] Even more Questions about ParaView on a Tiled Display
In-Reply-To: <7137A9E1D1768C44BE7DF11D30FAB32302AC9828@ES21SNLNT.srn.sandia.gov>
Message-ID: <E4C1C0FFED3E6B49AC2C1DA9723BE11E025C3244@ES20SNLNT.srn.sandia.gov>

I wanted to interject a general comment. 
 
D3 is a 'heavy weight' load balancing filter. It's really intended for
unstructured data and, right now, it will take vtkPolydata and turn it
to vtkUnstructuredGrid.
 
You might just want to run it once, right after the reader, and then run
'Extract Surface' to get back to vtkPolyData. You also might play with
the immediate mode and t-strip options to see if they make a big diff on
your rendering times.
 
Also, if your dataset has lots of files, you should see how it runs
without D3 at all, just for comparison. :)
 

  Brian Wylie - Org 1424
  Sandia National Laboratories
  MS 0822 - Building 880/A1-J
  (505)844-2238 FAX(505)845-0833                      
       ____                  _    __
      / __ \____  _________ | |  / (_)__ _      __
     / /_/ / __ `/ ___/ __ `/ | / / / _ \ | /| / /
    / ____/ /_/ / /  / /_/ /| |/ / /  __/ |/ |/ /
   /_/    \__,_/_/   \__,_/ |___/_/\___/|__/|__/

                                    Unleash the Beast


 


________________________________

	From: paraview-bounces+bnwylie=sandia.gov@paraview.org
[mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org] On Behalf Of
Moreland, Kenneth
	Sent: Monday, August 07, 2006 3:01 PM
	To: Randall Hand; Paraview List
	Subject: RE: [Paraview] Even more Questions about ParaView on a
Tiled Display
	
	

	0.	I just finished incorporating your patch.  Because it's
late, I'm going to wait until tomorrow to check it in. 

	 

	1. There are two reasons that your memory usage is varying.
First, it is true that the memory is not freed-up from the Cut
operation.  The same is true of the data between reader and the first
D3.  Second, if the number of processes you have is not a power of 2,
than D3 is not perfect at distributing your data.  You can have up to
twice as much data on one node as the other.

	 

	2. It does seem strange that one would be so different than the
other 12.  I don't have a good explanation for that.

	 

	3. I'm guess that has to do with your MPI implementation.  It
looks like it forks a couple of times.  I notice that of the 3
processes, only one is running.  The other 2 may be parents that have
forked and are now waiting (perhaps as a precaution in case the MPI job
crashes and needs to be shut down cleanly).

	 

	4. That sounds like a glitch.  Go ahead and submit a bug report.

	 

	-Ken

	 

	
________________________________


	From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-bounces+kmorel=sandia.gov@paraview.org] On Behalf Of
Randall Hand
	Sent: Monday, August 07, 2006 2:28 PM
	To: Paraview List
	Subject: [Paraview] Even more Questions about ParaView on a
Tiled Display

	 

	Ok, so I've got my Mullions code (still looking for any comments
about that) working on our RenderWall and I'm noticing some interesting
behaviour that i've got some questions about.
	
	In this cluster, we have 12 nodes + 1 head node, each one
connected via a GeForce 7800GTX to a 1600x1200 LCD Display.  Each node
has 2 single-core Xeon processors Hyperthreaded, for an "effective" 4
cores, and 8G of ram.  All connected via Infiniband.  I've loaded up 2
PVTP datasets:  
	   a) Dataset A is a 52Million Triangle 24-part surface, RGB per
point
	   b) Dataset B is a 67Million Triangle 12-part surface, no data
per point (Geometry only)
	
	(Both datasets were load-balanced with Paraview's D3 filter.) 
	
	Now when I load them in Paraview, with a Tiled Display, they
both load and I'm able to interact with them beautifully.  119Million
Triangles rendered in 1s (for a still frame).  I applied a cutting plane
to one of them, and then another D3 (to balance the newly cut surface,
right?), and the results are still fabulously interactive.  But a few
things i've noticed: 
	1) Even tho the results are now "load balanced" again (via the
D3), my memory usage is still fairly varying.  I'm seeing numbers
ranging from 1.8G to 3.8G on various nodes.  Is this because the memory
isn't really freed-up from the Cut operation? 
	2) One of my 12 nodes is basically "idle".  While the other 11
nodes show runtimes of over 250minutes on the pvserver process, one node
shows less than 5.  Images are visible on all 12 displays.
	3) On every node I have 3 processes.  4 I would understand, and
1 I had expected.  But 3?  It seems one is for the Rendering & MPI work,
while the other 2 are for computations (one has the usual spinlock
runtime of 250+minutes, while the others have 0.00).
	
	An example:

	[rhand@plasma proc]$ pdsh -a top -b -n1 | grep pvserver | sort
	plasma01ib: 18580 rhand     25   0 1969M 1.9G 21052 R    25.0
25.0 275:25   1 pvserver
	plasma01ib: 18581 rhand     25   0 1969M 1.9G 21052 S     0.0
25.0   0:00   3 pvserver
	plasma01ib: 18582 rhand     25   0 1969M 1.9G 21052 S     0.0
25.0   0:00   3 pvserver
	plasma02ib: 18367 rhand     25   0 1926M 1.9G 21052 R    25.0
24.5 275:22   1 pvserver 
	plasma02ib: 18368 rhand     25   0 1926M 1.9G 21052 S     0.0
24.5   0:00   0 pvserver
	plasma02ib: 18369 rhand     25   0 1926M 1.9G 21052 S     0.0
24.5   0:00   0 pvserver
	plasma03ib: 18407 rhand     25   0 3268M 3.2G 21052 R    25.2
41.7 275:20   1 pvserver
	...(snip)...
	plasma11ib: 20771 rhand     25   0 1997M 1.9G 21060 S     0.0
25.4   0:00   3 pvserver
	plasma12ib: 18301 rhand     18   0 4161M 4.0G 21164 S     0.0
53.1   6:38   1 pvserver
	plasma12ib: 18302 rhand     25   0 4161M 4.0G 21164 S     0.0
53.1   0:00   1 pvserver
	plasma12ib: 18303 rhand     25   0 4161M 4.0G 21164 S     0.0
53.1   0:00   1 pvserver 

	
	
	4) While interacting, the 2D Scalar Bar seems to resize/move
down to the display closest the origin (lower-left corner), and then
return to it's desired location when the full-res image is rendered
again.  Is this a glitch, or by design? 
	
	So can someone explain to me a bit of what's going on "behind
the curtain"?  I've also had no luck chasing down what's going on with
the Slow Renderings &mangled options on tiled Displays (On the
production 2.4.4 release, not my customized mullion-enabled one)
	-- 
	----------------------------------------
	Randall Hand
	Visualization Scientist
	ERDC MSRC-ITL 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/bc44a517/attachment.html
From randall.hand at gmail.com  Mon Aug  7 17:18:42 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Mon Aug  7 17:18:44 2006
Subject: [Paraview] Even more Questions about ParaView on a Tiled Display
In-Reply-To: <E4C1C0FFED3E6B49AC2C1DA9723BE11E025C3244@ES20SNLNT.srn.sandia.gov>
References: <7137A9E1D1768C44BE7DF11D30FAB32302AC9828@ES21SNLNT.srn.sandia.gov>
	<E4C1C0FFED3E6B49AC2C1DA9723BE11E025C3244@ES20SNLNT.srn.sandia.gov>
Message-ID: <b02264720608071418ja8e424er66f6d170549e5eab@mail.gmail.com>

Ahh, I forgot about the Power of 2 thing, that does explain it. Also, glad
to hear it was accepted.. Woohoo! :)

As for the Data, that's what I did actually.  The original files were a PLY
and a Legacy VTK.  I loaded them, painfully, and applied D3 + Extract
Surface, then saved them back as PVTP's.  So when I said the files were
"load balanced", that's what I meant (they had been D3's & saved back in
parallel).

Is there any "preferred" implementation of MPI?  We're using openMPI 1.0.1here.

On 8/7/06, Wylie, Brian <bnwylie@sandia.gov> wrote:
>
>  I wanted to interject a general comment.
>
> D3 is a 'heavy weight' load balancing filter. It's really intended for
> unstructured data and, right now, it will take vtkPolydata and turn it to
> vtkUnstructuredGrid.
>
> You might just want to run it once, right after the reader, and then run
> 'Extract Surface' to get back to vtkPolyData. You also might play with the
> immediate mode and t-strip options to see if they make a big diff on your
> rendering times.
>
> Also, if your dataset has lots of files, you should see how it runs
> without D3 at all, just for comparison. :)
>
>
>   Brian Wylie - Org 1424
>   Sandia National Laboratories
>   MS 0822 - Building 880/A1-J
>   (505)844-2238 FAX(505)845-0833
>        ____                  _    __
>       / __ \____  _________ | |  / (_)__ _      __
>      / /_/ / __ `/ ___/ __ `/ | / / / _ \ | /| / /
>     / ____/ /_/ / /  / /_/ /| |/ / /  __/ |/ |/ /
>    /_/    \__,_/_/   \__,_/
> |___/_/\___/|__/|__/
>                                     Unleash the Beast
>
>
>  ------------------------------
> *From:* paraview-bounces+bnwylie=sandia.gov@paraview.org [mailto:
> paraview-bounces+bnwylie=sandia.gov@paraview.org] *On Behalf Of *Moreland,
> Kenneth
> *Sent:* Monday, August 07, 2006 3:01 PM
> *To:* Randall Hand; Paraview List
> *Subject:* RE: [Paraview] Even more Questions about ParaView on a Tiled
> Display
>
>
>    1. I just finished incorporating your patch.  Because it's late, I'm
>    going to wait until tomorrow to check it in.
>
>
>
> 1. There are two reasons that your memory usage is varying.  First, it is
> true that the memory is not freed-up from the Cut operation.  The same is
> true of the data between reader and the first D3.  Second, if the number of
> processes you have is not a power of 2, than D3 is not perfect at
> distributing your data.  You can have up to twice as much data on one node
> as the other.
>
>
>
> 2. It does seem strange that one would be so different than the other 12.
> I don't have a good explanation for that.
>
>
>
> 3. I'm guess that has to do with your MPI implementation.  It looks like
> it forks a couple of times.  I notice that of the 3 processes, only one is
> running.  The other 2 may be parents that have forked and are now waiting
> (perhaps as a precaution in case the MPI job crashes and needs to be shut
> down cleanly).
>
>
>
> 4. That sounds like a glitch.  Go ahead and submit a bug report.
>
>
>
> -Ken
>
>
>   ------------------------------
>
> *From:* paraview-bounces+kmorel=sandia.gov@paraview.org [mailto:
> paraview-bounces+kmorel=sandia.gov@paraview.org] *On Behalf Of *Randall
> Hand
> *Sent:* Monday, August 07, 2006 2:28 PM
> *To:* Paraview List
> *Subject:* [Paraview] Even more Questions about ParaView on a Tiled
> Display
>
>
>
> Ok, so I've got my Mullions code (still looking for any comments about
> that) working on our RenderWall and I'm noticing some interesting behaviour
> that i've got some questions about.
>
> In this cluster, we have 12 nodes + 1 head node, each one connected via a
> GeForce 7800GTX to a 1600x1200 LCD Display.  Each node has 2 single-core
> Xeon processors Hyperthreaded, for an "effective" 4 cores, and 8G of ram.
> All connected via Infiniband.  I've loaded up 2 PVTP datasets:
>    a) Dataset A is a 52Million Triangle 24-part surface, RGB per point
>    b) Dataset B is a 67Million Triangle 12-part surface, no data per point
> (Geometry only)
>
> (Both datasets were load-balanced with Paraview's D3 filter.)
>
> Now when I load them in Paraview, with a Tiled Display, they both load and
> I'm able to interact with them beautifully.  119Million Triangles rendered
> in 1s (for a still frame).  I applied a cutting plane to one of them, and
> then another D3 (to balance the newly cut surface, right?), and the results
> are still fabulously interactive.  But a few things i've noticed:
> 1) Even tho the results are now "load balanced" again (via the D3), my
> memory usage is still fairly varying.  I'm seeing numbers ranging from
> 1.8G to 3.8G on various nodes.  Is this because the memory isn't really
> freed-up from the Cut operation?
> 2) One of my 12 nodes is basically "idle".  While the other 11 nodes show
> runtimes of over 250minutes on the pvserver process, one node shows less
> than 5.  Images are visible on all 12 displays.
> 3) On every node I have 3 processes.  4 I would understand, and 1 I had
> expected.  But 3?  It seems one is for the Rendering & MPI work, while the
> other 2 are for computations (one has the usual spinlock runtime of
> 250+minutes, while the others have 0.00).
>
> An example:
>
> [rhand@plasma proc]$ pdsh -a top -b -n1 | grep pvserver | sort
> plasma01ib: 18580 rhand     25   0 1969M 1.9G 21052 R    25.0 25.0275:25   1 pvserver
> plasma01ib: 18581 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0
> 0:00   3 pvserver
> plasma01ib: 18582 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0
> 0:00   3 pvserver
> plasma02ib: 18367 rhand     25   0 1926M 1.9G 21052 R    25.0 24.5275:22   1 pvserver
> plasma02ib: 18368 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5
> 0:00   0 pvserver
> plasma02ib: 18369 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5
> 0:00   0 pvserver
> plasma03ib: 18407 rhand     25   0 3268M 3.2G 21052 R    25.2 41.7275:20   1 pvserver
> ...(snip)...
> plasma11ib: 20771 rhand     25   0 1997M 1.9G 21060 S     0.0 25.4
> 0:00   3 pvserver
> plasma12ib: 18301 rhand     18   0 4161M 4.0G 21164 S     0.0 53.1
> 6:38   1 pvserver
> plasma12ib: 18302 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1
> 0:00   1 pvserver
> plasma12ib: 18303 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1
> 0:00   1 pvserver
>
>
>
> 4) While interacting, the 2D Scalar Bar seems to resize/move down to the
> display closest the origin (lower-left corner), and then return to it's
> desired location when the full-res image is rendered again.  Is this a
> glitch, or by design?
>
> So can someone explain to me a bit of what's going on "behind the
> curtain"?  I've also had no luck chasing down what's going on with the Slow
> Renderings &mangled options on tiled Displays (On the *production* 2.4.4release, not my customized mullion-enabled one)
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>



-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/a7637794/attachment.htm
From kmorel at sandia.gov  Mon Aug  7 18:05:02 2006
From: kmorel at sandia.gov (Moreland, Kenneth)
Date: Mon Aug  7 18:05:47 2006
Subject: [Paraview] Re: Even more Questions about ParaView on a
	Tiled Display
In-Reply-To: <b02264720608071330ve76aa91hc7c4e3a726636578@mail.gmail.com>
Message-ID: <7137A9E1D1768C44BE7DF11D30FAB32302AC9865@ES21SNLNT.srn.sandia.gov>

The default composite mode of IceT is to composite using z-buffer
comparisons.  Because nothing is written to the z-buffer when rendering
transparent geometry or volumes, the z-buffer comparisons are invalid.

 

New with ParaView 2.4, there is a view option to perform "ordered
compositing."  When you do that, ParaView will, under the covers,
redistribute your data (yet again) very carefully so that IceT can
perform a front-to-back color blending compositing.  Note, however, that
there is a pretty high overhead for redistributing your data if you are
planning to make a lot of changes to your pipeline.  Also note that
there is a bug in the way OpenGL blends the alpha channel that makes the
blending incorrect (Bug #2347), but at least it is visible.

 

-Ken

 

________________________________

From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-bounces+kmorel=sandia.gov@paraview.org] On Behalf Of
Randall Hand
Sent: Monday, August 07, 2006 2:31 PM
To: Paraview List
Subject: [Paraview] Re: Even more Questions about ParaView on a Tiled
Display

 

Oh, I almost forgot this one..

#5: Is there a known problem with Opacity & IceT?  I tried setting one
of the isosurfaces at 50% transparent, but it simply vanished.  Where it
overlapped with the other (fully opaque) surface it could be seen, but
the rest of the area was blank. 

I saw a similar effect with attempting to Volume Render a different
dataset.  I could see the volume effects where they intersected solid
polygonal geometry (bounding box, etc) but nowhere else.

On 8/7/06, Randall Hand <randall.hand@gmail.com> wrote:

Ok, so I've got my Mullions code (still looking for any comments about
that) working on our RenderWall and I'm noticing some interesting
behaviour that i've got some questions about.

In this cluster, we have 12 nodes + 1 head node, each one connected via
a GeForce 7800GTX to a 1600x1200 LCD Display.  Each node has 2
single-core Xeon processors Hyperthreaded, for an "effective" 4 cores,
and 8G of ram.  All connected via Infiniband.  I've loaded up 2 PVTP
datasets:  
   a) Dataset A is a 52Million Triangle 24-part surface, RGB per point
   b) Dataset B is a 67Million Triangle 12-part surface, no data per
point (Geometry only)

(Both datasets were load-balanced with Paraview's D3 filter.) 

Now when I load them in Paraview, with a Tiled Display, they both load
and I'm able to interact with them beautifully.  119Million Triangles
rendered in 1s (for a still frame).  I applied a cutting plane to one of
them, and then another D3 (to balance the newly cut surface, right?),
and the results are still fabulously interactive.  But a few things i've
noticed: 
1) Even tho the results are now "load balanced" again (via the D3), my
memory usage is still fairly varying.  I'm seeing numbers ranging from
1.8G to 3.8G on various nodes.  Is this because the memory isn't really
freed-up from the Cut operation? 
2) One of my 12 nodes is basically "idle".  While the other 11 nodes
show runtimes of over 250minutes on the pvserver process, one node shows
less than 5.  Images are visible on all 12 displays.
3) On every node I have 3 processes.  4 I would understand, and 1 I had
expected.  But 3?  It seems one is for the Rendering & MPI work, while
the other 2 are for computations (one has the usual spinlock runtime of
250+minutes, while the others have 0.00).

An example:

[rhand@plasma proc]$ pdsh -a top -b -n1 | grep pvserver | sort
plasma01ib: 18580 rhand     25   0 1969M 1.9G 21052 R    25.0 25.0
275:25   1 pvserver
plasma01ib: 18581 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0
0:00   3 pvserver
plasma01ib: 18582 rhand     25   0 1969M 1.9G 21052 S     0.0 25.0
0:00   3 pvserver
plasma02ib: 18367 rhand     25   0 1926M 1.9G 21052 R    25.0 24.5
275:22   1 pvserver 
plasma02ib: 18368 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5
0:00   0 pvserver
plasma02ib: 18369 rhand     25   0 1926M 1.9G 21052 S     0.0 24.5
0:00   0 pvserver
plasma03ib: 18407 rhand     25   0 3268M 3.2G 21052 R    25.2 41.7
275:20   1 pvserver
...(snip)...
plasma11ib: 20771 rhand     25   0 1997M 1.9G 21060 S     0.0 25.4
0:00   3 pvserver
plasma12ib: 18301 rhand     18   0 4161M 4.0G 21164 S     0.0 53.1
6:38   1 pvserver
plasma12ib: 18302 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1
0:00   1 pvserver
plasma12ib: 18303 rhand     25   0 4161M 4.0G 21164 S     0.0 53.1
0:00   1 pvserver 



4) While interacting, the 2D Scalar Bar seems to resize/move down to the
display closest the origin (lower-left corner), and then return to it's
desired location when the full-res image is rendered again.  Is this a
glitch, or by design? 

So can someone explain to me a bit of what's going on "behind the
curtain"?  I've also had no luck chasing down what's going on with the
Slow Renderings &mangled options on tiled Displays (On the production
2.4.4 release, not my customized mullion-enabled one)

-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 




-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060807/f36f9d25/attachment.html
From kmorel at sandia.gov  Tue Aug  8 10:12:19 2006
From: kmorel at sandia.gov (Moreland, Kenneth)
Date: Tue Aug  8 10:12:57 2006
Subject: [Paraview] Paraview on a tiled display
In-Reply-To: <b02264720608041304g575b58a7l8c6c6601757a19c8@mail.gmail.com>
Message-ID: <7137A9E1D1768C44BE7DF11D30FAB32302AC98F7@ES21SNLNT.srn.sandia.gov>

Randall,

 

I've incorporated your changes into the ParaView trunk and checked it
in.  If you can, please check it out and make sure it works for you.  I
also think the issues you are having with client collect have been fixed
on the trunk (vtkPVIceTRenderModuleUI.cxx 1.15).  It would be nice to
know you are having problems before 2.6 gets released.

 

-Ken

 

________________________________

From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-bounces+kmorel=sandia.gov@paraview.org] On Behalf Of
Randall Hand
Sent: Friday, August 04, 2006 2:05 PM
Cc: Paraview List
Subject: Re: [Paraview] Paraview on a tiled display

 

Attached to this email, find the diff patchfile of the Servers directory
(the only directory affected by this change).  From my testing here it
seems to work great.  Took a little while to get the mullions computed
correctly during the subsampled rendering, but it seems to work now.

The one issue I've been unable to figure out is that, for an unknown
reason, the Client Collect gets mangled when Mullions are Enabled.  I've
looked all over the place and I can't figure out how this parameter gets
passed around.  When starting paraview the parameter is read correctly
from the .ParaViewrc and properly used, but when it's written back to
the .ParaViewrc file it's mangled (Originally it was writing it as
43676546, and now after a full recompile it's writing it as 6, when both
times it should be 100).  Also, when it comes in mangled like that, of
course the first thing I do is reset it to 100.  Unfortunately, the
rendering is significantly slower, as if it's still computing the
reduced geometry & transmitting it to the client (Although the client
does not render it).  Manually resetting the parameter in the
.ParaViewrc & restarting paraview fixed it (for that 1 run).

Any ideas?

On 8/4/06, Randall Hand < randall.hand@gmail.com
<mailto:randall.hand@gmail.com> > wrote:

Ok, with the info from Kenneth, I made the change and it's working
great!  

So, how should I return this patch back to you?  I just tried doing a
'diff -Naur' to generate a patch for you, but it started including
almost every single file.  Seems an "out of core" build isn't completly
"out of core" afterall.  

On 7/28/06, kmorel < kmorel@sandia.gov <mailto:kmorel@sandia.gov> >
wrote:

	> But is there any way to account for the Bezel width?  Is there
any
	> configurable parameter to define a "gap" between tiles?
	
	This request is already captured as bug #1132:
	http://www.paraview.org/Bug/bug.php?op=show&bugid=1132&pos=1
	
	This actually should not be too hard to implement since the
underlying
	parallel rendering code already supports mullions.  It's just a
matter of 
	adding some new parameters to pvserver and spacing the tiles out
	differently.
	
	This bug has been on my to-do list for, gosh, over a year now.
But, since
	we rarely use tile displays anymore and the tile displays that
we do have 
	don't have any spaces or overlap, this has been the lowest
priority and I
	never get to it.
	
	If someone would like to implement this (hint, hint) and make
sure
	everything (rendering and annotation) is working correctly, I am
perfectly 
	happy to point to the correct sections of code to change.
	
	-Ken
	
	






-- 
---------------------------------------- 
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 




-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060808/2edce992/attachment.htm
From randall.hand at gmail.com  Tue Aug  8 12:12:55 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Tue Aug  8 12:13:04 2006
Subject: [Paraview] Paraview on a tiled display
In-Reply-To: <7137A9E1D1768C44BE7DF11D30FAB32302AC98F7@ES21SNLNT.srn.sandia.gov>
References: <b02264720608041304g575b58a7l8c6c6601757a19c8@mail.gmail.com>
	<7137A9E1D1768C44BE7DF11D30FAB32302AC98F7@ES21SNLNT.srn.sandia.gov>
Message-ID: <b02264720608080912tbfafca9s650a8f29ca63fcfd@mail.gmail.com>

Ok, I just got it compiled and here's what I see.
1) Mullions work.  Yipee!
2) The ScalarBar issue I reported yesterday, no longer happens (stays right
where it's supposed to).. Yipee!
3) I see the Ordered Compositing checkbox now (wasn't in the 2.4.4 build I
made)
4) Some of the progressbar updates don't come through now.. It's a minor
thing, but a bit odd.  Makes it look like it's locked up at times.
5) I no longer get bounding boxes on the client like I used to.. My client
shows nothing but crosshairs.
6) I still have issues with paraview being extremely slow on a restart.
Although, I've made progress.
       1) Run Paraview.. Turn on Triangle Strips & Turn off Immediate mode.
Everything is fine & dandy, 1s refresh rates.. Shutdown
       2) Start paraview again, verify all options (Including Client Collect
now) are preserved.  See the 6-7s refresh times.
       3) Turn on Immediate Mode, wait for Redraw.. Turn off Immediate Mode,
wait for redraw.
       4) Witness the restored 1s refresh rates.
   So it seems that perhaps these options aren't being propagated to the
nodes at startup like they should be.

So if I can get my bounding boxes back, and we can get the restart issue
thing figured out... I'ld be happy :)

On 8/8/06, Moreland, Kenneth <kmorel@sandia.gov> wrote:
>
>  Randall,
>
>
>
> I've incorporated your changes into the ParaView trunk and checked it in.
> If you can, please check it out and make sure it works for you.  I also
> think the issues you are having with client collect have been fixed on the
> trunk (vtkPVIceTRenderModuleUI.cxx 1.15).  It would be nice to know you
> are having problems before 2.6 gets released.
>
>
>
> -Ken
>
>
>   ------------------------------
>
> *From:* paraview-bounces+kmorel=sandia.gov@paraview.org [mailto:
> paraview-bounces+kmorel=sandia.gov@paraview.org] *On Behalf Of *Randall
> Hand
> *Sent:* Friday, August 04, 2006 2:05 PM
> *Cc:* Paraview List
>
> *Subject:* Re: [Paraview] Paraview on a tiled display
>
>
>
> Attached to this email, find the diff patchfile of the Servers directory
> (the only directory affected by this change).  From my testing here it seems
> to work great.  Took a little while to get the mullions computed correctly
> during the subsampled rendering, but it seems to work now.
>
> The one issue I've been unable to figure out is that, for an unknown
> reason, the Client Collect gets mangled when Mullions are Enabled.  I've
> looked all over the place and I can't figure out how this parameter gets
> passed around.  When starting paraview the parameter is read correctly from
> the .ParaViewrc and properly used, but when it's written back to the
> .ParaViewrc file it's mangled (Originally it was writing it as 43676546, and
> now after a full recompile it's writing it as 6, when both times it should
> be 100).  Also, when it comes in mangled like that, of course the first
> thing I do is reset it to 100.  Unfortunately, the rendering is
> significantly slower, as if it's still computing the reduced geometry &
> transmitting it to the client (Although the client does not render it).
> Manually resetting the parameter in the .ParaViewrc & restarting paraview
> fixed it (for that 1 run).
>
> Any ideas?
>
> On 8/4/06, *Randall Hand* < randall.hand@gmail.com> wrote:
>
> Ok, with the info from Kenneth, I made the change and it's working great!
>
>
> So, how should I return this patch back to you?  I just tried doing a
> 'diff -Naur' to generate a patch for you, but it started including almost
> every single file.  Seems an "out of core" build isn't completly "out of
> core" afterall.
>
> On 7/28/06, *kmorel* < kmorel@sandia.gov> wrote:
>
> > But is there any way to account for the Bezel width?  Is there any
> > configurable parameter to define a "gap" between tiles?
>
> This request is already captured as bug #1132:
> http://www.paraview.org/Bug/bug.php?op=show&bugid=1132&pos=1
>
> This actually should not be too hard to implement since the underlying
> parallel rendering code already supports mullions.  It's just a matter of
> adding some new parameters to pvserver and spacing the tiles out
> differently.
>
> This bug has been on my to-do list for, gosh, over a year now.  But, since
> we rarely use tile displays anymore and the tile displays that we do have
> don't have any spaces or overlap, this has been the lowest priority and I
> never get to it.
>
> If someone would like to implement this (hint, hint) and make sure
> everything (rendering and annotation) is working correctly, I am perfectly
>
> happy to point to the correct sections of code to change.
>
> -Ken
>
>
>
>
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>
>
>
>
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>



-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060808/f504acaf/attachment.html
From thorin.hax at gmail.com  Tue Aug  8 15:02:06 2006
From: thorin.hax at gmail.com (robert maynard)
Date: Tue Aug  8 15:02:12 2006
Subject: [Paraview] Adding Custom Filter
Message-ID: <b45d6a1e0608081202y70fd5595g36b7b22bd9fec21b@mail.gmail.com>

I modified the DataAnalysis filter to sum values up. When I try to add the
filter as a custom filter I get a compile error trying to include other
files. But if I replace the exisiting filter with my version it compiles
properly.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060808/28f6d256/attachment.htm
From eschenbe at psc.edu  Tue Aug  8 15:30:59 2006
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Tue Aug  8 15:31:10 2006
Subject: [Paraview] How to Average Transient Data
Message-ID: <35BD5BC16C30D06AEFB99214@harpo.psc.edu>

Is there currently a way to compute the average of a transient data set? Is there a VTK module to do this sort of thing? I have a simple case with static geometry.

Kent
Pittsburgh Supercomputing Center

From eschenbe at psc.edu  Tue Aug  8 15:41:01 2006
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Tue Aug  8 15:41:07 2006
Subject: [Paraview] Writing A Filter for Parallel Operation
Message-ID: <682932ECEEEE1C38185A1203@harpo.psc.edu>

A new filter based on vtkPolyDataAlgorithm does one operation over the entire data set (searches for the largest cell) but otherwise works on only one cell at a time.

I didn't do anything explicitly to support parallel work but it seems to work fine. I used a reader (producing unstructured data), D3 then the new module with 16 processors. Composite was set at 0 though I don't think this matters here.

This seems too good to be true. Is it?

Thanks!
Kent
Pittsburgh Supercomputing Center

From pierre.maruzewski at epfl.ch  Wed Aug  9 05:44:28 2006
From: pierre.maruzewski at epfl.ch (Pierre Maruzewski)
Date: Wed Aug  9 05:44:31 2006
Subject: [Paraview] my email
Message-ID: <44D9AE7C.5080801@epfl.ch>

pierre.maruzewski@epfl.ch

-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~
Dr. Pierre Maruzewski-Gaud
Blue Gene Project

EPFL-STI-LMH
Avenue de Cour 33 bis
CH-1007 Lausanne

Tel. : 00 41 21 69 32510
                   34095
Fax.: 00 41 21 69 33554
pierre.maruzewski@epfl.ch
http://hpc.epfl.ch
~~~~~~~~~~~~~~~~~~~~~~~~~~


From kmorel at sandia.gov  Wed Aug  9 10:18:20 2006
From: kmorel at sandia.gov (Moreland, Kenneth)
Date: Wed Aug  9 10:18:36 2006
Subject: [Paraview] Paraview on a tiled display
In-Reply-To: <b02264720608080912tbfafca9s650a8f29ca63fcfd@mail.gmail.com>
Message-ID: <7137A9E1D1768C44BE7DF11D30FAB32302B53CCE@ES21SNLNT.srn.sandia.gov>

I've checked in a fix (and a regression test) for the bounding box issue
this morning.  It should be working now.

 

As for your restart issue, I am not able to replicate it.  The rendering
speed looks consistent to me on restarting ParaView.

 

-Ken

 

________________________________

From: Randall Hand [mailto:randall.hand@gmail.com] 
Sent: Tuesday, August 08, 2006 10:13 AM
To: Moreland, Kenneth
Cc: Paraview List
Subject: Re: [Paraview] Paraview on a tiled display

 

Ok, I just got it compiled and here's what I see.
1) Mullions work.  Yipee!
2) The ScalarBar issue I reported yesterday, no longer happens (stays
right where it's supposed to).. Yipee!
3) I see the Ordered Compositing checkbox now (wasn't in the 2.4.4 build
I made)
4) Some of the progressbar updates don't come through now.. It's a minor
thing, but a bit odd.  Makes it look like it's locked up at times.
5) I no longer get bounding boxes on the client like I used to.. My
client shows nothing but crosshairs. 
6) I still have issues with paraview being extremely slow on a restart.
Although, I've made progress.  
       1) Run Paraview.. Turn on Triangle Strips & Turn off Immediate
mode.  Everything is fine & dandy, 1s refresh rates.. Shutdown 
       2) Start paraview again, verify all options (Including Client
Collect now) are preserved.  See the 6-7s refresh times.
       3) Turn on Immediate Mode, wait for Redraw.. Turn off Immediate
Mode, wait for redraw. 
       4) Witness the restored 1s refresh rates.
   So it seems that perhaps these options aren't being propagated to the
nodes at startup like they should be.

So if I can get my bounding boxes back, and we can get the restart issue
thing figured out... I'ld be happy :) 

On 8/8/06, Moreland, Kenneth <kmorel@sandia.gov> wrote:

Randall,

 

I've incorporated your changes into the ParaView trunk and checked it
in.  If you can, please check it out and make sure it works for you.  I
also think the issues you are having with client collect have been fixed
on the trunk (vtkPVIceTRenderModuleUI.cxx 1.15).  It would be nice to
know you are having problems before 2.6 gets released.

 

-Ken

 

________________________________

From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-bounces+kmorel=sandia.gov@paraview.org] On Behalf Of
Randall Hand
Sent: Friday, August 04, 2006 2:05 PM
Cc: Paraview List


Subject: Re: [Paraview] Paraview on a tiled display

 

Attached to this email, find the diff patchfile of the Servers directory
(the only directory affected by this change).  From my testing here it
seems to work great.  Took a little while to get the mullions computed
correctly during the subsampled rendering, but it seems to work now.

The one issue I've been unable to figure out is that, for an unknown
reason, the Client Collect gets mangled when Mullions are Enabled.  I've
looked all over the place and I can't figure out how this parameter gets
passed around.  When starting paraview the parameter is read correctly
from the .ParaViewrc and properly used, but when it's written back to
the .ParaViewrc file it's mangled (Originally it was writing it as
43676546, and now after a full recompile it's writing it as 6, when both
times it should be 100).  Also, when it comes in mangled like that, of
course the first thing I do is reset it to 100.  Unfortunately, the
rendering is significantly slower, as if it's still computing the
reduced geometry & transmitting it to the client (Although the client
does not render it).  Manually resetting the parameter in the
.ParaViewrc & restarting paraview fixed it (for that 1 run).

Any ideas?

On 8/4/06, Randall Hand < randall.hand@gmail.com
<mailto:randall.hand@gmail.com> > wrote:

Ok, with the info from Kenneth, I made the change and it's working
great!  

So, how should I return this patch back to you?  I just tried doing a
'diff -Naur' to generate a patch for you, but it started including
almost every single file.  Seems an "out of core" build isn't completly
"out of core" afterall.  

On 7/28/06, kmorel < kmorel@sandia.gov <mailto:kmorel@sandia.gov> >
wrote:

	> But is there any way to account for the Bezel width?  Is there
any
	> configurable parameter to define a "gap" between tiles?
	
	This request is already captured as bug #1132:
	http://www.paraview.org/Bug/bug.php?op=show&bugid=1132&pos=1 
	
	This actually should not be too hard to implement since the
underlying
	parallel rendering code already supports mullions.  It's just a
matter of 
	adding some new parameters to pvserver and spacing the tiles out
	differently.
	
	This bug has been on my to-do list for, gosh, over a year now.
But, since
	we rarely use tile displays anymore and the tile displays that
we do have 
	don't have any spaces or overlap, this has been the lowest
priority and I
	never get to it.
	
	If someone would like to implement this (hint, hint) and make
sure
	everything (rendering and annotation) is working correctly, I am
perfectly 
	happy to point to the correct sections of code to change.
	
	-Ken






-- 
---------------------------------------- 
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 




-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 




-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/12e5a3cb/attachment-0001.html
From randall.hand at gmail.com  Wed Aug  9 11:39:55 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Wed Aug  9 11:40:01 2006
Subject: [Paraview] Paraview on a tiled display
In-Reply-To: <7137A9E1D1768C44BE7DF11D30FAB32302B53CCE@ES21SNLNT.srn.sandia.gov>
References: <b02264720608080912tbfafca9s650a8f29ca63fcfd@mail.gmail.com>
	<7137A9E1D1768C44BE7DF11D30FAB32302B53CCE@ES21SNLNT.srn.sandia.gov>
Message-ID: <b02264720608090839x65df12b4re043f768efeaf86c@mail.gmail.com>

Bounding box fix verified :) works great..

As for the restart issue, I'm still seeing it.  I've basically resigned
myself to putting a 'rm -f ~/.ParaViewrc' in my starting scripts. I'll keep
investigating it here.

On 8/9/06, Moreland, Kenneth <kmorel@sandia.gov> wrote:
>
>  I've checked in a fix (and a regression test) for the bounding box issue
> this morning.  It should be working now.
>
>
>
> As for your restart issue, I am not able to replicate it.  The rendering
> speed looks consistent to me on restarting ParaView.
>
>
>
> -Ken
>
>
>   ------------------------------
>
> *From:* Randall Hand [mailto:randall.hand@gmail.com]
> *Sent:* Tuesday, August 08, 2006 10:13 AM
> *To:* Moreland, Kenneth
>
> *Cc:* Paraview List
> *Subject:* Re: [Paraview] Paraview on a tiled display
>
>
>
> Ok, I just got it compiled and here's what I see.
> 1) Mullions work.  Yipee!
> 2) The ScalarBar issue I reported yesterday, no longer happens (stays
> right where it's supposed to).. Yipee!
> 3) I see the Ordered Compositing checkbox now (wasn't in the 2.4.4 build I
> made)
> 4) Some of the progressbar updates don't come through now.. It's a minor
> thing, but a bit odd.  Makes it look like it's locked up at times.
> 5) I no longer get bounding boxes on the client like I used to.. My client
> shows nothing but crosshairs.
> 6) I still have issues with paraview being extremely slow on a restart.
> Although, I've made progress.
>        1) Run Paraview.. Turn on Triangle Strips & Turn off Immediate
> mode.  Everything is fine & dandy, 1s refresh rates.. Shutdown
>        2) Start paraview again, verify all options (Including Client
> Collect now) are preserved.  See the 6-7s refresh times.
>        3) Turn on Immediate Mode, wait for Redraw.. Turn off Immediate
> Mode, wait for redraw.
>        4) Witness the restored 1s refresh rates.
>    So it seems that perhaps these options aren't being propagated to the
> nodes at startup like they should be.
>
> So if I can get my bounding boxes back, and we can get the restart issue
> thing figured out... I'ld be happy :)
>
> On 8/8/06, *Moreland, Kenneth* <kmorel@sandia.gov> wrote:
>
> Randall,
>
>
>
> I've incorporated your changes into the ParaView trunk and checked it in.
> If you can, please check it out and make sure it works for you.  I also
> think the issues you are having with client collect have been fixed on the
> trunk (vtkPVIceTRenderModuleUI.cxx 1.15).  It would be nice to know you
> are having problems before 2.6 gets released.
>
>
>
> -Ken
>
>
>   ------------------------------
>
> *From:* paraview-bounces+kmorel=sandia.gov@paraview.org [mailto:
> paraview-bounces+kmorel=sandia.gov@paraview.org] *On Behalf Of *Randall
> Hand
> *Sent:* Friday, August 04, 2006 2:05 PM
> *Cc:* Paraview List
>
>
> *Subject:* Re: [Paraview] Paraview on a tiled display
>
>
>
> Attached to this email, find the diff patchfile of the Servers directory
> (the only directory affected by this change).  From my testing here it seems
> to work great.  Took a little while to get the mullions computed correctly
> during the subsampled rendering, but it seems to work now.
>
> The one issue I've been unable to figure out is that, for an unknown
> reason, the Client Collect gets mangled when Mullions are Enabled.  I've
> looked all over the place and I can't figure out how this parameter gets
> passed around.  When starting paraview the parameter is read correctly from
> the .ParaViewrc and properly used, but when it's written back to the
> .ParaViewrc file it's mangled (Originally it was writing it as 43676546, and
> now after a full recompile it's writing it as 6, when both times it should
> be 100).  Also, when it comes in mangled like that, of course the first
> thing I do is reset it to 100.  Unfortunately, the rendering is
> significantly slower, as if it's still computing the reduced geometry &
> transmitting it to the client (Although the client does not render it).
> Manually resetting the parameter in the .ParaViewrc & restarting paraview
> fixed it (for that 1 run).
>
> Any ideas?
>
> On 8/4/06, *Randall Hand* < randall.hand@gmail.com> wrote:
>
> Ok, with the info from Kenneth, I made the change and it's working great!
>
>
> So, how should I return this patch back to you?  I just tried doing a
> 'diff -Naur' to generate a patch for you, but it started including almost
> every single file.  Seems an "out of core" build isn't completly "out of
> core" afterall.
>
> On 7/28/06, *kmorel* < kmorel@sandia.gov> wrote:
>
> > But is there any way to account for the Bezel width?  Is there any
> > configurable parameter to define a "gap" between tiles?
>
> This request is already captured as bug #1132:
> http://www.paraview.org/Bug/bug.php?op=show&bugid=1132&pos=1
>
> This actually should not be too hard to implement since the underlying
> parallel rendering code already supports mullions.  It's just a matter of
> adding some new parameters to pvserver and spacing the tiles out
> differently.
>
> This bug has been on my to-do list for, gosh, over a year now.  But, since
> we rarely use tile displays anymore and the tile displays that we do have
> don't have any spaces or overlap, this has been the lowest priority and I
> never get to it.
>
> If someone would like to implement this (hint, hint) and make sure
> everything (rendering and annotation) is working correctly, I am perfectly
>
> happy to point to the correct sections of code to change.
>
> -Ken
>
>
>
>
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>
>
>
>
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>
>
>
>
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>



-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/2627eb14/attachment.htm
From randall.hand at gmail.com  Wed Aug  9 11:41:08 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Wed Aug  9 11:41:10 2006
Subject: [Paraview] Paraview in Parallel-Server mode
Message-ID: <b02264720608090841m730d1fcdpd6c5ba04979a6f48@mail.gmail.com>

Is there a preferred Render Module to use when running Paraview in
Single-Display Multiple-Server mode.  I'm running a pvserver across our
12-node cluster and getting pretty poor performance with the Default.
Specifying the MPIRenderModule helps, but the IceTDesktopRenderModule seems
pretty bad.  Is there a Preferred module to use, and reasons why you'ld use
one over the other?

-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/618a0fbb/attachment.html
From kmorel at sandia.gov  Wed Aug  9 11:47:18 2006
From: kmorel at sandia.gov (Moreland, Kenneth)
Date: Wed Aug  9 11:47:56 2006
Subject: [Paraview] Paraview in Parallel-Server mode
In-Reply-To: <b02264720608090841m730d1fcdpd6c5ba04979a6f48@mail.gmail.com>
Message-ID: <7137A9E1D1768C44BE7DF11D30FAB32302B53D17@ES21SNLNT.srn.sandia.gov>

IceTDesktopRenderModule (the default) and MPIRenderModule are your two
choices.  We always use IceTDesktopRenderModule and find it to work very
well.  It should be running at least as fast IceTRenderModule (which is
used when running your tile display) since it is performing the same
compositing code, but having to composite many fewer pixels.

 

-Ken

 

________________________________

From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-bounces+kmorel=sandia.gov@paraview.org] On Behalf Of
Randall Hand
Sent: Wednesday, August 09, 2006 9:41 AM
To: Paraview List
Subject: [Paraview] Paraview in Parallel-Server mode

 

Is there a preferred Render Module to use when running Paraview in
Single-Display Multiple-Server mode.  I'm running a pvserver across our
12-node cluster and getting pretty poor performance with the Default.
Specifying the MPIRenderModule helps, but the IceTDesktopRenderModule
seems pretty bad.  Is there a Preferred module to use, and reasons why
you'ld use one over the other? 

-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/48c00f1c/attachment-0001.htm
From berk.geveci at gmail.com  Wed Aug  9 11:55:25 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Wed Aug  9 11:55:27 2006
Subject: [Paraview] Paraview in Parallel-Server mode
In-Reply-To: <b02264720608090841m730d1fcdpd6c5ba04979a6f48@mail.gmail.com>
References: <b02264720608090841m730d1fcdpd6c5ba04979a6f48@mail.gmail.com>
Message-ID: <a2ab21560608090855vdad6bcs848c25fb76ab345d@mail.gmail.com>

I would stick with the default (IceTDesktopRenderModule) and tweak 3D view
settings parameters until the performances is good. I think I have a power
point presentation talking about the parameters and what they do. Ken
presented it at supercomputing and it explains different options very
clearly. I can share it.

-Berk

On 8/9/06, Randall Hand <randall.hand@gmail.com> wrote:
>
> Is there a preferred Render Module to use when running Paraview in
> Single-Display Multiple-Server mode.  I'm running a pvserver across our
> 12-node cluster and getting pretty poor performance with the Default.
> Specifying the MPIRenderModule helps, but the IceTDesktopRenderModule seems
> pretty bad.  Is there a Preferred module to use, and reasons why you'ld use
> one over the other?
>
> --
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/f6bd06c1/attachment.html
From bnwylie at sandia.gov  Wed Aug  9 12:02:26 2006
From: bnwylie at sandia.gov (Wylie, Brian)
Date: Wed Aug  9 12:03:59 2006
Subject: [Paraview] Paraview in Parallel-Server mode
In-Reply-To: <a2ab21560608090855vdad6bcs848c25fb76ab345d@mail.gmail.com>
Message-ID: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636227@ES20SNLNT.srn.sandia.gov>

Randall,
 
Can you elaborate on the poor performance? We can get 30 frames/sec over
100T with IceT, I'm having a hard time believing that MPIRenderModule
actually performs better. The only circumstance I've seen where
MPIRenderModule outperforms IceT is when the client is like a laptop
with really slow pixel scaling. Can you give me details of your setup...
cluster specs... network specs... client specs...
 
Also I'm assuming that your compositing threshold is 0MB in both tests,
and subsampling is set to the same value, squirt compression is the
same, etc...
 

  Brian Wylie - Org 1424
  Sandia National Laboratories
  MS 0822 - Building 880/A1-J
  (505)844-2238 FAX(505)845-0833                      
       ____                  _    __
      / __ \____  _________ | |  / (_)__ _      __
     / /_/ / __ `/ ___/ __ `/ | / / / _ \ | /| / /
    / ____/ /_/ / /  / /_/ /| |/ / /  __/ |/ |/ /
   /_/    \__,_/_/   \__,_/ |___/_/\___/|__/|__/

                                    Unleash the Beast


 


________________________________

	From: paraview-bounces+bnwylie=sandia.gov@paraview.org
[mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org] On Behalf Of
Berk Geveci
	Sent: Wednesday, August 09, 2006 9:55 AM
	To: Randall Hand
	Cc: Paraview List
	Subject: Re: [Paraview] Paraview in Parallel-Server mode
	
	
	I would stick with the default (IceTDesktopRenderModule) and
tweak 3D view settings parameters until the performances is good. I
think I have a power point presentation talking about the parameters and
what they do. Ken presented it at supercomputing and it explains
different options very clearly. I can share it. 
	
	-Berk
	
	
	On 8/9/06, Randall Hand <randall.hand@gmail.com> wrote: 

		Is there a preferred Render Module to use when running
Paraview in Single-Display Multiple-Server mode.  I'm running a pvserver
across our 12-node cluster and getting pretty poor performance with the
Default.  Specifying the MPIRenderModule helps, but the
IceTDesktopRenderModule seems pretty bad.  Is there a Preferred module
to use, and reasons why you'ld use one over the other? 
		
		
		-- 
		----------------------------------------
		Randall Hand
		Visualization Scientist
		ERDC MSRC-ITL 

		_______________________________________________
		ParaView mailing list
		ParaView@paraview.org
		http://www.paraview.org/mailman/listinfo/paraview
		
		
		


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/941cd1b2/attachment.htm
From randall.hand at gmail.com  Wed Aug  9 12:25:11 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Wed Aug  9 12:25:19 2006
Subject: [Paraview] Paraview in Parallel-Server mode
In-Reply-To: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636227@ES20SNLNT.srn.sandia.gov>
References: <a2ab21560608090855vdad6bcs848c25fb76ab345d@mail.gmail.com>
	<E4C1C0FFED3E6B49AC2C1DA9723BE11E02636227@ES20SNLNT.srn.sandia.gov>
Message-ID: <b02264720608090925vef8e147uaa9fd0d0b0b5809c@mail.gmail.com>

I've had a few issues with it (We're using Infiniband, so network bandwidth
should be negligible), some of which are just I incorrectly percieved what
was going on and some of which I think is a bug.

I think what I originally percieved as phenomenal slowless is actually a
bug.  I use 4x Subsampling for the interactive rendering, but when I let go
it never returns to full resolution, it seems to drop to something like 2x
subsampling.  I originally interpreted that as it's slowly rendering in the
background, but if I use no subsampling for the interactive displays then it
works just fine.  (I just ran this test a few minutes ago).

The other slowness I noticed was in the way lookmarks are handled.  I build
the lookmark with the MPI version so the decimated models were already in
memory when it came time for the "big interactive part".  When I repeated
the lookmark in IceT, I had to wait a good 30s or so for it to build the
decimated models and such.  Again, I just incorrectly percieved what was
going on.

In the no subsampling version, yes it beat the pants off MPI hands-down,
although you can't see what's happening on the remote displays quite as
well.  Is there some reason why I would be seeing noise on the other heads?
During interaction I see the top 1/3 of the screen rendered on all the
nodes, but during stills I just see noise.  It's minor, but I know someone
is gonna ask if they see it.




On 8/9/06, Wylie, Brian <bnwylie@sandia.gov> wrote:
>
>  Randall,
>
> Can you elaborate on the poor performance? We can get 30 frames/sec over
> 100T with IceT, I'm having a hard time believing that MPIRenderModule
> actually performs better. The only circumstance I've seen where
> MPIRenderModule outperforms IceT is when the client is like a laptop with
> really slow pixel scaling. Can you give me details of your setup... cluster
> specs... network specs... client specs...
>
> Also I'm assuming that your compositing threshold is 0MB in both tests,
> and subsampling is set to the same value, squirt compression is the same,
> etc...
>
>
>   Brian Wylie - Org 1424
>   Sandia National Laboratories
>   MS 0822 - Building 880/A1-J
>   (505)844-2238 FAX(505)845-0833
>        ____                  _    __
>       / __ \____  _________ | |  / (_)__ _      __
>      / /_/ / __ `/ ___/ __ `/ | / / / _ \ | /| / /
>     / ____/ /_/ / /  / /_/ /| |/ / /  __/ |/ |/ /
>    /_/    \__,_/_/   \__,_/
> |___/_/\___/|__/|__/
>                                     Unleash the Beast
>
>
>  ------------------------------
> *From:* paraview-bounces+bnwylie=sandia.gov@paraview.org [mailto:
> paraview-bounces+bnwylie=sandia.gov@paraview.org] *On Behalf Of *Berk
> Geveci
> *Sent:* Wednesday, August 09, 2006 9:55 AM
> *To:* Randall Hand
> *Cc:* Paraview List
> *Subject:* Re: [Paraview] Paraview in Parallel-Server mode
>
> I would stick with the default (IceTDesktopRenderModule) and tweak 3D view
> settings parameters until the performances is good. I think I have a power
> point presentation talking about the parameters and what they do. Ken
> presented it at supercomputing and it explains different options very
> clearly. I can share it.
>
> -Berk
>
> On 8/9/06, Randall Hand <randall.hand@gmail.com> wrote:
> >
> > Is there a preferred Render Module to use when running Paraview in
> > Single-Display Multiple-Server mode.  I'm running a pvserver across our
> > 12-node cluster and getting pretty poor performance with the Default.
> > Specifying the MPIRenderModule helps, but the IceTDesktopRenderModule seems
> > pretty bad.  Is there a Preferred module to use, and reasons why you'ld use
> > one over the other?
> >
> > --
> > ----------------------------------------
> > Randall Hand
> > Visualization Scientist
> > ERDC MSRC-ITL
> >
> > _______________________________________________
> > ParaView mailing list
> > ParaView@paraview.org
> > http://www.paraview.org/mailman/listinfo/paraview
> >
> >
> >
>


-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/4d19c191/attachment.html
From berk.geveci at gmail.com  Wed Aug  9 12:31:26 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Wed Aug  9 12:31:29 2006
Subject: [Paraview] Paraview in Parallel-Server mode
In-Reply-To: <b02264720608090925vef8e147uaa9fd0d0b0b5809c@mail.gmail.com>
References: <a2ab21560608090855vdad6bcs848c25fb76ab345d@mail.gmail.com>
	<E4C1C0FFED3E6B49AC2C1DA9723BE11E02636227@ES20SNLNT.srn.sandia.gov>
	<b02264720608090925vef8e147uaa9fd0d0b0b5809c@mail.gmail.com>
Message-ID: <a2ab21560608090931s7f7bc4e4iad6eccfd983f0ecc@mail.gmail.com>

>
> I think what I originally percieved as phenomenal slowless is actually a
> bug.  I use 4x Subsampling for the interactive rendering, but when I let go
> it never returns to full resolution, it seems to drop to something like 2x
> subsampling.  I originally interpreted that as it's slowly rendering in the
> background, but if I use no subsampling for the interactive displays then it
> works just fine.  (I just ran this test a few minutes ago).
>


Is this a CVS (2.5) ParaView?  This is a known bug (by me and Ken Moreland,
I think :-) ) that was introduced since 2.4 and will be fixed in 2.6. The
bug tracker id is 3416.

-Berk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/ebb7dc64/attachment.htm
From randall.hand at gmail.com  Wed Aug  9 12:34:48 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Wed Aug  9 12:34:52 2006
Subject: [Paraview] Paraview in Parallel-Server mode
In-Reply-To: <a2ab21560608090931s7f7bc4e4iad6eccfd983f0ecc@mail.gmail.com>
References: <a2ab21560608090855vdad6bcs848c25fb76ab345d@mail.gmail.com>
	<E4C1C0FFED3E6B49AC2C1DA9723BE11E02636227@ES20SNLNT.srn.sandia.gov>
	<b02264720608090925vef8e147uaa9fd0d0b0b5809c@mail.gmail.com>
	<a2ab21560608090931s7f7bc4e4iad6eccfd983f0ecc@mail.gmail.com>
Message-ID: <b02264720608090934w6a51e8fv920eef5f30460ba2@mail.gmail.com>

Yes, CVS as of yesterday & again this morning..

I can't remember 100%, but I believe I also experienced the same glitch in
2.4.4.

On 8/9/06, Berk Geveci <berk.geveci@gmail.com> wrote:
>
>
>
> > I think what I originally percieved as phenomenal slowless is actually a
> > bug.  I use 4x Subsampling for the interactive rendering, but when I let go
> > it never returns to full resolution, it seems to drop to something like 2x
> > subsampling.  I originally interpreted that as it's slowly rendering in the
> > background, but if I use no subsampling for the interactive displays then it
> > works just fine.  (I just ran this test a few minutes ago).
> >
>
>
> Is this a CVS (2.5) ParaView?  This is a known bug (by me and Ken
> Moreland, I think :-) ) that was introduced since 2.4 and will be fixed in
> 2.6. The bug tracker id is 3416.
>
> -Berk
>
>
>
>


-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/2b72a08d/attachment.html
From randall.hand at gmail.com  Wed Aug  9 15:46:20 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Wed Aug  9 15:46:27 2006
Subject: [Paraview] Paraview client-Server
Message-ID: <b02264720608091246g5290324ck5dae255ebffe8c99@mail.gmail.com>

On our cluster, only the head node has true internet connectivity.  The
remaining cluster nodes are on an internal network with no visibility except
to each other & the head node.

In this configuration, is there any way to run Paraview in Parallel-server
mode to a client anywhere other than the head node?  I would presume that
there would need to be some kind of Relay on the head node to make this
happen.

This came up a few months ago with kitware, but I'm kinda curious if anyone
else out there has a different solution (/poke Bryan, Kenneth, *@doe :) ).

-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/78dae54c/attachment.htm
From bnwylie at sandia.gov  Wed Aug  9 15:54:31 2006
From: bnwylie at sandia.gov (Wylie, Brian)
Date: Wed Aug  9 15:54:43 2006
Subject: [Paraview] Paraview client-Server
In-Reply-To: <b02264720608091246g5290324ck5dae255ebffe8c99@mail.gmail.com>
Message-ID: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>

Sandia uses reverse connect on all of our cluster deployments.
 
Even though you can't 'see' the cluster nodes from outside you can often
'see' the outside from a cluster node. 
 
If the cluster node cannot ping an external ip, than perhaps install NAT
on the cluster?  (I'm a bit out of my area here.... but that's what our
administrators have done if there was an issue).
 
If you want I can forward your email to our cluster folks....

  Brian Wylie - Org 1424
  Sandia National Laboratories
  MS 0822 - Building 880/A1-J
  (505)844-2238 FAX(505)845-0833                      



 


________________________________

	From: paraview-bounces+bnwylie=sandia.gov@paraview.org
[mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org] On Behalf Of
Randall Hand
	Sent: Wednesday, August 09, 2006 1:46 PM
	To: Paraview List
	Subject: [Paraview] Paraview client-Server
	
	
	On our cluster, only the head node has true internet
connectivity.  The remaining cluster nodes are on an internal network
with no visibility except to each other & the head node.
	
	In this configuration, is there any way to run Paraview in
Parallel-server mode to a client anywhere other than the head node?  I
would presume that there would need to be some kind of Relay on the head
node to make this happen.  
	
	This came up a few months ago with kitware, but I'm kinda
curious if anyone else out there has a different solution (/poke Bryan,
Kenneth, *@doe :) ).
	
	-- 
	---------------------------------------- 
	Randall Hand
	Visualization Scientist
	ERDC MSRC-ITL 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060809/099cf868/attachment.html
From biddisco at cscs.ch  Thu Aug 10 03:44:46 2006
From: biddisco at cscs.ch (John Biddiscombe)
Date: Thu Aug 10 03:44:55 2006
Subject: [Paraview] How to Average Transient Data
In-Reply-To: <35BD5BC16C30D06AEFB99214@harpo.psc.edu>
References: <35BD5BC16C30D06AEFB99214@harpo.psc.edu>
Message-ID: <44DAE3EE.4040205@cscs.ch>

Kent

I have got a vtkTemporalInterpolationFilter which is the first class in 
what I hope will become a new pipeline model. It maintains a cache of 
datasets each of which corresponds to a timestep of the data. It could 
be simply modified to make it a vtkTemporalAveragingFilter which would 
do what you want.

I've made some changes to the executives to support the temporal 
requests - but am still only half finished and would like to spend 
another couple of weeks on it before I put it on our public svn server. 
Can you wait that long? (also If you have specific requests above your 
initial email, then please ask)

The basic idea is that any Reader (or pipeline section) that is Time 
enabled (currently my NetCDF, HDF5-Particle), plus Ensight, Exodus, vtk 
xml I think(others?) will provide a requested timestep from the 
available timesteps on disk/file. The TemporalPipeline manages the 
RequestInformation and RequestData, RequestXXX phases by looping the 
upstream pipeline and placing the data in a cache. The algorithm that 
subclasses the TemporalPipeline can request TimeStep N (or more 
preferably for example TIME_VALUE T=4.6), the pipeline will then loop 
and fetch datasets from T=4, T=5 and produce an interpolated dataset 
coresponding to T=4.6. The algorithm can request a timestep and let the 
cache return it, generate it, or fetch it if not present. When a 
timestep is requested which does not use any cache'd datasets, the 
cache'd ones are dropped (could be modified to use a better algorithm 
here such as MRU N datasets).

In the case of the TemporalAveragingFilter, you would override the 
Algorithm to do an average instead of an interpolation, and also specify 
how many datasets you need for each timestep. Averaging by 2,3,4....N 
would require only one parameter change.

I will experiment by implementing the averaging algorithm.

One catch. The whole process is going to be unstable if the datasets 
change geometry between timesteps. Currently, I can average all the 
scalars and points, if they are invariant under the number present in 
each timestep. If they change betweeen steps, then we are in trouble.

I will keep you informed of progress and send code as soon as I'm 
confident that all is working stably.

JB

From andy.cedilnik at kitware.com  Thu Aug 10 09:20:10 2006
From: andy.cedilnik at kitware.com (Andy Cedilnik)
Date: Thu Aug 10 09:20:13 2006
Subject: [Paraview] Paraview client-Server
In-Reply-To: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>
References: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>
Message-ID: <44DB328A.8000600@kitware.com>

Hello,

Actually, as far as I remember there is no need for connectivity from 
satellite nodes. I am pretty sure Randal's setup does not use NAT, so 
there is no way his satellite nodes can access Internet. Randal, this is 
the tile cluster?

But, again, I see no reason for satellite nodes to access client. They 
will try to access render server nodes if you do render/data server 
separation.

          Andy

Wylie, Brian wrote:
> Sandia uses reverse connect on all of our cluster deployments.
>  
> Even though you can't 'see' the cluster nodes from outside you can 
> often 'see' the outside from a cluster node.
>  
> If the cluster node cannot ping an external ip, than perhaps install 
> NAT on the cluster?  (I'm a bit out of my area here.... but that's 
> what our administrators have done if there was an issue).
>  
> If you want I can forward your email to our cluster folks....
>
>   Brian Wylie - Org 1424
>   Sandia National Laboratories
>   MS 0822 - Building 880/A1-J
>   (505)844-2238 FAX(505)845-0833                      
>
>  
>
>     ------------------------------------------------------------------------
>     *From:* paraview-bounces+bnwylie=sandia.gov@paraview.org
>     [mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org] *On
>     Behalf Of *Randall Hand
>     *Sent:* Wednesday, August 09, 2006 1:46 PM
>     *To:* Paraview List
>     *Subject:* [Paraview] Paraview client-Server
>
>     On our cluster, only the head node has true internet
>     connectivity.  The remaining cluster nodes are on an internal
>     network with no visibility except to each other & the head node.
>
>     In this configuration, is there any way to run Paraview in
>     Parallel-server mode to a client anywhere other than the head
>     node?  I would presume that there would need to be some kind of
>     Relay on the head node to make this happen. 
>
>     This came up a few months ago with kitware, but I'm kinda curious
>     if anyone else out there has a different solution (/poke Bryan,
>     Kenneth, *@doe :) ).
>
>     -- 
>     ----------------------------------------
>     Randall Hand
>     Visualization Scientist
>     ERDC MSRC-ITL 
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>   

From randall.hand at gmail.com  Thu Aug 10 12:05:39 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Thu Aug 10 12:05:43 2006
Subject: [Paraview] Paraview client-Server
In-Reply-To: <44DB328A.8000600@kitware.com>
References: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>
	<44DB328A.8000600@kitware.com>
Message-ID: <b02264720608100905le90a644y7fd06fa30d3ba5a0@mail.gmail.com>

This, this is the tile cluster (plasma).

We brought it up with our admins onsite, and they dont' think that setting
up NAT would be any big problem, so they're looking into it now.  What we
want to do is use the IceTDesktop render mode to parallel process across our
12 nodes with the display piped to a client (probably windows) that's not
part of the cluster.  It was my understanding (and experience) that in this
setup (mpirun -np 12 pvserver -rc) that each pvserver process will want an
independent connection to the Client, which would require full network
connectivity if it's any host other than the head node.

AM I mistaken?

On 8/10/06, Andy Cedilnik <andy.cedilnik@kitware.com> wrote:
>
> Hello,
>
> Actually, as far as I remember there is no need for connectivity from
> satellite nodes. I am pretty sure Randal's setup does not use NAT, so
> there is no way his satellite nodes can access Internet. Randal, this is
> the tile cluster?
>
> But, again, I see no reason for satellite nodes to access client. They
> will try to access render server nodes if you do render/data server
> separation.
>
>           Andy
>
> Wylie, Brian wrote:
> > Sandia uses reverse connect on all of our cluster deployments.
> >
> > Even though you can't 'see' the cluster nodes from outside you can
> > often 'see' the outside from a cluster node.
> >
> > If the cluster node cannot ping an external ip, than perhaps install
> > NAT on the cluster?  (I'm a bit out of my area here.... but that's
> > what our administrators have done if there was an issue).
> >
> > If you want I can forward your email to our cluster folks....
> >
> >   Brian Wylie - Org 1424
> >   Sandia National Laboratories
> >   MS 0822 - Building 880/A1-J
> >   (505)844-2238 FAX(505)845-0833
> >
> >
> >
> >
> ------------------------------------------------------------------------
> >     *From:* paraview-bounces+bnwylie=sandia.gov@paraview.org
> >     [mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org] *On
> >     Behalf Of *Randall Hand
> >     *Sent:* Wednesday, August 09, 2006 1:46 PM
> >     *To:* Paraview List
> >     *Subject:* [Paraview] Paraview client-Server
> >
> >     On our cluster, only the head node has true internet
> >     connectivity.  The remaining cluster nodes are on an internal
> >     network with no visibility except to each other & the head node.
> >
> >     In this configuration, is there any way to run Paraview in
> >     Parallel-server mode to a client anywhere other than the head
> >     node?  I would presume that there would need to be some kind of
> >     Relay on the head node to make this happen.
> >
> >     This came up a few months ago with kitware, but I'm kinda curious
> >     if anyone else out there has a different solution (/poke Bryan,
> >     Kenneth, *@doe :) ).
> >
> >     --
> >     ----------------------------------------
> >     Randall Hand
> >     Visualization Scientist
> >     ERDC MSRC-ITL
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > ParaView mailing list
> > ParaView@paraview.org
> > http://www.paraview.org/mailman/listinfo/paraview
> >
>
>


-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060810/78259862/attachment.htm
From andy.cedilnik at kitware.com  Thu Aug 10 12:44:54 2006
From: andy.cedilnik at kitware.com (Andy Cedilnik)
Date: Thu Aug 10 12:45:05 2006
Subject: [Paraview] Paraview client-Server
In-Reply-To: <b02264720608100905le90a644y7fd06fa30d3ba5a0@mail.gmail.com>
References: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>	<44DB328A.8000600@kitware.com>
	<b02264720608100905le90a644y7fd06fa30d3ba5a0@mail.gmail.com>
Message-ID: <44DB6286.8010205@kitware.com>

Hello,

I still think you can do it without NAT. Make sure you have first node 
running on the node that has access to the network.

I mean this worked when I was there...

       Andy

Randall Hand wrote:
> This, this is the tile cluster (plasma).
>
> We brought it up with our admins onsite, and they dont' think that 
> setting up NAT would be any big problem, so they're looking into it 
> now.  What we want to do is use the IceTDesktop render mode to 
> parallel process across our 12 nodes with the display piped to a 
> client (probably windows) that's not part of the cluster.  It was my 
> understanding (and experience) that in this setup (mpirun -np 12 
> pvserver -rc) that each pvserver process will want an independent 
> connection to the Client, which would require full network 
> connectivity if it's any host other than the head node.
>
> AM I mistaken?
>
> On 8/10/06, *Andy Cedilnik* <andy.cedilnik@kitware.com 
> <mailto:andy.cedilnik@kitware.com>> wrote:
>
>     Hello,
>
>     Actually, as far as I remember there is no need for connectivity from
>     satellite nodes. I am pretty sure Randal's setup does not use NAT, so
>     there is no way his satellite nodes can access Internet. Randal,
>     this is
>     the tile cluster?
>
>     But, again, I see no reason for satellite nodes to access client. They
>     will try to access render server nodes if you do render/data server
>     separation.
>
>               Andy
>
>     Wylie, Brian wrote:
>     > Sandia uses reverse connect on all of our cluster deployments.
>     >
>     > Even though you can't 'see' the cluster nodes from outside you can
>     > often 'see' the outside from a cluster node.
>     >
>     > If the cluster node cannot ping an external ip, than perhaps
>     install
>     > NAT on the cluster?  (I'm a bit out of my area here.... but that's
>     > what our administrators have done if there was an issue).
>     >
>     > If you want I can forward your email to our cluster folks....
>     >
>     >   Brian Wylie - Org 1424
>     >   Sandia National Laboratories
>     >   MS 0822 - Building 880/A1-J
>     >   (505)844-2238 FAX(505)845-0833
>     >
>     >
>     >
>     >    
>     ------------------------------------------------------------------------
>
>     >     *From:* paraview-bounces+bnwylie=sandia.gov@paraview.org
>     <mailto:sandia.gov@paraview.org>
>     >     [mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org
>     <mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org>] *On
>     >     Behalf Of *Randall Hand
>     >     *Sent:* Wednesday, August 09, 2006 1:46 PM
>     >     *To:* Paraview List
>     >     *Subject:* [Paraview] Paraview client-Server
>     >
>     >     On our cluster, only the head node has true internet
>     >     connectivity.  The remaining cluster nodes are on an internal
>     >     network with no visibility except to each other & the head node.
>     >
>     >     In this configuration, is there any way to run Paraview in
>     >     Parallel-server mode to a client anywhere other than the head
>     >     node?  I would presume that there would need to be some kind of
>     >     Relay on the head node to make this happen.
>     >
>     >     This came up a few months ago with kitware, but I'm kinda
>     curious
>     >     if anyone else out there has a different solution (/poke Bryan,
>     >     Kenneth, *@doe :) ).
>     >
>     >     --
>     >     ----------------------------------------
>     >     Randall Hand
>     >     Visualization Scientist
>     >     ERDC MSRC-ITL
>     >
>     >
>     ------------------------------------------------------------------------
>     >
>     > _______________________________________________
>     > ParaView mailing list
>     > ParaView@paraview.org <mailto:ParaView@paraview.org>
>     > http://www.paraview.org/mailman/listinfo/paraview
>     >
>
>
>
>
> -- 
> ----------------------------------------
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
> ------------------------------------------------------------------------
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>   

From berk.geveci at gmail.com  Thu Aug 10 13:10:04 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Thu Aug 10 13:10:08 2006
Subject: [Paraview] Paraview client-Server
In-Reply-To: <b02264720608100905le90a644y7fd06fa30d3ba5a0@mail.gmail.com>
References: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>
	<44DB328A.8000600@kitware.com>
	<b02264720608100905le90a644y7fd06fa30d3ba5a0@mail.gmail.com>
Message-ID: <a2ab21560608101010y6e294332vf0184df8188890e9@mail.gmail.com>

Only the first node has to be connected to the client. They talk to each
other with MPI.

On 8/10/06, Randall Hand <randall.hand@gmail.com> wrote:
>
> This, this is the tile cluster (plasma).
>
> We brought it up with our admins onsite, and they dont' think that setting
> up NAT would be any big problem, so they're looking into it now.  What we
> want to do is use the IceTDesktop render mode to parallel process across our
> 12 nodes with the display piped to a client (probably windows) that's not
> part of the cluster.  It was my understanding (and experience) that in this
> setup (mpirun -np 12 pvserver -rc) that each pvserver process will want an
> independent connection to the Client, which would require full network
> connectivity if it's any host other than the head node.
>
> AM I mistaken?
>
>
> On 8/10/06, Andy Cedilnik <andy.cedilnik@kitware.com> wrote:
> >
> > Hello,
> >
> > Actually, as far as I remember there is no need for connectivity from
> > satellite nodes. I am pretty sure Randal's setup does not use NAT, so
> > there is no way his satellite nodes can access Internet. Randal, this is
> >
> > the tile cluster?
> >
> > But, again, I see no reason for satellite nodes to access client. They
> > will try to access render server nodes if you do render/data server
> > separation.
> >
> >           Andy
> >
> > Wylie, Brian wrote:
> > > Sandia uses reverse connect on all of our cluster deployments.
> > >
> > > Even though you can't 'see' the cluster nodes from outside you can
> > > often 'see' the outside from a cluster node.
> > >
> > > If the cluster node cannot ping an external ip, than perhaps install
> > > NAT on the cluster?  (I'm a bit out of my area here.... but that's
> > > what our administrators have done if there was an issue).
> > >
> > > If you want I can forward your email to our cluster folks....
> > >
> > >   Brian Wylie - Org 1424
> > >   Sandia National Laboratories
> > >   MS 0822 - Building 880/A1-J
> > >   (505)844-2238 FAX(505)845-0833
> > >
> > >
> > >
> > >
> > ------------------------------------------------------------------------
> > >     *From:* paraview-bounces+bnwylie=sandia.gov@paraview.org
> > >     [mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org ] *On
> > >     Behalf Of *Randall Hand
> > >     *Sent:* Wednesday, August 09, 2006 1:46 PM
> > >     *To:* Paraview List
> > >     *Subject:* [Paraview] Paraview client-Server
> > >
> > >     On our cluster, only the head node has true internet
> > >     connectivity.  The remaining cluster nodes are on an internal
> > >     network with no visibility except to each other & the head node.
> > >
> > >     In this configuration, is there any way to run Paraview in
> > >     Parallel-server mode to a client anywhere other than the head
> > >     node?  I would presume that there would need to be some kind of
> > >     Relay on the head node to make this happen.
> > >
> > >     This came up a few months ago with kitware, but I'm kinda curious
> > >     if anyone else out there has a different solution (/poke Bryan,
> > >     Kenneth, *@doe :) ).
> > >
> > >     --
> > >     ----------------------------------------
> > >     Randall Hand
> > >     Visualization Scientist
> > >     ERDC MSRC-ITL
> > >
> > >
> > ------------------------------------------------------------------------
> > >
> > > _______________________________________________
> > > ParaView mailing list
> > > ParaView@paraview.org
> > > http://www.paraview.org/mailman/listinfo/paraview
> > >
> >
> >
>
>
> --
> ----------------------------------------
>
> Randall Hand
> Visualization Scientist
> ERDC MSRC-ITL
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060810/e0f6aaa1/attachment.htm
From randall.hand at gmail.com  Thu Aug 10 13:24:08 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Thu Aug 10 13:24:11 2006
Subject: [Paraview] Paraview client-Server
In-Reply-To: <a2ab21560608101010y6e294332vf0184df8188890e9@mail.gmail.com>
References: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>
	<44DB328A.8000600@kitware.com>
	<b02264720608100905le90a644y7fd06fa30d3ba5a0@mail.gmail.com>
	<a2ab21560608101010y6e294332vf0184df8188890e9@mail.gmail.com>
Message-ID: <b02264720608101024l3042aee7odeca6b491524b7be@mail.gmail.com>

hrm... I added the headnode to the hostfile (first line), and upped my
scripts to do -np13 instead of -np12.. so now I run

mpirun -np 13 --hostfile ib_all ./pvserver -rc -ch=rhand-svc
--render-module=IceTDesktopRenderModule

The client is waiting on rhand-svc for an incoming connection.. But I
immediately get the following error on the headnode:

/d1/Randall/ParaView-CVS/Servers/Common/vtkClientConnection.cxx, line 334
vtkClientConnection (0x2e67ed0): Failed to get correct ID to assign to this
connection.

Connected to client
Client connection closed.

Any hints?

On 8/10/06, Berk Geveci <berk.geveci@gmail.com> wrote:
>
> Only the first node has to be connected to the client. They talk to each
> other with MPI.
>
>
> On 8/10/06, Randall Hand < randall.hand@gmail.com> wrote:
> >
> > This, this is the tile cluster (plasma).
> >
> > We brought it up with our admins onsite, and they dont' think that
> > setting up NAT would be any big problem, so they're looking into it now.
> > What we want to do is use the IceTDesktop render mode to parallel process
> > across our 12 nodes with the display piped to a client (probably windows)
> > that's not part of the cluster.  It was my understanding (and experience)
> > that in this setup (mpirun -np 12 pvserver -rc) that each pvserver process
> > will want an independent connection to the Client, which would require full
> > network connectivity if it's any host other than the head node.
> >
> > AM I mistaken?
> >
> >
> > On 8/10/06, Andy Cedilnik < andy.cedilnik@kitware.com> wrote:
> > >
> > > Hello,
> > >
> > > Actually, as far as I remember there is no need for connectivity from
> > > satellite nodes. I am pretty sure Randal's setup does not use NAT, so
> > > there is no way his satellite nodes can access Internet. Randal, this
> > > is
> > > the tile cluster?
> > >
> > > But, again, I see no reason for satellite nodes to access client. They
> > > will try to access render server nodes if you do render/data server
> > > separation.
> > >
> > >           Andy
> > >
> > > Wylie, Brian wrote:
> > > > Sandia uses reverse connect on all of our cluster deployments.
> > > >
> > > > Even though you can't 'see' the cluster nodes from outside you can
> > > > often 'see' the outside from a cluster node.
> > > >
> > > > If the cluster node cannot ping an external ip, than perhaps install
> > >
> > > > NAT on the cluster?  (I'm a bit out of my area here.... but that's
> > > > what our administrators have done if there was an issue).
> > > >
> > > > If you want I can forward your email to our cluster folks....
> > > >
> > > >   Brian Wylie - Org 1424
> > > >   Sandia National Laboratories
> > > >   MS 0822 - Building 880/A1-J
> > > >   (505)844-2238 FAX(505)845-0833
> > > >
> > > >
> > > >
> > > >
> > > ------------------------------------------------------------------------
> > > >     *From:* paraview-bounces+bnwylie=sandia.gov@paraview.org
> > > >     [mailto: paraview-bounces+bnwylie=sandia.gov@paraview.org ] *On
> > > >     Behalf Of *Randall Hand
> > > >     *Sent:* Wednesday, August 09, 2006 1:46 PM
> > > >     *To:* Paraview List
> > > >     *Subject:* [Paraview] Paraview client-Server
> > > >
> > > >     On our cluster, only the head node has true internet
> > > >     connectivity.  The remaining cluster nodes are on an internal
> > > >     network with no visibility except to each other & the head node.
> > > >
> > > >     In this configuration, is there any way to run Paraview in
> > > >     Parallel-server mode to a client anywhere other than the head
> > > >     node?  I would presume that there would need to be some kind of
> > > >     Relay on the head node to make this happen.
> > > >
> > > >     This came up a few months ago with kitware, but I'm kinda
> > > curious
> > > >     if anyone else out there has a different solution (/poke Bryan,
> > > >     Kenneth, *@doe :) ).
> > > >
> > > >     --
> > > >     ----------------------------------------
> > > >     Randall Hand
> > > >     Visualization Scientist
> > > >     ERDC MSRC-ITL
> > > >
> > > >
> > > ------------------------------------------------------------------------
> > > >
> > > > _______________________________________________
> > > > ParaView mailing list
> > > > ParaView@paraview.org
> > > > http://www.paraview.org/mailman/listinfo/paraview
> > > >
> > >
> > >
> >
> >
> > --
> > ----------------------------------------
> >
> > Randall Hand
> > Visualization Scientist
> > ERDC MSRC-ITL
> >
> > _______________________________________________
> > ParaView mailing list
> > ParaView@paraview.org
> > http://www.paraview.org/mailman/listinfo/paraview
> >
> >
> >
>


-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060810/c18b4225/attachment-0001.html
From jsg3 at psu.edu  Thu Aug 10 13:31:23 2006
From: jsg3 at psu.edu (Jack Gundrum)
Date: Thu Aug 10 13:29:59 2006
Subject: [Paraview] visible human data set
Message-ID: <44DB6D6B.5020101@psu.edu>

Hi,
Does anyone have experience loading the rather large 40 gig visible 
human data set into paraview? I am looking for a large data set
to show off paraview on a Rave ( 8 ft. stereo screen) running from our 
interactive cluster.

The examples on the website are xxxx.raw format which load with the raw 
binary reader but dont look human:)
From seanzig.ctr at navo.hpc.mil  Thu Aug 10 13:31:17 2006
From: seanzig.ctr at navo.hpc.mil (Sean Ziegeler, Contractor)
Date: Thu Aug 10 13:31:25 2006
Subject: [Paraview] Paraview client-Server
In-Reply-To: <a2ab21560608101010y6e294332vf0184df8188890e9@mail.gmail.com>
References: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>
	<44DB328A.8000600@kitware.com>
	<b02264720608100905le90a644y7fd06fa30d3ba5a0@mail.gmail.com>
	<a2ab21560608101010y6e294332vf0184df8188890e9@mail.gmail.com>
Message-ID: <1155231077.3489.398.camel@infinity.navo.hpc.mil>

Randall,
As you probably know, our configuration is very similar to yours in that
only the head node(s) have external access.  We routinely use
client/server mode successfully in conjunction with parallel
processing.  As stated by others, you simply have to force the first
rank (#0) MPI process to run on a head node.  If that is your only
concern, you should be ok.

The difference, however, is that we are using MPIRenderModule (we aren't
tiling the display).  You'll want to be sure IceTDesktop doesn't
deviate, but from the other responses on the list, I'm guessing not.

-Sean

On Thu, 2006-08-10 at 12:10, Berk Geveci wrote:
> Only the first node has to be connected to the client. They talk to
> each other with MPI.
> 
> On 8/10/06, Randall Hand <randall.hand@gmail.com> wrote:
>         This, this is the tile cluster (plasma).
>         
>         We brought it up with our admins onsite, and they dont' think
>         that setting up NAT would be any big problem, so they're
>         looking into it now.  What we want to do is use the
>         IceTDesktop render mode to parallel process across our 12
>         nodes with the display piped to a client (probably windows)
>         that's not part of the cluster.  It was my understanding (and
>         experience) that in this setup (mpirun -np 12 pvserver -rc)
>         that each pvserver process will want an independent connection
>         to the Client, which would require full network connectivity
>         if it's any host other than the head node. 
>         
>         AM I mistaken?
>         
>         On 8/10/06, Andy Cedilnik <andy.cedilnik@kitware.com> wrote:
>                 Hello,
>                 
>                 Actually, as far as I remember there is no need for
>                 connectivity from
>                 satellite nodes. I am pretty sure Randal's setup does
>                 not use NAT, so
>                 there is no way his satellite nodes can access
>                 Internet. Randal, this is 
>                 the tile cluster?
>                 
>                 But, again, I see no reason for satellite nodes to
>                 access client. They
>                 will try to access render server nodes if you do
>                 render/data server
>                 separation.
>                 
>                           Andy
>                 
>                 Wylie, Brian wrote: 
>                 > Sandia uses reverse connect on all of our cluster
>                 deployments.
>                 >
>                 > Even though you can't 'see' the cluster nodes from
>                 outside you can
>                 > often 'see' the outside from a cluster node.
>                 >
>                 > If the cluster node cannot ping an external ip, than
>                 perhaps install 
>                 > NAT on the cluster?  (I'm a bit out of my area
>                 here.... but that's
>                 > what our administrators have done if there was an
>                 issue).
>                 >
>                 > If you want I can forward your email to our cluster
>                 folks....
>                 >
>                 >   Brian Wylie - Org 1424
>                 >   Sandia National Laboratories
>                 >   MS 0822 - Building 880/A1-J
>                 >   (505)844-2238 FAX(505)845-0833
>                 >
>                 >
>                 >
>                 >    
>                 ------------------------------------------------------------------------ 
>                 >     *From:*
>                 paraview-bounces+bnwylie=sandia.gov@paraview.org
>                 >    
>                 [mailto:paraview-bounces+bnwylie=sandia.gov@paraview.org] *On
>                 >     Behalf Of *Randall Hand
>                 >     *Sent:* Wednesday, August 09, 2006 1:46 PM
>                 >     *To:* Paraview List
>                 >     *Subject:* [Paraview] Paraview client-Server
>                 >
>                 >     On our cluster, only the head node has true
>                 internet 
>                 >     connectivity.  The remaining cluster nodes are
>                 on an internal
>                 >     network with no visibility except to each other
>                 & the head node.
>                 >
>                 >     In this configuration, is there any way to run
>                 Paraview in 
>                 >     Parallel-server mode to a client anywhere other
>                 than the head
>                 >     node?  I would presume that there would need to
>                 be some kind of
>                 >     Relay on the head node to make this happen.
>                 >
>                 >     This came up a few months ago with kitware, but
>                 I'm kinda curious 
>                 >     if anyone else out there has a different
>                 solution (/poke Bryan,
>                 >     Kenneth, *@doe :) ).
>                 >
>                 >     --
>                 >     ----------------------------------------
>                 >     Randall Hand
>                 >     Visualization Scientist 
>                 >     ERDC MSRC-ITL
>                 >
>                 >
>                 ------------------------------------------------------------------------
>                 >
>                 > _______________________________________________
>                 > ParaView mailing list
>                 > ParaView@paraview.org
>                 > http://www.paraview.org/mailman/listinfo/paraview
>                 >
>                 
>         
>         
>         
>         
>         -- 
>         ----------------------------------------
>         Randall Hand
>         Visualization Scientist
>         ERDC MSRC-ITL
>         _______________________________________________
>         ParaView mailing list
>         ParaView@paraview.org
>         http://www.paraview.org/mailman/listinfo/paraview
>         
>         
> 
> 
> 
> ______________________________________________________________________
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview

From randall.hand at gmail.com  Fri Aug 11 10:06:39 2006
From: randall.hand at gmail.com (Randall Hand)
Date: Fri Aug 11 10:06:43 2006
Subject: [Paraview] Paraview client-Server
In-Reply-To: <1155231077.3489.398.camel@infinity.navo.hpc.mil>
References: <E4C1C0FFED3E6B49AC2C1DA9723BE11E02636319@ES20SNLNT.srn.sandia.gov>
	<44DB328A.8000600@kitware.com>
	<b02264720608100905le90a644y7fd06fa30d3ba5a0@mail.gmail.com>
	<a2ab21560608101010y6e294332vf0184df8188890e9@mail.gmail.com>
	<1155231077.3489.398.camel@infinity.navo.hpc.mil>
Message-ID: <b02264720608110706v42fecee3t794d0e2d37ff0a4e@mail.gmail.com>

well, in this case we're not tiling it Either..

Upon some further digging, it looks like it was just a Version Mismatch
problem.  (Probably should add a check for that at startup).  I was running
CVS on the cluster, and 2.4.4 on the client.  using 2.4.4 on both works
beautifully.

now for the next question :)  PV_USE_TRANSMIT - Does that still work?

I have a file that only exists on the head node (process 0), but when I try
to open it (with PV_USE_TRANSMIT set to 1 on all nodes) I get errors about
"unable to open PLY file" on all the processors and it seems to lock.

On 8/10/06, Sean Ziegeler, Contractor <seanzig.ctr@navo.hpc.mil> wrote:
>
> Randall,
> As you probably know, our configuration is very similar to yours in that
> only the head node(s) have external access.  We routinely use
> client/server mode successfully in conjunction with parallel
> processing.  As stated by others, you simply have to force the first
> rank (#0) MPI process to run on a head node.  If that is your only
> concern, you should be ok.
>
> The difference, however, is that we are using MPIRenderModule (we aren't
> tiling the display).  You'll want to be sure IceTDesktop doesn't
> deviate, but from the other responses on the list, I'm guessing not.
>
> -Sean
>
> On Thu, 2006-08-10 at 12:10, Berk Geveci wrote:
> > Only the first node has to be connected to the client. They talk to
> > each other with MPI.
> >
> > On 8/10/06, Randall Hand <randall.hand@gmail.com> wrote:
> >         This, this is the tile cluster (plasma).
> >
> >         We brought it up with our admins onsite, and they dont' think
> >         that setting up NAT would be any big problem, so they're
> >         looking into it now.  What we want to do is use the
> >         IceTDesktop render mode to parallel process across our 12
> >         nodes with the display piped to a client (probably windows)
> >         that's not part of the cluster.  It was my understanding (and
> >         experience) that in this setup (mpirun -np 12 pvserver -rc)
> >         that each pvserver process will want an independent connection
> >         to the Client, which would require full network connectivity
> >         if it's any host other than the head node.
> >
> >         AM I mistaken?
> >
> >         On 8/10/06, Andy Cedilnik < andy.cedilnik@kitware.com> wrote:
> >                 Hello,
> >
> >                 Actually, as far as I remember there is no need for
> >                 connectivity from
> >                 satellite nodes. I am pretty sure Randal's setup does
> >                 not use NAT, so
> >                 there is no way his satellite nodes can access
> >                 Internet. Randal, this is
> >                 the tile cluster?
> >
> >                 But, again, I see no reason for satellite nodes to
> >                 access client. They
> >                 will try to access render server nodes if you do
> >                 render/data server
> >                 separation.
> >
> >                           Andy
> >
> >                 Wylie, Brian wrote:
> >                 > Sandia uses reverse connect on all of our cluster
> >                 deployments.
> >                 >
> >                 > Even though you can't 'see' the cluster nodes from
> >                 outside you can
> >                 > often 'see' the outside from a cluster node.
> >                 >
> >                 > If the cluster node cannot ping an external ip, than
> >                 perhaps install
> >                 > NAT on the cluster?  (I'm a bit out of my area
> >                 here.... but that's
> >                 > what our administrators have done if there was an
> >                 issue).
> >                 >
> >                 > If you want I can forward your email to our cluster
> >                 folks....
> >                 >
> >                 >   Brian Wylie - Org 1424
> >                 >   Sandia National Laboratories
> >                 >   MS 0822 - Building 880/A1-J
> >                 >   (505)844-2238 FAX(505)845-0833
> >                 >
> >                 >
> >                 >
> >                 >
> >
> ------------------------------------------------------------------------
> >                 >     *From:*
> >                 paraview-bounces+bnwylie=sandia.gov@paraview.org
> >                 >
> >                 [mailto:
> paraview-bounces+bnwylie=sandia.gov@paraview.org] *On
> >                 >     Behalf Of *Randall Hand
> >                 >     *Sent:* Wednesday, August 09, 2006 1:46 PM
> >                 >     *To:* Paraview List
> >                 >     *Subject:* [Paraview] Paraview client-Server
> >                 >
> >                 >     On our cluster, only the head node has true
> >                 internet
> >                 >     connectivity.  The remaining cluster nodes are
> >                 on an internal
> >                 >     network with no visibility except to each other
> >                 & the head node.
> >                 >
> >                 >     In this configuration, is there any way to run
> >                 Paraview in
> >                 >     Parallel-server mode to a client anywhere other
> >                 than the head
> >                 >     node?  I would presume that there would need to
> >                 be some kind of
> >                 >     Relay on the head node to make this happen.
> >                 >
> >                 >     This came up a few months ago with kitware, but
> >                 I'm kinda curious
> >                 >     if anyone else out there has a different
> >                 solution (/poke Bryan,
> >                 >     Kenneth, *@doe :) ).
> >                 >
> >                 >     --
> >                 >     ----------------------------------------
> >                 >     Randall Hand
> >                 >     Visualization Scientist
> >                 >     ERDC MSRC-ITL
> >                 >
> >                 >
> >
> ------------------------------------------------------------------------
> >                 >
> >                 > _______________________________________________
> >                 > ParaView mailing list
> >                 > ParaView@paraview.org
> >                 > http://www.paraview.org/mailman/listinfo/paraview
> >                 >
> >
> >
> >
> >
> >
> >         --
> >         ----------------------------------------
> >         Randall Hand
> >         Visualization Scientist
> >         ERDC MSRC-ITL
> >         _______________________________________________
> >         ParaView mailing list
> >         ParaView@paraview.org
> >         http://www.paraview.org/mailman/listinfo/paraview
> >
> >
> >
> >
> >
> > ______________________________________________________________________
> > _______________________________________________
> > ParaView mailing list
> > ParaView@paraview.org
> > http://www.paraview.org/mailman/listinfo/paraview
>
>


-- 
----------------------------------------
Randall Hand
Visualization Scientist
ERDC MSRC-ITL
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060811/54f697e7/attachment-0001.htm
From dcthomp at sandia.gov  Fri Aug 11 16:22:22 2006
From: dcthomp at sandia.gov (David C Thompson)
Date: Fri Aug 11 16:22:32 2006
Subject: [Paraview] Scalar bar range bug
Message-ID: <1155327742.8370.33.camel@beaker.ran.sandia.gov>

Hi all,

I've noticed when I have a point array and a cell array with the same
name that the scalar bar always sets its range to the point array's
range -- even when I am coloring by the cell array. Reset range doesn't
update the range properly, even if I switch to an array of a different
name and then back to the cell array. I've attached a simple example
mesh. This is using a CVS checkout of ParaView from 1-2 days ago. If
anyone can verify this as a bug, I'll be glad to file a bug report.

	David
-------------- next part --------------
# vtk DataFile Version 1.0
Cube example
ASCII

DATASET POLYDATA
POINTS 8 float
0.0 0.0 0.0
1.0 0.0 0.0
1.0 1.0 0.0
0.0 1.0 0.0
0.0 0.0 1.0
1.0 0.0 1.0
1.0 1.0 1.0
0.0 1.0 1.0
POLYGONS 6 30
4 0 1 2 3
4 4 5 6 7
4 0 1 5 4
4 2 3 7 6
4 0 4 7 3
4 1 2 6 5

CELL_DATA 6
SCALARS user_ids int
LOOKUP_TABLE default
0
1
2
3
4
5
NORMALS cell_normals float
0 0 -1
0 0 1
0 -1 0
0 1 0
-1 0 0
1 0 0

POINT_DATA 8
SCALARS user_ids float
LOOKUP_TABLE default
0.0
1.0
2.0
3.0
4.0
5.0
6.0
7.0
From pleramorphyllactic at navigo.com  Fri Aug 11 17:02:03 2006
From: pleramorphyllactic at navigo.com (pleramorphyllactic@navigo.com)
Date: Fri Aug 11 16:52:31 2006
Subject: [Paraview] probe filter
Message-ID: <Pine.LNX.4.58.0608111559310.26978@x.navigo.com>

Sorry, I think this is a simple question, but I am having trouble getting 
the probe filter to access.  I have some data that I generated using open 
foam, and (in case anyone cares or is helpful), i ran Ucomponents on the 
data to get a restirction graph.  Anyway, no matter what I do I seem 
unable to get the probe filter to become available for use on the data.  
Could someone help?

Thanks,
plera
From pleramorphyllactic at navigo.com  Fri Aug 11 17:05:10 2006
From: pleramorphyllactic at navigo.com (pleramorphyllactic@navigo.com)
Date: Fri Aug 11 16:55:38 2006
Subject: [Paraview] Stream tracer
In-Reply-To: <Pine.LNX.4.58.0608111559310.26978@x.navigo.com>
References: <Pine.LNX.4.58.0608111559310.26978@x.navigo.com>
Message-ID: <Pine.LNX.4.58.0608111603140.26978@x.navigo.com>


Hello again, 

I am getting the following error when running the stream tracer filter on 
my data in paraview:

ErrorMessage
# Error or warning: There was a VTK Error in file: 
../../../../../paraview-2.4.2/VTK/Filtering/vtkDemandDrivenPipeline.cxx 
(661)
 vtkCompositeDataPipeline (0x94cf620): Input port 0 of algorithm 
vtkDistributedStreamTracer(0x94bf9e0) has 4 connections but is not 
repeatable.
ErrorMessage end


I tried using the "extract parts" filter, and it did not work.  Is there a 
fix for this?

Thanks again,
plera

From Boettcher at kleintierklinik.uni-leipzig.de  Tue Aug 15 03:02:58 2006
From: Boettcher at kleintierklinik.uni-leipzig.de (Boettcher, Dr. Peter)
Date: Tue Aug 15 03:03:06 2006
Subject: [Paraview] Selecting a 3D-object according to its Region ID
Message-ID: <83FB51056FB3664CB2A09728F5E9187729D8B1@email.ktk.uni-leipzig.de>

I would like to segment a 3D object composed of different small objects. After I apply vtkPVConnectivityFilter I get the 3D-object coloured according to the region IDs. Then I would like to use vtkThresholdFilter to extract one of the region objects aacording to its region ID. However I do not find a way to display the region ID of the desired region object. 

 

Your help would be much appreciated!

 

Regards, Peter.

 
------------------------------------
Peter B?ttcher, Dr med vet, DipECVS
European Veterinary Specialist in Surgery
Fachtierarzt f?r Kleintierchirurgie
Klinik f?r Kleintiere 
Universit?t Leipzig 
An den Tierkliniken 23 
D-04103 Leipzig (Germany)
Tel: +49-341-9738700 
Fax: +49-341-9738799
email: boettcher@kleintierklinik.uni-leipzig.de

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060815/22747fb5/attachment.html
From milan.frank at gmail.com  Tue Aug 15 06:10:36 2006
From: milan.frank at gmail.com (Milan Frank)
Date: Tue Aug 15 06:10:41 2006
Subject: [Paraview] pvpython and LOD
Message-ID: <d3d4ab920608150310n1db97529kefb2421fe152de89@mail.gmail.com>

Hello,

I'm using ParaViews python interface.

I have used:

ren = paraview.createRenderWindow()
d = paraview.createProxy('displays', 'CompositeDisplay')
ren.AddToDisplays(d)

to create a render module and attach a display. I have tried to set
LODTreshold to 0.0 and LODResoution to 160.

Unfortunately, it seems the LOD does not working. Am I missing something?

Any help would be much appreciated,
Milan
From utkarsh.ayachit at kitware.com  Tue Aug 15 09:36:34 2006
From: utkarsh.ayachit at kitware.com (Utkarsh Ayachit)
Date: Tue Aug 15 09:36:13 2006
Subject: [Paraview] pvpython and LOD
In-Reply-To: <d3d4ab920608150310n1db97529kefb2421fe152de89@mail.gmail.com>
References: <d3d4ab920608150310n1db97529kefb2421fe152de89@mail.gmail.com>
Message-ID: <44E1CDE2.4040807@kitware.com>

How are you rendering it? Using vtkSMRenderModule::StillRender() call? 
StillRender() does not use LOD. Use 
vtkSMRenderModule::InteractiveRender() instead.

Utkarsh.

Utkarsh

Milan Frank wrote:
> Hello,
> 
> I'm using ParaViews python interface.
> 
> I have used:
> 
> ren = paraview.createRenderWindow()
> d = paraview.createProxy('displays', 'CompositeDisplay')
> ren.AddToDisplays(d)
> 
> to create a render module and attach a display. I have tried to set
> LODTreshold to 0.0 and LODResoution to 160.
> 
> Unfortunately, it seems the LOD does not working. Am I missing something?
> 
> Any help would be much appreciated,
> Milan
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
> 

From berk.geveci at kitware.com  Tue Aug 15 10:06:55 2006
From: berk.geveci at kitware.com (Berk Geveci)
Date: Tue Aug 15 10:07:00 2006
Subject: [Paraview] Changes to server manager xml format (pvsm)
Message-ID: <44E1D4FF.9000903@kitware.com>

Hi Folks,

I recently made some changes to the server manager that require changes to 
server manager xml filters (pvsm). ParaView has been using the old way of 
connecting objects in the pipeline:

filter->SetInput(source->GetGetOutput());

Although still supported, this way of connecting pipeline objects is no longer 
recommended. The recommended way is:

filter->SetInputConnection(source->GetOutputPort());

I change the paraview engine (server manager) to use the recommended the way. 
This has two impacts:

1. You have to change your server manager configuration files (pvsm). Input 
properties that use SetInput, AddInput, SetSource etc. should be changed to use 
SetInputConnection, AddInputConnection, SetSourceConnection etc. If you have 
sources or filters that sub-class from one of the legacy classes (vtkSource, 
vtkPolyDataSource, vtkPolyDataToPolyDataFilter etc.), you should convert it to 
the new pipeline (sub-class from vtkAlgorithm, vtkPolyDataAlgorithm etc.).

2. vtkSMPart no longer keeps a reference to the data object (it is not a proxy 
of the output). To get a proxy to the data object, use 
vtkSMPart::GetDataObjectProxy(). Please make sure to read the documentation 
before using.

Please make sure that you update your modules.

I have been working on multi-block and AMR support and this will cause other 
changes as well. I will keep you updated.

-Berk
From berk.geveci at kitware.com  Tue Aug 15 10:39:58 2006
From: berk.geveci at kitware.com (Berk Geveci)
Date: Tue Aug 15 10:40:52 2006
Subject: [Paraview] Changes to server manager xml format (pvsm)
In-Reply-To: <616F2D59D226E2BED48DD9A9@harpo.psc.edu>
References: <44E1D4FF.9000903@kitware.com>
	<616F2D59D226E2BED48DD9A9@harpo.psc.edu>
Message-ID: <44E1DCBE.8040708@kitware.com>

Oops. I forgot to mention that I made the changes to ParaView CVS. If you are 
working on 2.4.X, you don't have to (and should not) change anything. You have 
to change your pvsm files if you are moving to CVS or eventually to 2.6 (or 3.0 
September snapshot).

-Berk

From Thomas.Chyczewski at ngc.com  Tue Aug 15 14:43:10 2006
From: Thomas.Chyczewski at ngc.com (Chyczewski, Thomas)
Date: Tue Aug 15 14:43:18 2006
Subject: [Paraview] Getting started
Message-ID: <6F4D9B093B96EB49BE874536152F4B3B06E2EF@xcgny106.northgrum.com>


I would like to give Paraview a try but am having trouble building an
executable. Is there an archive somewhere that contains more information
than that given in Install link of paraview.org?

In case someone on this list can help, here is my problem:

I have an SGI running IRIX 6.5. I downloaded ccmake 2.4.3 and paraview
2.4.4. I installed cmake, untarred paraview, created the directory
./paraview-2.4.4-irix, created the environmental variables pointing to
my c and c++ compilers and executed "ccmake ../paraview-2.4.4" in that
directory. After a little while, I get the error message stating that it
cannot find
paraview-2.4.4/GUI/Widgets/Examples/Cxx/SimpleWindowWithImageWidget/vtkK
WSimpleWindowWithImageWidgetExample.h plus 4 other files similar files.
As I doubt that I have uncovered an ommision in the distribution file, I
believe I am missing something. Can anyone help me out?

I also tried to build paraview 2.2.1. In this case, I was able to get
through ccmake, but the compilation failed because in
vtkThreadedController.h,  "pid_t" is undefined. Any suggestions?

Tom
From yildirimga at gmail.com  Tue Aug 15 14:55:55 2006
From: yildirimga at gmail.com (Battalgazi YILDIRIM)
Date: Tue Aug 15 14:56:00 2006
Subject: [Paraview] save animation
Message-ID: <3ce943600608151155m7eff3651xdd927755cfd140da@mail.gmail.com>

Hi,

I made simple movies (which was working quite well in paraview display
screen),
 and then want to save animation as mpg file. I saved it as mpg file  and
tried to
 play mpg file but it didn't work (I tried this movie file on windows and
linux). However,
 if I choose jpg, it automatically create  succesive (and working) jpg files
for each frame.

did anyone have the similiar problem?


thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060815/403e5af7/attachment.html
From berk.geveci at gmail.com  Tue Aug 15 15:18:11 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Tue Aug 15 15:18:14 2006
Subject: [Paraview] Getting started
In-Reply-To: <6F4D9B093B96EB49BE874536152F4B3B06E2EF@xcgny106.northgrum.com>
References: <6F4D9B093B96EB49BE874536152F4B3B06E2EF@xcgny106.northgrum.com>
Message-ID: <a2ab21560608151218o2b57ccc1u2f5c8f65ed9d8f4d@mail.gmail.com>

Can you post the exact errors you are getting as well as the
CMakeCache.txtfrom your build tree. If your message is rejected
because of it's size,
don't worry. I will make sure it goes through.

-Berk

On 8/15/06, Chyczewski, Thomas <Thomas.Chyczewski@ngc.com> wrote:
>
>
> I would like to give Paraview a try but am having trouble building an
> executable. Is there an archive somewhere that contains more information
> than that given in Install link of paraview.org?
>
> In case someone on this list can help, here is my problem:
>
> I have an SGI running IRIX 6.5. I downloaded ccmake 2.4.3 and paraview
> 2.4.4. I installed cmake, untarred paraview, created the directory
> ./paraview-2.4.4-irix, created the environmental variables pointing to
> my c and c++ compilers and executed "ccmake ../paraview-2.4.4" in that
> directory. After a little while, I get the error message stating that it
> cannot find
> paraview-2.4.4/GUI/Widgets/Examples/Cxx/SimpleWindowWithImageWidget/vtkK
> WSimpleWindowWithImageWidgetExample.h plus 4 other files similar files.
> As I doubt that I have uncovered an ommision in the distribution file, I
> believe I am missing something. Can anyone help me out?
>
> I also tried to build paraview 2.2.1. In this case, I was able to get
> through ccmake, but the compilation failed because in
> vtkThreadedController.h,  "pid_t" is undefined. Any suggestions?
>
> Tom
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060815/462ac2e8/attachment.htm
From berk.geveci at gmail.com  Tue Aug 15 15:28:08 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Tue Aug 15 15:28:14 2006
Subject: [Paraview] save animation
In-Reply-To: <3ce943600608151155m7eff3651xdd927755cfd140da@mail.gmail.com>
References: <3ce943600608151155m7eff3651xdd927755cfd140da@mail.gmail.com>
Message-ID: <a2ab21560608151228y63eb33b2udddeba1a60598df0@mail.gmail.com>

Your player probably does not support the encoding that we use.  It is
mpeg-2 encoding. There is a free decoder for windows. I think it's called
stinky's mpeg-2 codec. Alternatively, you can grab the ffmpeg sources from
http://vtk.org/get-software.php#addons, compile it and turn on ffmpeg
support in paraview. With that, you can create AVIs from linux/unix that are
better than mpeg-2. On Windows, you don't have to do anything to enable AVI
support. It's built-in. One caveat: I think ffmpeg requires gcc to compile.

-Berk

On 8/15/06, Battalgazi YILDIRIM <yildirimga@gmail.com> wrote:
>
> Hi,
>
> I made simple movies (which was working quite well in paraview display
> screen),
>  and then want to save animation as mpg file. I saved it as mpg file  and
> tried to
>  play mpg file but it didn't work (I tried this movie file on windows and
> linux). However,
>  if I choose jpg, it automatically create  succesive (and working) jpg
> files for each frame.
>
> did anyone have the similiar problem?
>
>
> thanks,
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060815/ad044eb9/attachment.html
From vpessoa at lncc.br  Thu Aug 17 10:14:49 2006
From: vpessoa at lncc.br (vpessoa@lncc.br)
Date: Thu Aug 17 09:11:32 2006
Subject: [Paraview] How to get a vtkClientServerID of a already created
	vtkobject in dataserver
Message-ID: <1155824089.44e479d96eb05@webmail.lncc.br>

Hi all.

I have an unusual problem here...

I've created my custom DICOMImageReader. That reader, invokes by xml a widget
that have the cutters and widgets so I can visualize my vtkImageData.
My C++ Widget and server cutter filter comunicates with each other perfectly.
The problem is at the comunication inside the DataServer. When I click on the
Accept button, my cutter just have no reference of my reader, sou I can run the
cutter->SetInput(reader->GetOutput()).

Well, my question is: How can I get the reference of this reader from inside of
my cutter filter (pointer reference), on my server managers
(vtkClientServerID), or
even on my PV's.

Is there a way of getting at least a list of existing objects at the servers?

Thank you all for your time and colaboration.
[ ]'s
----------------------------------------
Atencisamente,
Vinicius Pess?a
Laborat?rio Nacional de Computa??o Cient?fica
+55 (24) 2233-6098
+55 (24) 8803-7061

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.
From utkarsh.ayachit at kitware.com  Thu Aug 17 12:02:37 2006
From: utkarsh.ayachit at kitware.com (Utkarsh Ayachit)
Date: Thu Aug 17 12:02:39 2006
Subject: [Paraview] How to get a vtkClientServerID of a already created
	vtkobject in dataserver
In-Reply-To: <1155824089.44e479d96eb05@webmail.lncc.br>
References: <1155824089.44e479d96eb05@webmail.lncc.br>
Message-ID: <44E4931D.4060603@kitware.com>

Typically, all proxies that represent VTK filters have an "Input" 
property. Look any proxy definition in 
Server/ServerManager/Resources/filters.xml. You will have to add an 
"Input" property to your cutter proxy as well (If you are using the 
Cutter provided by paraview, it already has an input property). Now on 
the client side, I am assuming you have access to the reader proxy as 
well as the cutter proxy. To set the reader as the input to the cutter 
one simply does:

vtkSMInputProperty::SafeDownCast(
   cutterProxy->GetProperty("Input"))->AddProxy(readerProxy);

This will setup the pipeline on the data server (or where were the vtk 
objects might actually be).

Generally speaking, one does not have access to the vtkClientServerID in 
the VTK filters created on the servers. vtkSMProxy provides API to 
access the IDs for the VTK objects it stands for:
vtkSMProxy::GetNumberOfIDs() and vtkSMProxy::GetID(unsigned int). Thus, 
the ServerManager and ParaView client are aware of and can access the IDs.

Utkarsh.

vpessoa@lncc.br wrote:
> Hi all.
> 
> I have an unusual problem here...
> 
> I've created my custom DICOMImageReader. That reader, invokes by xml a widget
> that have the cutters and widgets so I can visualize my vtkImageData.
> My C++ Widget and server cutter filter comunicates with each other perfectly.
> The problem is at the comunication inside the DataServer. When I click on the
> Accept button, my cutter just have no reference of my reader, sou I can run the
> cutter->SetInput(reader->GetOutput()).
> 
> Well, my question is: How can I get the reference of this reader from inside of
> my cutter filter (pointer reference), on my server managers
> (vtkClientServerID), or
> even on my PV's.
> 
> Is there a way of getting at least a list of existing objects at the servers?
> 
> Thank you all for your time and colaboration.
> [ ]'s
> ----------------------------------------
> Atencisamente,
> Vinicius Pess?a
> Laborat?rio Nacional de Computa??o Cient?fica
> +55 (24) 2233-6098
> +55 (24) 8803-7061
> 
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
> 

From berk.geveci at kitware.com  Thu Aug 17 14:25:12 2006
From: berk.geveci at kitware.com (Berk Geveci)
Date: Thu Aug 17 14:25:18 2006
Subject: [Paraview] August snapshot of ParaView III
Message-ID: <44E4B488.3080200@kitware.com>

Hi Folks,

I posted the August snapshot of ParaView. You can download it here:
http://paraview.org/files/v2.9/

The relevant files are:

Binaries:
http://paraview.org/files/v2.9/paraview-2.9.2-win32-x86.exe (Windows, 32 bit)
http://paraview.org/files/v2.9/paraview-2.9.2-Linux-x86_em64.tar.gz (Linux, 64 bit)
http://paraview.org/files/v2.9/paraview-2.9.2-Linux-x86.tar.gz (Linux, 32 bit)

Source:
http://paraview.org/files/v2.9/ParaView2-9-August.tgz (CR)
http://paraview.org/files/v2.9/ParaView2-9-August.zip (CR+LF)

We regularly compile and run Windows, Linux and MacOS X.

Please note that this is a development snapshot and may contain bugs. We have 
removed some of the limitations in this snapshot. It is now possible to access 
some of the features in development including multiple frames, all 
readers/sources/filters, python shell (requires compilation from source).

There is still very little documentation. We will focus on that before the 
actual release.

Next snapshot (September) will have:

1. Mac OS X binary
2. Binaries with python
3. Easier build process
4. Build instructions (hopefully)

and more.

-Berk
From thorin.hax at gmail.com  Thu Aug 17 14:30:29 2006
From: thorin.hax at gmail.com (robert maynard)
Date: Thu Aug 17 14:30:32 2006
Subject: [Paraview] Filling a Sphere with an unstructured grid.
Message-ID: <b45d6a1e0608171130g289e25b9q24376f58778ea8cd@mail.gmail.com>

I am trying to fill a empty sphere a unstructured grid that would have
attributes, so that I can than probe the sphere object instead of the
much larger grid. The problem I am encountering is that when I append
the sphere and grid, it takes the union. Is there any vtk or paraview
filter that will only return me the sections of the unstructed grid
inside the sphere?

I have also tried to clip the unstructered grid with a sphere but that
seems to result in a empty sphere.
From Christian.Wohlschlager at jku.at  Fri Aug 18 03:59:32 2006
From: Christian.Wohlschlager at jku.at (Christian Wohlschlager)
Date: Fri Aug 18 03:59:57 2006
Subject: [Paraview] Documentation of paraview
Message-ID: <44E58F83.0548.0038.3@jku.at>

** Reply Requested When Convenient **

Hello !

Paraview is a really very goog Product i'm very astonished that it can
fullfill so many aspects of visualisation, BUT
after nearly 2 Month of search for documentation i give it up, i try to
buy the book with amazone and and and but they do not have the book.
All i can do now i try and error.
Do you have any idea where i can buy the book or get a documentation
????

thank you

christian
From guajanai at student.ethz.ch  Fri Aug 18 05:12:16 2006
From: guajanai at student.ethz.ch (Ivan Guajana)
Date: Fri Aug 18 05:12:42 2006
Subject: [Paraview] Tracing a particle's trajectory over time in paraview?
Message-ID: <89A641A6-AA87-4E13-A1F3-7C778BD2E542@student.ethz.ch>

Hi,
	I am looking for a way to draw a particle's trajectory over time. I  
have an Ensight Gold multi-step data-set containing
a bunch of particles and their positions at each time step. I would  
like to extract the actual paths out of it. It shouldn't
be complicated, but I couldn't find a way to do it in paraview. Is it  
possible?

Thanks in advance,

Ivan Guajana
From berk.geveci at gmail.com  Fri Aug 18 06:55:09 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Fri Aug 18 06:55:19 2006
Subject: [Paraview] Documentation of paraview
In-Reply-To: <44E58F83.0548.0038.3@jku.at>
References: <44E58F83.0548.0038.3@jku.at>
Message-ID: <a2ab21560608180355x73587faan87ccf133e1d4e9a1@mail.gmail.com>

http://www.kitware.com/products/paraviewguide.html

On 8/18/06, Christian Wohlschlager <Christian.Wohlschlager@jku.at> wrote:
>
> ** Reply Requested When Convenient **
>
> Hello !
>
> Paraview is a really very goog Product i'm very astonished that it can
> fullfill so many aspects of visualisation, BUT
> after nearly 2 Month of search for documentation i give it up, i try to
> buy the book with amazone and and and but they do not have the book.
> All i can do now i try and error.
> Do you have any idea where i can buy the book or get a documentation
> ????
>
> thank you
>
> christian
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060818/7c7fd514/attachment.html
From kmorel at sandia.gov  Fri Aug 18 08:23:04 2006
From: kmorel at sandia.gov (Moreland, Kenneth)
Date: Fri Aug 18 08:23:29 2006
Subject: [Paraview] Documentation of paraview
In-Reply-To: <44E58F83.0548.0038.3@jku.at>
Message-ID: <7137A9E1D1768C44BE7DF11D30FAB32302BCFF00@ES21SNLNT.srn.sandia.gov>

http://www.kitware.com/products/paraviewguide.html

> -----Original Message-----
> From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-
> bounces+kmorel=sandia.gov@paraview.org] On Behalf Of Christian
> Wohlschlager
> Sent: Friday, August 18, 2006 2:00 AM
> To: paraview@paraview.org
> Subject: [Paraview] Documentation of paraview
> 
> ** Reply Requested When Convenient **
> 
> Hello !
> 
> Paraview is a really very goog Product i'm very astonished that it can
> fullfill so many aspects of visualisation, BUT
> after nearly 2 Month of search for documentation i give it up, i try
to
> buy the book with amazone and and and but they do not have the book.
> All i can do now i try and error.
> Do you have any idea where i can buy the book or get a documentation
> ????
> 
> thank you
> 
> christian
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview


From berk.geveci at kitware.com  Fri Aug 18 09:34:23 2006
From: berk.geveci at kitware.com (Berk Geveci)
Date: Fri Aug 18 09:34:28 2006
Subject: [Fwd: RE: [Paraview] Getting started]
Message-ID: <44E5C1DF.1000309@kitware.com>


I was able to get the files with names truncated by tar from the zipped
distribution file. The execution of ccmake was successful. When I tried
to compile with "make && make install" I immediately get

no arguments or description file (bu7).
*** Error code 1 (bu21)
*** Error code 1 (bu21)
*** Error code 1 (bu21)

The installation instructions point out that gmake may be needed. Is
that what you conclude from the error message I received?

Tom

---------------------------------------
Dr. Thomas S. Chyczewski, M/S U01-026
Technology Development
Northrop Grumman Corporation
925 South Oyster Bay Road
Bethpage, NY 11714-3582

Tel: (516) 704-3667
Fax: (516) 346-8130
-----Original Message-----
From: Berk Geveci [mailto:berk.geveci@kitware.com]
Sent: Thursday, August 17, 2006 2:38 PM
To: Chyczewski, Thomas
Subject: Re: [Paraview] Getting started

Hi Tom,

I checked and the archive is intact. It sounds like there is a length
limitation for filenames on your system. Can you verify if this is the
case?

-Berk

Chyczewski, Thomas wrote:
>  
> (Berk, I sent this yesterday but suspect it did not make it through)
>  
> Yes. The SimpleWindowWithImageWidget directory contains only
>  
> CmakeLists.txt
> KWSimpleWindowWithImageWidgetEx
> vtkKWSimpleWindowWithImageWidge
>  
> Tom
>  
> 
> ---------------------------------------
> Dr. Thomas S. Chyczewski, M/S U01-026
> Technology Development
> Northrop Grumman Corporation
> 925 South Oyster Bay Road
> Bethpage, NY 11714-3582
> 
> Tel: (516) 704-3667
> Fax: (516) 346-8130
> 
>  
> 
> ----------------------------------------------------------------------
> --
> *From:* Berk Geveci [mailto:berk.geveci@gmail.com]
> *Sent:* Tuesday, August 15, 2006 4:56 PM
> *To:* Chyczewski, Thomas
> *Subject:* Re: [Paraview] Getting started
> 
> That's weird. I have that file in my cvs checkout. Can you check if 
> that directory is there?
> 
> 
> On 8/15/06, *Chyczewski, Thomas* < Thomas.Chyczewski@ngc.com 
> <mailto:Thomas.Chyczewski@ngc.com>> wrote:
> 
>     Berk,
>      
>     Please see attached. To be sure I am not omitting any steps in the
>     description of my problem, after I enter the ccmake command and
the
>     ccmake screen appears, I enter 'c' to start configuring. (It
appears
>     as though I have the option of changing
>     "CMAKE_BACKWARDS_COMPATIBILITY" from 2.4, but I don't change 
> anything. )
>      
>     Thanks for your help.
>      
>     Tom
> 
>
------------------------------------------------------------------------
>     *From:* Berk Geveci [mailto:berk.geveci@gmail.com
>     <mailto:berk.geveci@gmail.com>]
>     *Sent:* Tuesday, August 15, 2006 3:18 PM
>     *To:* Chyczewski, Thomas
>     *Cc:* paraview@paraview.org <mailto:paraview@paraview.org>
>     *Subject:* Re: [Paraview] Getting started
> 
>     Can you post the exact errors you are getting as well as the
>     CMakeCache.txt from your build tree. If your message is rejected
>     because of it's size, don't worry. I will make sure it goes
through.
> 
>     -Berk
> 
>     On 8/15/06, *Chyczewski, Thomas* <Thomas.Chyczewski@ngc.com
>     <mailto:Thomas.Chyczewski@ngc.com>> wrote:
> 
> 
>         I would like to give Paraview a try but am having trouble
>         building an
>         executable. Is there an archive somewhere that contains more
>         information
>         than that given in Install link of paraview.org
>         <http://paraview.org>?
> 
>         In case someone on this list can help, here is my problem:
> 
>         I have an SGI running IRIX 6.5. I downloaded ccmake 2.4.3 and
>         paraview
>         2.4.4. I installed cmake, untarred paraview, created the
directory
>         ./paraview-2.4.4-irix, created the environmental variables
>         pointing to
>         my c and c++ compilers and executed "ccmake ../paraview-2.4.4"
>         in that
>         directory. After a little while, I get the error message
stating
>         that it
>         cannot find
>
paraview-2.4.4/GUI/Widgets/Examples/Cxx/SimpleWindowWithImageWidget/vtkK
>         WSimpleWindowWithImageWidgetExample.h plus 4 other files
similar
>         files.
>         As I doubt that I have uncovered an ommision in the
distribution
>         file, I
>         believe I am missing something. Can anyone help me out?
> 
>         I also tried to build paraview 2.2.1. In this case, I was able
>         to get
>         through ccmake, but the compilation failed because in
>         vtkThreadedController.h,  "pid_t" is undefined. Any
suggestions?
> 
>         Tom
>         _______________________________________________
>         ParaView mailing list
>         ParaView@paraview.org <mailto:ParaView@paraview.org>
>         http://www.paraview.org/mailman/listinfo/paraview
>         <http://www.paraview.org/mailman/listinfo/paraview>
> 
> 
> 
> 


From biddisco at cscs.ch  Fri Aug 18 10:17:40 2006
From: biddisco at cscs.ch (John Biddiscombe)
Date: Fri Aug 18 10:17:49 2006
Subject: [Paraview] Tracing a particle's trajectory over time in paraview?
In-Reply-To: <89A641A6-AA87-4E13-A1F3-7C778BD2E542@student.ethz.ch>
References: <89A641A6-AA87-4E13-A1F3-7C778BD2E542@student.ethz.ch>
Message-ID: <44E5CC04.6020701@cscs.ch>

Ivan

For fast particle rendering, you might like to try sparticles, (I've 
just uploaded my latest build = v1.4)
http://www.cscs.ch/a-display.php?id=170
it uses a custom vtk mapper which renders particles using the GPU and is 
quite fast (I use it on datasets up to a million of so particles, but it 
starts getting a little unresponsive with that many and I'm actively 
improving it).

I has been my intention of integrating the mapper with paraview, but it 
is still on the "Todo" list (now that ParaQ source is available I'll try 
to start on it).

It should read all manner of Ensight files without any problems - note 
that internally, it caches particle data locally using an HDF5 format, 
so you can convert your Ensight->HDF5 using the tool!

Since you're on the ETHZ domain, you can ask for any improvements you 
like (off list) and if you have any problems please don't hesitate to 
get in touch.

regards

JB


> Hi,
>     I am looking for a way to draw a particle's trajectory over time. 
> I have an Ensight Gold multi-step data-set containing
> a bunch of particles and their positions at each time step. I would 
> like to extract the actual paths out of it. It shouldn't
> be complicated, but I couldn't find a way to do it in paraview. Is it 
> possible?
>
> Thanks in advance,
>
> Ivan Guajana
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview


-- 
John Biddiscombe,                            email:biddisco @ cscs.ch
http://www.cscs.ch/about/BJohn.php
CSCS, Swiss National Supercomputing Centre  | Tel:  +41 (91) 610.82.07
Via Cantonale, 6928 Manno, Switzerland      | Fax:  +41 (91) 610.82.82


From biddisco at cscs.ch  Fri Aug 18 10:32:01 2006
From: biddisco at cscs.ch (John Biddiscombe)
Date: Fri Aug 18 10:32:09 2006
Subject: [Paraview] Tracing a particle's trajectory over time in paraview?
In-Reply-To: <44E5CC04.6020701@cscs.ch>
References: <89A641A6-AA87-4E13-A1F3-7C778BD2E542@student.ethz.ch>
	<44E5CC04.6020701@cscs.ch>
Message-ID: <44E5CF61.8@cscs.ch>

Sorry, I forgot to mention that I do have somewhere a 
vtkParticleTrajectoryFilter that I had planned on getting working in 
sparticles (I just looked but can't find the code), I think I never 
quite finished it. I realize on second reading that you are interested 
in the trajectory rather than the particles themselves. If this is of 
interest, drop me a line and I'll try to find it and  get it working.

JB

> Ivan
>
> For fast particle rendering, you might like to try sparticles, (I've 
> just uploaded my latest build = v1.4)
> http://www.cscs.ch/a-display.php?id=170
> it uses a custom vtk mapper which renders particles using the GPU and 
> is quite fast (I use it on datasets up to a million of so particles, 
> but it starts getting a little unresponsive with that many and I'm 
> actively improving it).
>
> I has been my intention of integrating the mapper with paraview, but 
> it is still on the "Todo" list (now that ParaQ source is available 
> I'll try to start on it).
>
> It should read all manner of Ensight files without any problems - note 
> that internally, it caches particle data locally using an HDF5 format, 
> so you can convert your Ensight->HDF5 using the tool!
>
> Since you're on the ETHZ domain, you can ask for any improvements you 
> like (off list) and if you have any problems please don't hesitate to 
> get in touch.
>
> regards
>
> JB
>
>
>> Hi,
>>     I am looking for a way to draw a particle's trajectory over time. 
>> I have an Ensight Gold multi-step data-set containing
>> a bunch of particles and their positions at each time step. I would 
>> like to extract the actual paths out of it. It shouldn't
>> be complicated, but I couldn't find a way to do it in paraview. Is it 
>> possible?
>>
>> Thanks in advance,
>>
>> Ivan Guajana
>> _______________________________________________
>> ParaView mailing list
>> ParaView@paraview.org
>> http://www.paraview.org/mailman/listinfo/paraview
>
>


-- 
John Biddiscombe,                            email:biddisco @ cscs.ch
http://www.cscs.ch/about/BJohn.php
CSCS, Swiss National Supercomputing Centre  | Tel:  +41 (91) 610.82.07
Via Cantonale, 6928 Manno, Switzerland      | Fax:  +41 (91) 610.82.82


From Thomas.Chyczewski at ngc.com  Fri Aug 18 11:08:27 2006
From: Thomas.Chyczewski at ngc.com (Chyczewski, Thomas)
Date: Fri Aug 18 11:08:51 2006
Subject: [Fwd: RE: [Paraview] Getting started]
In-Reply-To: <44E5C1DF.1000309@kitware.com>
Message-ID: <6F4D9B093B96EB49BE874536152F4B3B06E304@xcgny106.northgrum.com>


Attached is some further diagnostic information for the problem
described below. Thanks.

Tom 

-----Original Message-----
From: paraview-bounces+thomas.chyczewski=ngc.com@paraview.org
[mailto:paraview-bounces+thomas.chyczewski=ngc.com@paraview.org] On
Behalf Of Berk Geveci
Sent: Friday, August 18, 2006 9:34 AM
To: ParaView Mailing List
Subject: [Fwd: RE: [Paraview] Getting started]


I was able to get the files with names truncated by tar from the zipped
distribution file. The execution of ccmake was successful. When I tried
to compile with "make && make install" I immediately get

no arguments or description file (bu7).
*** Error code 1 (bu21)
*** Error code 1 (bu21)
*** Error code 1 (bu21)

The installation instructions point out that gmake may be needed. Is
that what you conclude from the error message I received?

Tom

---------------------------------------
Dr. Thomas S. Chyczewski, M/S U01-026
Technology Development
Northrop Grumman Corporation
925 South Oyster Bay Road
Bethpage, NY 11714-3582

Tel: (516) 704-3667
Fax: (516) 346-8130
-----Original Message-----
From: Berk Geveci [mailto:berk.geveci@kitware.com]
Sent: Thursday, August 17, 2006 2:38 PM
To: Chyczewski, Thomas
Subject: Re: [Paraview] Getting started

Hi Tom,

I checked and the archive is intact. It sounds like there is a length
limitation for filenames on your system. Can you verify if this is the
case?

-Berk

Chyczewski, Thomas wrote:
>  
> (Berk, I sent this yesterday but suspect it did not make it through)
>  
> Yes. The SimpleWindowWithImageWidget directory contains only
>  
> CmakeLists.txt
> KWSimpleWindowWithImageWidgetEx
> vtkKWSimpleWindowWithImageWidge
>  
> Tom
>  
> 
> ---------------------------------------
> Dr. Thomas S. Chyczewski, M/S U01-026
> Technology Development
> Northrop Grumman Corporation
> 925 South Oyster Bay Road
> Bethpage, NY 11714-3582
> 
> Tel: (516) 704-3667
> Fax: (516) 346-8130
> 
>  
> 
> ----------------------------------------------------------------------
> --
> *From:* Berk Geveci [mailto:berk.geveci@gmail.com]
> *Sent:* Tuesday, August 15, 2006 4:56 PM
> *To:* Chyczewski, Thomas
> *Subject:* Re: [Paraview] Getting started
> 
> That's weird. I have that file in my cvs checkout. Can you check if 
> that directory is there?
> 
> 
> On 8/15/06, *Chyczewski, Thomas* < Thomas.Chyczewski@ngc.com 
> <mailto:Thomas.Chyczewski@ngc.com>> wrote:
> 
>     Berk,
>      
>     Please see attached. To be sure I am not omitting any steps in the
>     description of my problem, after I enter the ccmake command and
the
>     ccmake screen appears, I enter 'c' to start configuring. (It
appears
>     as though I have the option of changing
>     "CMAKE_BACKWARDS_COMPATIBILITY" from 2.4, but I don't change 
> anything. )
>      
>     Thanks for your help.
>      
>     Tom
> 
>
------------------------------------------------------------------------
>     *From:* Berk Geveci [mailto:berk.geveci@gmail.com
>     <mailto:berk.geveci@gmail.com>]
>     *Sent:* Tuesday, August 15, 2006 3:18 PM
>     *To:* Chyczewski, Thomas
>     *Cc:* paraview@paraview.org <mailto:paraview@paraview.org>
>     *Subject:* Re: [Paraview] Getting started
> 
>     Can you post the exact errors you are getting as well as the
>     CMakeCache.txt from your build tree. If your message is rejected
>     because of it's size, don't worry. I will make sure it goes
through.
> 
>     -Berk
> 
>     On 8/15/06, *Chyczewski, Thomas* <Thomas.Chyczewski@ngc.com
>     <mailto:Thomas.Chyczewski@ngc.com>> wrote:
> 
> 
>         I would like to give Paraview a try but am having trouble
>         building an
>         executable. Is there an archive somewhere that contains more
>         information
>         than that given in Install link of paraview.org
>         <http://paraview.org>?
> 
>         In case someone on this list can help, here is my problem:
> 
>         I have an SGI running IRIX 6.5. I downloaded ccmake 2.4.3 and
>         paraview
>         2.4.4. I installed cmake, untarred paraview, created the
directory
>         ./paraview-2.4.4-irix, created the environmental variables
>         pointing to
>         my c and c++ compilers and executed "ccmake ../paraview-2.4.4"
>         in that
>         directory. After a little while, I get the error message
stating
>         that it
>         cannot find
>
paraview-2.4.4/GUI/Widgets/Examples/Cxx/SimpleWindowWithImageWidget/vtkK
>         WSimpleWindowWithImageWidgetExample.h plus 4 other files
similar
>         files.
>         As I doubt that I have uncovered an ommision in the
distribution
>         file, I
>         believe I am missing something. Can anyone help me out?
> 
>         I also tried to build paraview 2.2.1. In this case, I was able
>         to get
>         through ccmake, but the compilation failed because in
>         vtkThreadedController.h,  "pid_t" is undefined. Any
suggestions?
> 
>         Tom
>         _______________________________________________
>         ParaView mailing list
>         ParaView@paraview.org <mailto:ParaView@paraview.org>
>         http://www.paraview.org/mailman/listinfo/paraview
>         <http://www.paraview.org/mailman/listinfo/paraview>
> 
> 
> 
> 


_______________________________________________
ParaView mailing list
ParaView@paraview.org
http://www.paraview.org/mailman/listinfo/paraview
-------------- next part --------------
A non-text attachment was scrubbed...
Name: make.screenout
Type: application/octet-stream
Size: 418 bytes
Desc: make.screenout
Url : http://public.kitware.com/pipermail/paraview/attachments/20060818/014007e0/make-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Makefile
Type: application/octet-stream
Size: 65700 bytes
Desc: Makefile
Url : http://public.kitware.com/pipermail/paraview/attachments/20060818/014007e0/Makefile-0001.obj
From jsg3 at psu.edu  Fri Aug 18 11:56:51 2006
From: jsg3 at psu.edu (Jack Gundrum)
Date: Fri Aug 18 11:57:01 2006
Subject: [Paraview] 2.9.2
Message-ID: <44E5E343.1080000@psu.edu>

Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface. 
Found almost everything  but  were you switch  display
mode to volume rendering ect.


From berk.geveci at gmail.com  Fri Aug 18 12:34:28 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Fri Aug 18 12:34:32 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <44E5E343.1080000@psu.edu>
References: <44E5E343.1080000@psu.edu>
Message-ID: <a2ab21560608180934q25398edas35dca95f044db62b@mail.gmail.com>

You can access the display settings by right-clicking on a source or filter
on the pipeline browser. Volume rendering is not yet supported though. The
display panel is still evolving.

On 8/18/06, Jack Gundrum <jsg3@psu.edu> wrote:
>
> Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface.
> Found almost everything  but  were you switch  display
> mode to volume rendering ect.
>
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060818/db9f93a1/attachment.html
From imikejackson at gmail.com  Fri Aug 18 14:38:11 2006
From: imikejackson at gmail.com (Mike Jackson)
Date: Fri Aug 18 14:38:14 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <a2ab21560608180934q25398edas35dca95f044db62b@mail.gmail.com>
References: <44E5E343.1080000@psu.edu>
	<a2ab21560608180934q25398edas35dca95f044db62b@mail.gmail.com>
Message-ID: <43a689850608181138i1ae68bfey944552d2f59b3440@mail.gmail.com>

On 8/18/06, Berk Geveci <berk.geveci@gmail.com> wrote:
> You can access the display settings by right-clicking on a source or filter
> on the pipeline browser. Volume rendering is not yet supported though. The
> display panel is still evolving.
>
>
>  On 8/18/06, Jack Gundrum <jsg3@psu.edu> wrote:
> > Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface.
> > Found almost everything  but  were you switch  display
> > mode to volume rendering ect.
> >
> >

Any chance that the 2.9 would compile on OS X? I already know that
"official" support for OS X isn't until next year, but I wouldn't mind
giving it a crack to see where it is failing?

I just need the OpenSource version of QT? Which I already have.

-- 
Mike Jackson
imikejackson _at_ gee-mail dot com
From berk.geveci at gmail.com  Fri Aug 18 15:23:06 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Fri Aug 18 15:23:26 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <43a689850608181138i1ae68bfey944552d2f59b3440@mail.gmail.com>
References: <44E5E343.1080000@psu.edu>
	<a2ab21560608180934q25398edas35dca95f044db62b@mail.gmail.com>
	<43a689850608181138i1ae68bfey944552d2f59b3440@mail.gmail.com>
Message-ID: <a2ab21560608181223nb3251dke870edf045f165f0@mail.gmail.com>

I haven't tried with GPL'ed Qt yet but ParaView 2.9 compiles and runs
beautifully on OS X with commercial Qt. It should work with GPL Qt as well.
It should compile out of the box (with python support too). I will try with
GPL'ed Qt this weekend.
I could no longer resist the temptation so I am finally a proud owner of an
Intel Mac Mini. It is the latest fashion to buy Mac Minis at Kitware.
I have been developing ParaView III on OS X for about two weeks now. Andy
has been compiling and running on OS X as well. If you run into any issues,
let us know.

-Berk


On 8/18/06, Mike Jackson <imikejackson@gmail.com> wrote:
>
> On 8/18/06, Berk Geveci <berk.geveci@gmail.com> wrote:
> > You can access the display settings by right-clicking on a source or
> filter
> > on the pipeline browser. Volume rendering is not yet supported though.
> The
> > display panel is still evolving.
> >
> >
> >  On 8/18/06, Jack Gundrum <jsg3@psu.edu> wrote:
> > > Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface.
> > > Found almost everything  but  were you switch  display
> > > mode to volume rendering ect.
> > >
> > >
>
> Any chance that the 2.9 would compile on OS X? I already know that
> "official" support for OS X isn't until next year, but I wouldn't mind
> giving it a crack to see where it is failing?
>
> I just need the OpenSource version of QT? Which I already have.
>
> --
> Mike Jackson
> imikejackson _at_ gee-mail dot com
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060818/f0f9dfb4/attachment.html
From imikejackson at gmail.com  Fri Aug 18 15:34:21 2006
From: imikejackson at gmail.com (Mike Jackson)
Date: Fri Aug 18 15:34:27 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <a2ab21560608181223nb3251dke870edf045f165f0@mail.gmail.com>
References: <44E5E343.1080000@psu.edu>
	<a2ab21560608180934q25398edas35dca95f044db62b@mail.gmail.com>
	<43a689850608181138i1ae68bfey944552d2f59b3440@mail.gmail.com>
	<a2ab21560608181223nb3251dke870edf045f165f0@mail.gmail.com>
Message-ID: <43a689850608181234y5d278866tf22a761f14a69918@mail.gmail.com>

<Sarcasm> THUMP.. the sound of me fainting.. someone is doing
development on a Mac at Kitware.. </sarcasm>

Great to hear that you picked up a mini. Hupefully a dual core and not
one of the single core. The graphics are kinda crappy, but the compile
speed is way better than the ppc macs. Maybe not as fast as VC++.. but
a huge improvement none-the-less.

What are you using for you dev environment? I kinda gave up on Xcode
and now I am using Eclipse with the CDT plugin. You kinda have to
tweak it a bit to work with CMake but once things are set up it works
great.

Can't wait to give it a try
Mike Jackson

On 8/18/06, Berk Geveci <berk.geveci@gmail.com> wrote:
> I haven't tried with GPL'ed Qt yet but ParaView 2.9 compiles and runs
> beautifully on OS X with commercial Qt. It should work with GPL Qt as well.
> It should compile out of the box (with python support too). I will try with
> GPL'ed Qt this weekend.
> I could no longer resist the temptation so I am finally a proud owner of an
> Intel Mac Mini. It is the latest fashion to buy Mac Minis at Kitware.
> I have been developing ParaView III on OS X for about two weeks now. Andy
> has been compiling and running on OS X as well. If you run into any issues,
> let us know.
>
> -Berk
>
>
>
> On 8/18/06, Mike Jackson <imikejackson@gmail.com> wrote:
> >
>  On 8/18/06, Berk Geveci <berk.geveci@gmail.com> wrote:
> > You can access the display settings by right-clicking on a source or
> filter
> > on the pipeline browser. Volume rendering is not yet supported though. The
> > display panel is still evolving.
> >
> >
> >  On 8/18/06, Jack Gundrum <jsg3@psu.edu> wrote:
> > > Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface.
> > > Found almost everything  but  were you switch  display
> > > mode to volume rendering ect.
> > >
> > >
>
> Any chance that the 2.9 would compile on OS X? I already know that
> "official" support for OS X isn't until next year, but I wouldn't mind
> giving it a crack to see where it is failing?
>
> I just need the OpenSource version of QT? Which I already have.
>
> --
> Mike Jackson
> imikejackson _at_ gee-mail dot com
> _______________________________________________
>
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
>


-- 
Mike Jackson
imikejackson _at_ gee-mail dot com
From berk.geveci at gmail.com  Fri Aug 18 15:40:33 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Fri Aug 18 15:40:38 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <43a689850608181234y5d278866tf22a761f14a69918@mail.gmail.com>
References: <44E5E343.1080000@psu.edu>
	<a2ab21560608180934q25398edas35dca95f044db62b@mail.gmail.com>
	<43a689850608181138i1ae68bfey944552d2f59b3440@mail.gmail.com>
	<a2ab21560608181223nb3251dke870edf045f165f0@mail.gmail.com>
	<43a689850608181234y5d278866tf22a761f14a69918@mail.gmail.com>
Message-ID: <a2ab21560608181240icba605au6803ee38be7fb288@mail.gmail.com>

It's a dual core. It's pretty fast, comparable to my Linux box actually. As
dev "environment",  I use cmake, make and emacs. I will give Xcode a try but
I am not an IDE person.

-Berk


On 8/18/06, Mike Jackson <imikejackson@gmail.com> wrote:
>
> <Sarcasm> THUMP.. the sound of me fainting.. someone is doing
> development on a Mac at Kitware.. </sarcasm>
>
> Great to hear that you picked up a mini. Hupefully a dual core and not
> one of the single core. The graphics are kinda crappy, but the compile
> speed is way better than the ppc macs. Maybe not as fast as VC++.. but
> a huge improvement none-the-less.
>
> What are you using for you dev environment? I kinda gave up on Xcode
> and now I am using Eclipse with the CDT plugin. You kinda have to
> tweak it a bit to work with CMake but once things are set up it works
> great.
>
> Can't wait to give it a try
> Mike Jackson
>
> On 8/18/06, Berk Geveci <berk.geveci@gmail.com> wrote:
> > I haven't tried with GPL'ed Qt yet but ParaView 2.9 compiles and runs
> > beautifully on OS X with commercial Qt. It should work with GPL Qt as
> well.
> > It should compile out of the box (with python support too). I will try
> with
> > GPL'ed Qt this weekend.
> > I could no longer resist the temptation so I am finally a proud owner of
> an
> > Intel Mac Mini. It is the latest fashion to buy Mac Minis at Kitware.
> > I have been developing ParaView III on OS X for about two weeks now.
> Andy
> > has been compiling and running on OS X as well. If you run into any
> issues,
> > let us know.
> >
> > -Berk
> >
> >
> >
> > On 8/18/06, Mike Jackson <imikejackson@gmail.com> wrote:
> > >
> >  On 8/18/06, Berk Geveci <berk.geveci@gmail.com> wrote:
> > > You can access the display settings by right-clicking on a source or
> > filter
> > > on the pipeline browser. Volume rendering is not yet supported though.
> The
> > > display panel is still evolving.
> > >
> > >
> > >  On 8/18/06, Jack Gundrum <jsg3@psu.edu> wrote:
> > > > Just downloaded the 2.9.2 alpha vesion and WOW - very nice
> interface.
> > > > Found almost everything  but  were you switch  display
> > > > mode to volume rendering ect.
> > > >
> > > >
> >
> > Any chance that the 2.9 would compile on OS X? I already know that
> > "official" support for OS X isn't until next year, but I wouldn't mind
> > giving it a crack to see where it is failing?
> >
> > I just need the OpenSource version of QT? Which I already have.
> >
> > --
> > Mike Jackson
> > imikejackson _at_ gee-mail dot com
> > _______________________________________________
> >
> > ParaView mailing list
> > ParaView@paraview.org
> > http://www.paraview.org/mailman/listinfo/paraview
> >
> >
>
>
> --
> Mike Jackson
> imikejackson _at_ gee-mail dot com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060818/78cc6ab1/attachment.html
From guardian72 at guardian72.com  Fri Aug 18 21:26:15 2006
From: guardian72 at guardian72.com (Rick Wagner)
Date: Fri Aug 18 21:26:41 2006
Subject: [Paraview] Building 2.9 on PowerBook
Message-ID: <81616947-B78C-44C5-BFB8-D558D874F802@guardian72.com>

Hi,

Well, this seemed like a good time to try out the new release, and  
here's what I got:

[  1%] Building CXX object VTK/Common/CMakeFiles/vtkCommon.dir/ 
vtkByteSwap.o
/Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/ 
vtkByteSwap.cxx: In function 'void vtkByteSwapLE(T*) [with T = float]':
/Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/ 
vtkByteSwap.cxx:225:   instantiated from here
/Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/ 
vtkByteSwap.cxx:160: error: no matching function for call to  
'vtkByteSwapper<4ul>:
:Swap(float*&)'

Blah, blah, blah. This repeat in various forms for every datatype,  
and then, appropriately, dies.

I suspect this may be an issue with the fact that my laptop is  
PowerPC. I couldn't find a configuration flag under ccmake, and I  
don't of any special flags to use this time. I tried defining  
VTK_WORDS_BIGENDIAN, but according to the compiler, that was already  
defined.

I'm very glad to hear (read) that some of the developers at Kitware  
are using Macs, and hopefully someone on the list will have some  
pointers to get me past this.

Thanks,
Rick
From zdxlj at 163.com  Fri Aug 18 22:31:22 2006
From: zdxlj at 163.com (Lijun Xie)
Date: Fri Aug 18 22:33:54 2006
Subject: [Paraview] Can the process of buiding paraview be shortened?
Message-ID: <44E6777E.08829A.01976>


Hi all,

I try to modify some code of paraview. However, the building time is too long. Each time after I modify some codes, I have to wait at least half an hour to see the effect. I have an 24 nodes linux cluster, so I think maybe it cab be accelerated by distributed and parallel compiling. However, I tried distcc and dmake, both failed when making paraview but successed on other common programs. I doubt CMake which paraview depends is a bit too complicated for these parallel compiling tools, is it? 


	
Daniel
2006-08-19



From guardian72 at guardian72.com  Fri Aug 18 23:50:08 2006
From: guardian72 at guardian72.com (Rick Wagner)
Date: Fri Aug 18 23:50:24 2006
Subject: SPAM: [Paraview] Can the process of buiding paraview be shortened?
In-Reply-To: <44E6777E.08829A.01976>
References: <44E6777E.08829A.01976>
Message-ID: <CCF4F240-CC48-478E-B881-90E13174C1CD@guardian72.com>

I don't know about compiling on separate machines, but I've had some  
luck on a single machine using GNU make. If your machine is multi- 
processor, multi-core, hyper-threaded, or whatever, I recommend  
trying "make -j n", where n is some number of simultaneous build tasks.

This works, since ccmake creates Makefiles, and doesn't actually  
handle the build process. It's even noted on the Wiki at:
   http://paraview.org/Wiki/ParaView:Build_And_Install

--Rick

On Aug 18, 2006, at 7:31 PM, Lijun Xie wrote:

>
> Hi all,
>
> I try to modify some code of paraview. However, the building time  
> is too long. Each time after I modify some codes, I have to wait at  
> least half an hour to see the effect. I have an 24 nodes linux  
> cluster, so I think maybe it cab be accelerated by distributed and  
> parallel compiling. However, I tried distcc and dmake, both failed  
> when making paraview but successed on other common programs. I  
> doubt CMake which paraview depends is a bit too complicated for  
> these parallel compiling tools, is it?
>
>
> 	
> Daniel
> 2006-08-19
>
>
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>

From zdxlj at 163.com  Sat Aug 19 02:45:44 2006
From: zdxlj at 163.com (Lijun Xie)
Date: Sat Aug 19 02:48:39 2006
Subject: SPAM: [Paraview] Can the process of buiding paraview be
	shortened?
Message-ID: <44E6B31C.08B2B1.07049>

 	My  machine has two Intel 2.4G CPUs, 1G memory, and I alway use make -j 3 to do the building job. But it's still take too much time. How long does it take you commonly to rebuild -- or just relink paraview?

======= 2006-08-19 11:50:08 ?=======

>
>I don't know about compiling on separate machines, but I've had some  
>luck on a single machine using GNU make. If your machine is multi- 
>processor, multi-core, hyper-threaded, or whatever, I recommend  
>trying "make -j n", where n is some number of simultaneous build tasks.
>
>This works, since ccmake creates Makefiles, and doesn't actually  
>handle the build process. It's even noted on the Wiki at:
>   http://paraview.org/Wiki/ParaView:Build_And_Install
>
>--Rick
>
>On Aug 18, 2006, at 7:31 PM, Lijun Xie wrote:
>
>>
>> Hi all,
>>
>> I try to modify some code of paraview. However, the building time  
>> is too long. Each time after I modify some codes, I have to wait at  
>> least half an hour to see the effect. I have an 24 nodes linux  
>> cluster, so I think maybe it cab be accelerated by distributed and  
>> parallel compiling. However, I tried distcc and dmake, both failed  
>> when making paraview but successed on other common programs. I  
>> doubt CMake which paraview depends is a bit too complicated for  
>> these parallel compiling tools, is it?
>>
>>
>> 	
>> Daniel
>> 2006-08-19
>>
>>
>>
>> _______________________________________________
>> ParaView mailing list
>> ParaView@paraview.org
>> http://www.paraview.org/mailman/listinfo/paraview
>>
>
>
>.

= = = = = = = = = = = = = = = = = = = =
		 
				 
Lijun Xie
CESC Lab, Zhejiang University
2006-08-19

From domi at vision.ee.ethz.ch  Sat Aug 19 05:02:48 2006
From: domi at vision.ee.ethz.ch (Dominik Szczerba)
Date: Sat Aug 19 05:03:39 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <44E5E343.1080000@psu.edu>
References: <44E5E343.1080000@psu.edu>
Message-ID: <44E6D3B8.3010109@vision.ee.ethz.ch>

Unlike the previous version, this one starts up fine. Interface is very 
promising, but the whole thing is not stable, strange things keep 
happening (like some GL trash remains after deleting all actors). Also, 
lots of functionality from the Tk version is missing.
Thanks & regards,
DS

Jack Gundrum wrote:
> Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface. 
> Found almost everything  but  were you switch  display
> mode to volume rendering ect.
> 
> 
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview

-- 
Dominik Szczerba, Ph.D.
Computer Vision Lab CH-8092 Zurich
http://www.vision.ee.ethz.ch/~domi
From berk.geveci at gmail.com  Sat Aug 19 10:21:54 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Sat Aug 19 10:22:10 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <44E6D3B8.3010109@vision.ee.ethz.ch>
References: <44E5E343.1080000@psu.edu> <44E6D3B8.3010109@vision.ee.ethz.ch>
Message-ID: <a2ab21560608190721q76506e5co29b2ff2df36b777a@mail.gmail.com>

If you have GL related stability issues, I recommend building from source. I
am finding it very difficult to release binaries that work well on multiple
Linux distributions. It is more my shortcoming that a paraview issue.
As for missing functionality, it will be a while before we catch up to
ParaView 2. I would appreciate feedback on what is most important to
implement first though. Also, because some of the interface is different,
you might not realize that the functionality is already there. That is
another issue we are trying to address.

-Berk

On 8/19/06, Dominik Szczerba <domi@vision.ee.ethz.ch> wrote:
>
> Unlike the previous version, this one starts up fine. Interface is very
> promising, but the whole thing is not stable, strange things keep
> happening (like some GL trash remains after deleting all actors). Also,
> lots of functionality from the Tk version is missing.
> Thanks & regards,
> DS
>
> Jack Gundrum wrote:
> > Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface.
> > Found almost everything  but  were you switch  display
> > mode to volume rendering ect.
> >
> >
> > _______________________________________________
> > ParaView mailing list
> > ParaView@paraview.org
> > http://www.paraview.org/mailman/listinfo/paraview
>
> --
> Dominik Szczerba, Ph.D.
> Computer Vision Lab CH-8092 Zurich
> http://www.vision.ee.ethz.ch/~domi
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060819/55a93deb/attachment.html
From domi at vision.ee.ethz.ch  Sat Aug 19 10:44:50 2006
From: domi at vision.ee.ethz.ch (Dominik Szczerba)
Date: Sat Aug 19 10:45:18 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <a2ab21560608190721q76506e5co29b2ff2df36b777a@mail.gmail.com>
References: <44E5E343.1080000@psu.edu> <44E6D3B8.3010109@vision.ee.ethz.ch>
	<a2ab21560608190721q76506e5co29b2ff2df36b777a@mail.gmail.com>
Message-ID: <44E723E2.7080507@vision.ee.ethz.ch>

I might indeed try building from source, however, I am frustrated about 
the need to build VTK twice (I already build one) on my aging notebook. 
The missing functionality migh indicate simply changes in the interface, 
however, I couldnt find things like add/hide/set center of rotation and 
similar. I would also very much wish for custom filter import (aka 
import package in PV2). There seems to be something in PV3 but I wasnt 
sucessful with it.
Thanks a lot and regards,
Dominik

Berk Geveci wrote:
> If you have GL related stability issues, I recommend building from 
> source. I
> am finding it very difficult to release binaries that work well on multiple
> Linux distributions. It is more my shortcoming that a paraview issue.
> As for missing functionality, it will be a while before we catch up to
> ParaView 2. I would appreciate feedback on what is most important to
> implement first though. Also, because some of the interface is different,
> you might not realize that the functionality is already there. That is
> another issue we are trying to address.
> 
> -Berk
> 
> On 8/19/06, Dominik Szczerba <domi@vision.ee.ethz.ch> wrote:
>>
>> Unlike the previous version, this one starts up fine. Interface is very
>> promising, but the whole thing is not stable, strange things keep
>> happening (like some GL trash remains after deleting all actors). Also,
>> lots of functionality from the Tk version is missing.
>> Thanks & regards,
>> DS
>>
>> Jack Gundrum wrote:
>> > Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface.
>> > Found almost everything  but  were you switch  display
>> > mode to volume rendering ect.
>> >
>> >
>> > _______________________________________________
>> > ParaView mailing list
>> > ParaView@paraview.org
>> > http://www.paraview.org/mailman/listinfo/paraview
>>
>> -- 
>> Dominik Szczerba, Ph.D.
>> Computer Vision Lab CH-8092 Zurich
>> http://www.vision.ee.ethz.ch/~domi
>> _______________________________________________
>> ParaView mailing list
>> ParaView@paraview.org
>> http://www.paraview.org/mailman/listinfo/paraview
>>
> 

-- 
Dominik Szczerba, Ph.D.
Computer Vision Lab CH-8092 Zurich
http://www.vision.ee.ethz.ch/~domi
From berk.geveci at gmail.com  Sat Aug 19 11:25:51 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Sat Aug 19 11:25:56 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <44E723E2.7080507@vision.ee.ethz.ch>
References: <44E5E343.1080000@psu.edu> <44E6D3B8.3010109@vision.ee.ethz.ch>
	<a2ab21560608190721q76506e5co29b2ff2df36b777a@mail.gmail.com>
	<44E723E2.7080507@vision.ee.ethz.ch>
Message-ID: <a2ab21560608190825p3bb09e06j9a269b1c2626e3e0@mail.gmail.com>

Ah, you are right. Those are not implemented yet. The custom filter in
paraview is different (and new). It allows you to select a pipeline of
filters and make them into one filter that you can instantiate as a group
(and store in disk etc.). Kind of like macros.

-Berk

On 8/19/06, Dominik Szczerba <domi@vision.ee.ethz.ch> wrote:
>
> I might indeed try building from source, however, I am frustrated about
> the need to build VTK twice (I already build one) on my aging notebook.
> The missing functionality migh indicate simply changes in the interface,
> however, I couldnt find things like add/hide/set center of rotation and
> similar. I would also very much wish for custom filter import (aka
> import package in PV2). There seems to be something in PV3 but I wasnt
> sucessful with it.
> Thanks a lot and regards,
> Dominik
>
> Berk Geveci wrote:
> > If you have GL related stability issues, I recommend building from
> > source. I
> > am finding it very difficult to release binaries that work well on
> multiple
> > Linux distributions. It is more my shortcoming that a paraview issue.
> > As for missing functionality, it will be a while before we catch up to
> > ParaView 2. I would appreciate feedback on what is most important to
> > implement first though. Also, because some of the interface is
> different,
> > you might not realize that the functionality is already there. That is
> > another issue we are trying to address.
> >
> > -Berk
> >
> > On 8/19/06, Dominik Szczerba <domi@vision.ee.ethz.ch> wrote:
> >>
> >> Unlike the previous version, this one starts up fine. Interface is very
> >> promising, but the whole thing is not stable, strange things keep
> >> happening (like some GL trash remains after deleting all actors). Also,
> >> lots of functionality from the Tk version is missing.
> >> Thanks & regards,
> >> DS
> >>
> >> Jack Gundrum wrote:
> >> > Just downloaded the 2.9.2 alpha vesion and WOW - very nice interface.
> >> > Found almost everything  but  were you switch  display
> >> > mode to volume rendering ect.
> >> >
> >> >
> >> > _______________________________________________
> >> > ParaView mailing list
> >> > ParaView@paraview.org
> >> > http://www.paraview.org/mailman/listinfo/paraview
> >>
> >> --
> >> Dominik Szczerba, Ph.D.
> >> Computer Vision Lab CH-8092 Zurich
> >> http://www.vision.ee.ethz.ch/~domi
> >> _______________________________________________
> >> ParaView mailing list
> >> ParaView@paraview.org
> >> http://www.paraview.org/mailman/listinfo/paraview
> >>
> >
>
> --
> Dominik Szczerba, Ph.D.
> Computer Vision Lab CH-8092 Zurich
> http://www.vision.ee.ethz.ch/~domi
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060819/d1b38e8b/attachment.htm
From domi at vision.ee.ethz.ch  Sat Aug 19 11:29:46 2006
From: domi at vision.ee.ethz.ch (Dominik Szczerba)
Date: Sat Aug 19 11:30:16 2006
Subject: [Paraview] 2.9.2
In-Reply-To: <a2ab21560608190825p3bb09e06j9a269b1c2626e3e0@mail.gmail.com>
References: <44E5E343.1080000@psu.edu> <44E6D3B8.3010109@vision.ee.ethz.ch>	
	<a2ab21560608190721q76506e5co29b2ff2df36b777a@mail.gmail.com>	
	<44E723E2.7080507@vision.ee.ethz.ch>
	<a2ab21560608190825p3bb09e06j9a269b1c2626e3e0@mail.gmail.com>
Message-ID: <44E72E6A.9040202@vision.ee.ethz.ch>

That sounds great, what I missed most in the old PV was ability to save 
a pipeline and pass various datasets through it. However, I cannot 
succeed with the new feature, or I simply dont know how to use it right. 
  Especially, for VTK filters not present in PV (like extract geometry).
regards,
Dominik

Berk Geveci wrote:
> Ah, you are right. Those are not implemented yet. The custom filter in
> paraview is different (and new). It allows you to select a pipeline of
> filters and make them into one filter that you can instantiate as a group
> (and store in disk etc.). Kind of like macros.
> 
> -Berk
> 
> On 8/19/06, Dominik Szczerba <domi@vision.ee.ethz.ch> wrote:
>>
>> I might indeed try building from source, however, I am frustrated about
>> the need to build VTK twice (I already build one) on my aging notebook.
>> The missing functionality migh indicate simply changes in the interface,
>> however, I couldnt find things like add/hide/set center of rotation and
>> similar. I would also very much wish for custom filter import (aka
>> import package in PV2). There seems to be something in PV3 but I wasnt
>> sucessful with it.
>> Thanks a lot and regards,
>> Dominik
>>
>> Berk Geveci wrote:
>> > If you have GL related stability issues, I recommend building from
>> > source. I
>> > am finding it very difficult to release binaries that work well on
>> multiple
>> > Linux distributions. It is more my shortcoming that a paraview issue.
>> > As for missing functionality, it will be a while before we catch up to
>> > ParaView 2. I would appreciate feedback on what is most important to
>> > implement first though. Also, because some of the interface is
>> different,
>> > you might not realize that the functionality is already there. That is
>> > another issue we are trying to address.
>> >
>> > -Berk
>> >
>> > On 8/19/06, Dominik Szczerba <domi@vision.ee.ethz.ch> wrote:
>> >>
>> >> Unlike the previous version, this one starts up fine. Interface is 
>> very
>> >> promising, but the whole thing is not stable, strange things keep
>> >> happening (like some GL trash remains after deleting all actors). 
>> Also,
>> >> lots of functionality from the Tk version is missing.
>> >> Thanks & regards,
>> >> DS
>> >>
>> >> Jack Gundrum wrote:
>> >> > Just downloaded the 2.9.2 alpha vesion and WOW - very nice 
>> interface.
>> >> > Found almost everything  but  were you switch  display
>> >> > mode to volume rendering ect.
>> >> >
>> >> >
>> >> > _______________________________________________
>> >> > ParaView mailing list
>> >> > ParaView@paraview.org
>> >> > http://www.paraview.org/mailman/listinfo/paraview
>> >>
>> >> --
>> >> Dominik Szczerba, Ph.D.
>> >> Computer Vision Lab CH-8092 Zurich
>> >> http://www.vision.ee.ethz.ch/~domi
>> >> _______________________________________________
>> >> ParaView mailing list
>> >> ParaView@paraview.org
>> >> http://www.paraview.org/mailman/listinfo/paraview
>> >>
>> >
>>
>> -- 
>> Dominik Szczerba, Ph.D.
>> Computer Vision Lab CH-8092 Zurich
>> http://www.vision.ee.ethz.ch/~domi
>>
> 

-- 
Dominik Szczerba, Ph.D.
Computer Vision Lab CH-8092 Zurich
http://www.vision.ee.ethz.ch/~domi
From dave.demarle at kitware.com  Sat Aug 19 12:54:08 2006
From: dave.demarle at kitware.com (David E DeMarle)
Date: Sat Aug 19 16:54:49 2006
Subject: [Paraview] Can the process of buiding paraview be shortened?
In-Reply-To: <44E6777E.08829A.01976>
References: <44E6777E.08829A.01976>
Message-ID: <44E74230.4060002@kitware.com>

Hello,

I have not tried distcc or dmake so I can not comment. However, one
thing to try is turning on the BUILD_SHARED_LIBS flag in cmake. That
makes a world of difference in the compile time in my experience.

cheers
Dave DeMarle

Lijun Xie wrote:
> Hi all,
>
> I try to modify some code of paraview. However, the building time is too long. Each time after I modify some codes, I have to wait at least half an hour to see the effect. I have an 24 nodes linux cluster, so I think maybe it cab be accelerated by distributed and parallel compiling. However, I tried distcc and dmake, both failed when making paraview but successed on other common programs. I doubt CMake which paraview depends is a bit too complicated for these parallel compiling tools, is it? 
>
>
> 	
> Daniel
> 2006-08-19
>
>
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
>   

From rreis at aero.ist.utl.pt  Mon Aug 21 13:22:32 2006
From: rreis at aero.ist.utl.pt (Ricardo Reis)
Date: Mon Aug 21 13:22:36 2006
Subject: [Paraview] Paraview and DNS
Message-ID: <Pine.LNX.4.64.0608211822090.3547@localhost.localdomain>


   Hello

   I'm on the point of thinking in what output format to use for the 
visualization of DNS results arising from a plane jet simulation. I'll be 
using paraview but was wondering if anyone on the list was also a 
turbulence person and what type of data format would be using. 
Requirements are mostly a format for parallel data, with time data but 
retaining the mesh (which is structured for the case in question).

   Future work should be developing and enhancement of filters for DSN data 
processing so if anyone is interested I'll keep it posted. Code will off 
course be released for the community :)

   all the best,

   Ricardo Reis
From berk.geveci at gmail.com  Mon Aug 21 14:43:22 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Mon Aug 21 14:43:28 2006
Subject: [Paraview] Building 2.9 on PowerBook
In-Reply-To: <81616947-B78C-44C5-BFB8-D558D874F802@guardian72.com>
References: <81616947-B78C-44C5-BFB8-D558D874F802@guardian72.com>
Message-ID: <a2ab21560608211143i5db18c0dpa3656634993cc4b2@mail.gmail.com>

Oops. It seems like I released the snapshot on a day when vtkByteSwap was
broken for big-endian machines. The next snapshot should be fine.

-Berk

On 8/18/06, Rick Wagner <guardian72@guardian72.com> wrote:
>
> Hi,
>
> Well, this seemed like a good time to try out the new release, and
> here's what I got:
>
> [  1%] Building CXX object VTK/Common/CMakeFiles/vtkCommon.dir/
> vtkByteSwap.o
> /Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/
> vtkByteSwap.cxx: In function 'void vtkByteSwapLE(T*) [with T = float]':
> /Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/
> vtkByteSwap.cxx:225:   instantiated from here
> /Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/
> vtkByteSwap.cxx:160: error: no matching function for call to
> 'vtkByteSwapper<4ul>:
> :Swap(float*&)'
>
> Blah, blah, blah. This repeat in various forms for every datatype,
> and then, appropriately, dies.
>
> I suspect this may be an issue with the fact that my laptop is
> PowerPC. I couldn't find a configuration flag under ccmake, and I
> don't of any special flags to use this time. I tried defining
> VTK_WORDS_BIGENDIAN, but according to the compiler, that was already
> defined.
>
> I'm very glad to hear (read) that some of the developers at Kitware
> are using Macs, and hopefully someone on the list will have some
> pointers to get me past this.
>
> Thanks,
> Rick
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060821/bbe032a6/attachment.html
From guardian72 at guardian72.com  Mon Aug 21 15:08:31 2006
From: guardian72 at guardian72.com (Rick Wagner)
Date: Mon Aug 21 15:08:30 2006
Subject: [Paraview] Building 2.9 on PowerBook
In-Reply-To: <a2ab21560608211143i5db18c0dpa3656634993cc4b2@mail.gmail.com>
References: <81616947-B78C-44C5-BFB8-D558D874F802@guardian72.com>
	<a2ab21560608211143i5db18c0dpa3656634993cc4b2@mail.gmail.com>
Message-ID: <A2576167-2CC0-4B44-AB71-413EF154D160@guardian72.com>

OK, I look forward to trying it out.

--Rick

On Aug 21, 2006, at 11:43 AM, Berk Geveci wrote:

> Oops. It seems like I released the snapshot on a day when  
> vtkByteSwap was broken for big-endian machines. The next snapshot  
> should be fine.
>
> -Berk
>
> On 8/18/06, Rick Wagner <guardian72@guardian72.com> wrote:
> Hi,
>
> Well, this seemed like a good time to try out the new release, and
> here's what I got:
>
> [  1%] Building CXX object VTK/Common/CMakeFiles/vtkCommon.dir/
> vtkByteSwap.o
> /Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/
> vtkByteSwap.cxx: In function 'void vtkByteSwapLE(T*) [with T =  
> float]':
> /Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/
> vtkByteSwap.cxx:225:   instantiated from here
> /Users/rpwagner/packages/ParaView3/ParaView2-9-August/VTK/Common/
> vtkByteSwap.cxx:160: error: no matching function for call to
> 'vtkByteSwapper<4ul>:
> :Swap(float*&)'
>
> Blah, blah, blah. This repeat in various forms for every datatype,
> and then, appropriately, dies.
>
> I suspect this may be an issue with the fact that my laptop is
> PowerPC. I couldn't find a configuration flag under ccmake, and I
> don't of any special flags to use this time. I tried defining
> VTK_WORDS_BIGENDIAN, but according to the compiler, that was already
> defined.
>
> I'm very glad to hear (read) that some of the developers at Kitware
> are using Macs, and hopefully someone on the list will have some
> pointers to get me past this.
>
> Thanks,
> Rick
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060821/6fbab9d2/attachment.htm
From david.c.gregory at navy.mil  Tue Aug 22 09:26:27 2006
From: david.c.gregory at navy.mil (Gregory, David C CIV NSWCDL-B55)
Date: Tue Aug 22 09:26:39 2006
Subject: [Paraview] spcth_interface.c
In-Reply-To: <44D7AC07.6010502@kitware.com>
Message-ID: <8D6309F95A065249918E4B5FA1A45E1421E1DF@naeanrfkez03>

Andy, thanks for the info.  I don't have anything to share.  However, I
can tell you that we've had several people using paraview with 7.1 spcth
files for quite a while now.  Everything has seemed to work fine so far.
We do have a feature request however.  When using the extract cth parts
filter, it would be nice if the fixed 0.5 volume fraction number were
user-configurable.   Thin shells often don't show up nicely with a
VF=0.5.

On another note, I can tell you that the C code in Utilities/SPCTH does
NOT work with 7.1 files.   I'm not sure why.  It works perfectly with
7.0 files as far as I can tell.

Thanks for all the hard work.

-David

-----Original Message-----
From: Andy Cedilnik [mailto:andy.cedilnik@kitware.com] 
Sent: Monday, August 07, 2006 5:09 PM
To: Gregory, David C CIV NSWCDL-B55
Cc: paraview@paraview.org
Subject: Re: [Paraview] spcth_interface.c


Hi David,

I rewrote spcth code and is now in ParaView 
Servers/Filters/vtkSpyPlotReader.cxx. It should be able to read CTH7.0 
files, but if you have 7.1 files you could share, we can verify that it 
will read them.

       Andy

Gregory, David C CIV NSWCDL-B55 wrote:
> Please disregard.   My novice C skills have embarrassed me again.
>  
> -David
>
>     -----Original Message-----
>     *From:* paraview-bounces+david.c.gregory=navy.mil@paraview.org
>     [mailto:paraview-bounces+david.c.gregory=navy.mil@paraview.org]
>     *On Behalf Of *Gregory, David C CIV NSWCDL-B55
>     *Sent:* Monday, August 07, 2006 1:55 PM
>     *To:* paraview@paraview.org
>     *Subject:* [Paraview] spcth_interface.c
>
>     Hello All-
>      
>     I was wondering if there was an knowledge of the SpyMaster(SPCTH)
>     API which lives in the paraview/Utilities/SPCTH folder?  Is this
>     code still used as part of the spcth filter in Paraview?
>      
>     I've been trying to use the code to read both CTH7.0 and CTH7.1
>     files and am having trouble. Most the header info (block
>     dimensions, field variable descriptions, etc.) come through just
>     fine.  However, the field data itself seems to be garbage.
>      
>     I was wondering if this code is dependant upon a certain version
>     of the SPCTH file?  Is the developer of this particular bit of
>     code on the ailing list?
>      
>     Thanks
>      
>     -David
>      
>      
>     David C. Gregory
>     NSWC Dahlgren
>     Weapons Lethality and Effectiveness Branch - G24
>     17320 Dahlgren Road
>     Dahlgren, VA  22448
>     540-653-0424
>      
>
> ----------------------------------------------------------------------
> --
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org 
> http://www.paraview.org/mailman/listinfo/paraview
>   
From Stephane.Montesino at hmg.inpg.fr  Tue Aug 22 12:13:40 2006
From: Stephane.Montesino at hmg.inpg.fr (=?ISO-8859-1?Q?St=E9phane_Mont=E9sino?=)
Date: Tue Aug 22 12:10:56 2006
Subject: [Paraview] Paraview and DNS 
Message-ID: <44EB2D34.5090506@hmg.inpg.fr>

Hi  Ricardo,

I'm using Ensight Gold File format (fortran routines) with paraview to 
study Electro-Magnetic Turblence Control. in a channel flow.

You can see what can be done with paraview and this format on

ftp://ftp.legi.hmg.inpg.fr/pub/MONTESINO_Stephane/visu/

-- 
Stephane MONTESINO

PhD Student                     tel:+33 4 76 82 52 91
LEGI                            fax:+33 4 76 82 70 22
BP 53
38041 Grenoble Cedex            email: stephane.montesino@hmg.inpg.fr
France                          http://www.legi.hmg.inpg.fr 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Stephane.Montesino.vcf
Type: text/x-vcard
Size: 308 bytes
Desc: not available
Url : http://public.kitware.com/pipermail/paraview/attachments/20060822/a411b30d/Stephane.Montesino.vcf
From Christian.Wohlschlager at jku.at  Wed Aug 23 08:53:24 2006
From: Christian.Wohlschlager at jku.at (Christian Wohlschlager)
Date: Wed Aug 23 08:53:48 2006
Subject: [Paraview] cannot connect server and client
Message-ID: <44EC6BE3.0548.0038.3@jku.at>

** Reply Requested When Convenient **

Hello !

I've paraview 2.4 pvserver and same on another computer. they cannot
connect , because they say version mismatch  -->   is impossible  -V
gives out they same Version number.

if i have only one computer pvserver and pvclient works good . How Come
?

thank you

christian 
From paul.adams.jr at gmail.com  Wed Aug 23 09:37:32 2006
From: paul.adams.jr at gmail.com (Paul Adams)
Date: Wed Aug 23 09:37:36 2006
Subject: [Paraview] cannot connect server and client
In-Reply-To: <44EC6BE3.0548.0038.3@jku.at>
References: <44EC6BE3.0548.0038.3@jku.at>
Message-ID: <1e472b890608230637n6827d9a2od92ce46a41b75328@mail.gmail.com>

Paraview is very finicky about version numbers.  We have tried to run
Paraview Server at 2.4.3 and Paraview Client at 2.4.4 and it fails.  For me
at least, the command "paraview -V" is worthless as it returns only "
ParaView2.4" and not the revision (or third) digit.

Paul Adams
Scientific Visualization Lead
ERDC MSRC - Vicksburg, MS
On 8/23/06, Christian Wohlschlager <Christian.Wohlschlager@jku.at> wrote:
>
> ** Reply Requested When Convenient **
>
> Hello !
>
> I've paraview 2.4 pvserver and same on another computer. they cannot
> connect , because they say version mismatch  -->   is impossible  -V
> gives out they same Version number.
>
> if i have only one computer pvserver and pvclient works good . How Come
> ?
>
> thank you
>
> christian
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060823/0ad93db1/attachment.htm
From pjb9508 at vashon.ca.boeing.com  Wed Aug 23 11:55:44 2006
From: pjb9508 at vashon.ca.boeing.com (Peter J. Bismuti)
Date: Wed Aug 23 11:55:55 2006
Subject: [Paraview] cannot connect server and client
In-Reply-To: <44EC6BE3.0548.0038.3@jku.at>
References: <44EC6BE3.0548.0038.3@jku.at>
Message-ID: <200608230855.45205.pjb9508@vashon.ca.boeing.com>

Just for grins, perhaps try making the connection in reverse...?

> ** Reply Requested When Convenient **
>
> Hello !
>
> I've paraview 2.4 pvserver and same on another computer. they cannot
> connect , because they say version mismatch  -->   is impossible  -V
> gives out they same Version number.
>
> if i have only one computer pvserver and pvclient works good . How Come
> ?
>
> thank you
>
> christian
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview

-- 


Peter Bismuti
Boeing Commercial Airline Division
Shared Services
Renton, WA
(425) 234-0873
From ramaya at femagsoft.com  Wed Aug 23 13:49:41 2006
From: ramaya at femagsoft.com (Rajesh Ramaya Selvaraj)
Date: Wed Aug 23 13:49:57 2006
Subject: [Paraview] XDMF paraview 
Message-ID: <44EC9535.8040602@femagsoft.com>

Hello Amy
   Can you please tell me where I can find more information and example
about using XDMF and HDF5 format to visialize using paraview. I found
example in ICE website http://www.arl.hpc.mil/ice/XdmfUser.html. Does
the user manual provides more information?

Thanks
Rajesh

From juliolatengo at gmail.com  Thu Aug 24 05:13:49 2006
From: juliolatengo at gmail.com (Jul D)
Date: Thu Aug 24 05:14:18 2006
Subject: [Paraview] Cube axes ticks
Message-ID: <f4b2fcda0608240213u1c741209p2f805612572b31c7@mail.gmail.com>

Hello,

I'm a new Paraview user! I have a trivial question that I did not manage to
solve on the Internet.

Does anybody know how to change (increase) the number of tick marks (and
levels) on cube axes?

Actually, I'd like to plot 'tecplot like' axes, and two tick marks are not
enough.

Thanks a lot for your answers.

-- 
Julien
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060824/119d6e88/attachment.htm
From clarke at arl.army.mil  Thu Aug 24 08:53:14 2006
From: clarke at arl.army.mil (Clarke, Jerry (Civ, ARL/CISD))
Date: Thu Aug 24 08:53:27 2006
Subject: [Paraview] XDMF paraview
Message-ID: <D9A8D98DDC682044806D5B46AF5C11E2039B26@ARLABML01.DS.ARL.ARMY.MIL>

Rajesh,

There are several other examples on the Web site.
Also there are some XDMF examples in the ParaView tree
(.../ParaView/Data/Data/Iron Xdmf). Is there something specific that
you're looking for ?

-----Original Message-----
From: paraview-bounces+clarke=arl.army.mil@paraview.org
[mailto:paraview-bounces+clarke=arl.army.mil@paraview.org] On Behalf Of
Rajesh Ramaya Selvaraj
Sent: Wednesday, August 23, 2006 1:50 PM
To: paraview@paraview.org
Subject: [Paraview] XDMF paraview

Hello Amy
   Can you please tell me where I can find more information and example
about using XDMF and HDF5 format to visialize using paraview. I found
example in ICE website http://www.arl.hpc.mil/ice/XdmfUser.html. Does
the user manual provides more information?

Thanks
Rajesh

_______________________________________________
ParaView mailing list
ParaView@paraview.org
http://www.paraview.org/mailman/listinfo/paraview
From klug at ucla.edu  Thu Aug 24 14:32:18 2006
From: klug at ucla.edu (William Klug)
Date: Thu Aug 24 14:32:56 2006
Subject: [Paraview] "Save View Image" crashes X on my Intel Mac
Message-ID: <FA18FB57-09BE-41C6-B090-71449184CFB6@ucla.edu>

Hi all,
I recently switched from a PowerBook to a new Intel-based  
MacBookPro.  Using the compile options specified in the FAQ, ParaView  
compiles and runs just fine on the intel mac, but whenever I try to  
use the "Save View Image" command, X11 crashes.  I've tried stable  
releases ParaView-2.2, ParaView-2.4, and the cvs distribution, and  
all have the same problem.  As soon as I click "Save" after entering  
a file name, ParaView and X11 both die, leaving the message

   X connection to :0.0 broken (explicit kill or server shutdown).

on the command line.  I'm guessing that X is crashing and taking  
ParaView with it, but I'm not sure what's causing the problem.  I've  
looked for clues in the mailing list archives, but haven't seen any  
mention of quite this sort of behavior.  Does anyone have any ideas?

Thanks,
Bill

=============================================
William S. Klug, Assistant Professor
UCLA Mechanical & Aerospace Engineering
48-121B Engineering IV, Los Angeles, CA 90095
Tel: (310) 794-7347  Fax: (310) 206-4830

From berk.geveci at gmail.com  Thu Aug 24 14:59:18 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Thu Aug 24 14:59:39 2006
Subject: [Paraview] "Save View Image" crashes X on my Intel Mac
In-Reply-To: <FA18FB57-09BE-41C6-B090-71449184CFB6@ucla.edu>
References: <FA18FB57-09BE-41C6-B090-71449184CFB6@ucla.edu>
Message-ID: <a2ab21560608241159h5be5615dh3dca0750e61fe2d5@mail.gmail.com>

This has come up several time on the mailing list actually. We will track it
down.

-Berk

On 8/24/06, William Klug <klug@ucla.edu> wrote:
>
> Hi all,
> I recently switched from a PowerBook to a new Intel-based
> MacBookPro.  Using the compile options specified in the FAQ, ParaView
> compiles and runs just fine on the intel mac, but whenever I try to
> use the "Save View Image" command, X11 crashes.  I've tried stable
> releases ParaView-2.2, ParaView-2.4, and the cvs distribution, and
> all have the same problem.  As soon as I click "Save" after entering
> a file name, ParaView and X11 both die, leaving the message
>
>    X connection to :0.0 broken (explicit kill or server shutdown).
>
> on the command line.  I'm guessing that X is crashing and taking
> ParaView with it, but I'm not sure what's causing the problem.  I've
> looked for clues in the mailing list archives, but haven't seen any
> mention of quite this sort of behavior.  Does anyone have any ideas?
>
> Thanks,
> Bill
>
> =============================================
> William S. Klug, Assistant Professor
> UCLA Mechanical & Aerospace Engineering
> 48-121B Engineering IV, Los Angeles, CA 90095
> Tel: (310) 794-7347  Fax: (310) 206-4830
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060824/17fb1228/attachment.htm
From jkoski11 at comcast.net  Thu Aug 24 15:08:30 2006
From: jkoski11 at comcast.net (Joe Koski)
Date: Thu Aug 24 15:10:22 2006
Subject: [Paraview] "Save View Image" crashes X on my Intel Mac
In-Reply-To: <FA18FB57-09BE-41C6-B090-71449184CFB6@ucla.edu>
Message-ID: <C113554E.759D%jkoski11@comcast.net>

on 8/24/06 12:32 PM, William Klug at klug@ucla.edu wrote:

> Hi all,
> I recently switched from a PowerBook to a new Intel-based
> MacBookPro.  Using the compile options specified in the FAQ, ParaView
> compiles and runs just fine on the intel mac, but whenever I try to
> use the "Save View Image" command, X11 crashes.  I've tried stable
> releases ParaView-2.2, ParaView-2.4, and the cvs distribution, and
> all have the same problem.  As soon as I click "Save" after entering
> a file name, ParaView and X11 both die, leaving the message
> 
>    X connection to :0.0 broken (explicit kill or server shutdown).
> 
> on the command line.  I'm guessing that X is crashing and taking
> ParaView with it, but I'm not sure what's causing the problem.  I've
> looked for clues in the mailing list archives, but haven't seen any
> mention of quite this sort of behavior.  Does anyone have any ideas?
> 
> Thanks,
> Bill
> 
Bill,

When all else fails, there is an Apple X11-users mail list that tackles such
questions. An Apple person monitors the list, but is not easy to identify.
You can sign up for the list at

  http://lists.apple.com/

Joe


From klug at ucla.edu  Thu Aug 24 16:05:09 2006
From: klug at ucla.edu (William Klug)
Date: Thu Aug 24 16:06:09 2006
Subject: [Paraview] "Save View Image" crashes X on my Intel Mac
In-Reply-To: <a2ab21560608241159h5be5615dh3dca0750e61fe2d5@mail.gmail.com>
References: <FA18FB57-09BE-41C6-B090-71449184CFB6@ucla.edu>
	<a2ab21560608241159h5be5615dh3dca0750e61fe2d5@mail.gmail.com>
Message-ID: <AB02B240-7334-440C-A898-B0A8D97ADA8B@ucla.edu>

I did find the thread titled "PV crashed when saving image" from  
June, where the problem was on Linux (Fedora Core 5) and seemed to be  
resolved by a patch added to the cvs distribution.  Berk, you had  
mentioned in this post:
   http://public.kitware.com/pipermail/paraview/2006-June/003294.html
that there's a line that could be commented out to work around the  
problem.  Can you point me to this line?

Also, Joe, thanks for the head's up about the Apple X11-users list.   
I'll check that out too.

Bill

On Aug 24, 2006, at 11:59 AM, Berk Geveci wrote:

> This has come up several time on the mailing list actually. We will  
> track it down.
>
> -Berk
>
> On 8/24/06, William Klug < klug@ucla.edu> wrote:Hi all,
> I recently switched from a PowerBook to a new Intel-based
> MacBookPro.  Using the compile options specified in the FAQ, ParaView
> compiles and runs just fine on the intel mac, but whenever I try to
> use the "Save View Image" command, X11 crashes.  I've tried stable
> releases ParaView-2.2, ParaView-2.4, and the cvs distribution, and
> all have the same problem.  As soon as I click "Save" after entering
> a file name, ParaView and X11 both die, leaving the message
>
>    X connection to :0.0 broken (explicit kill or server shutdown).
>
> on the command line.  I'm guessing that X is crashing and taking
> ParaView with it, but I'm not sure what's causing the problem.  I've
> looked for clues in the mailing list archives, but haven't seen any
> mention of quite this sort of behavior.  Does anyone have any ideas?
>
> Thanks,
> Bill
>
> =============================================
> William S. Klug, Assistant Professor
> UCLA Mechanical & Aerospace Engineering
> 48-121B Engineering IV, Los Angeles, CA 90095
> Tel: (310) 794-7347  Fax: (310) 206-4830
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>

From imikejackson at gmail.com  Thu Aug 24 16:25:46 2006
From: imikejackson at gmail.com (Mike Jackson)
Date: Thu Aug 24 16:28:23 2006
Subject: [Paraview] "Save View Image" crashes X on my Intel Mac
In-Reply-To: <AB02B240-7334-440C-A898-B0A8D97ADA8B@ucla.edu>
Message-ID: <C113838A.3974%imikejackson@gmail.com>

On 8/24/06 4:05 PM, "William Klug" <klug@ucla.edu> wrote:

> I did find the thread titled "PV crashed when saving image" from
> June, where the problem was on Linux (Fedora Core 5) and seemed to be
> resolved by a patch added to the cvs distribution.  Berk, you had
> mentioned in this post:
>    http://public.kitware.com/pipermail/paraview/2006-June/003294.html
> that there's a line that could be commented out to work around the
> problem.  Can you point me to this line?
> 
> Also, Joe, thanks for the head's up about the Apple X11-users list.
> I'll check that out too.
> 
> Bill
> 
> On Aug 24, 2006, at 11:59 AM, Berk Geveci wrote:
> 
>> This has come up several time on the mailing list actually. We will
>> track it down.
>> 
>> -Berk
>> 
>> On 8/24/06, William Klug < klug@ucla.edu> wrote:Hi all,
>> I recently switched from a PowerBook to a new Intel-based
>> MacBookPro.  Using the compile options specified in the FAQ, ParaView
>> compiles and runs just fine on the intel mac, but whenever I try to
>> use the "Save View Image" command, X11 crashes.  I've tried stable
>> releases ParaView-2.2, ParaView-2.4, and the cvs distribution, and
>> all have the same problem.  As soon as I click "Save" after entering
>> a file name, ParaView and X11 both die, leaving the message
>> 
>>    X connection to :0.0 broken (explicit kill or server shutdown).
>> 
>> on the command line.  I'm guessing that X is crashing and taking
>> ParaView with it, but I'm not sure what's causing the problem.  I've
>> looked for clues in the mailing list archives, but haven't seen any
>> mention of quite this sort of behavior.  Does anyone have any ideas?
>> 
>> Thanks,
>> Bill
>> 
>> =============================================
>> William S. Klug, Assistant Professor
>> UCLA Mechanical & Aerospace Engineering
>> 48-121B Engineering IV, Los Angeles, CA 90095
>> Tel: (310) 794-7347  Fax: (310) 206-4830
>> 

This was on the VTK users mailing list:


Have you tried what I suggested? Commenting out the offscreen lines? It
would be helpful in tracing the problem. I didn't get around to compiling
ParaView 2 on my new Mac yet. I should get around to it next week or so.

-Berk

On 8/23/06, Stewart.Dickson@noaa.gov <Stewart.Dickson@noaa.gov > wrote:
Just to complain...

This bug crashes X11 outright on MacOS-X (Darwin) 10.4.7

Crash log attached.

[Apple has a handy-dandy bug reporter which fires off every time an
application goes down.  I've been using this lots.]

Thanks,

-Stewart Dickson
Principal Scientific Subject Matter Expert in Visualization
NOAA National Climatic Data Center


Berk Geveci berk.geveci at gmail.com
Mon Apr 10 12:27:01 EDT 2006

    * Previous message: [Paraview] Crash Save View Image
    * Next message: [Paraview] Crash Save View Image
    * Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]

Try editing Servers/ServerManager/vtkSMRenderModuleProxy.cxx and
commenting out this line (around line 1112)
  this->GetRenderWindow()->SetOffScreenRendering(1);
and this line:
  this->GetRenderWindow()->SetOffScreenRendering(0);
around line 1129.
I have seen this problem before. I think it is due to an OpenGL
driver/implementation bug.

-Berk

On 4/10/06, Kevin H. Hobbs < kevin.hobbs.1 at ohiou.edu> wrote:
> I've been experiencing a crash when I try to save an image from
> Paraview.  All that's required is for me to open Paraview, select "Save
> View Image" from the file menu and enter a file name. The Paraview
> window vanishes and the following is printed to the terminal:
>
> X Error of failed request:  GLXBadContext
>   Major opcode of failed request:  144 (GLX)
>   Minor opcode of failed request:  5 (X_GLXMakeCurrent)
>   Serial number of failed request:  31500
>   Current serial number in output stream:  31500
>
> I'm using paraview from today's CVS. This computer is running Fedora
> Core 5.
>
> 'uname -a' says
>
> Linux gargon.hooperlab 2.6.15-1.2054_FC5 #1 SMP Tue Mar 14 15:48:20 EST
> 2006 x86_64 x86_64 x86_64 GNU/Linux
>
> I've made a bug report here:
>
> http://www.vtk.org/Bug/bug.php?op=show&bugid=3116&pos=1
>
>
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2.2 (GNU/Linux)
>
> iD8DBQBEOoLrqBtEuW+gRPERAk3+AJ9PlO+sGJr9cYiMGmrYmr0wVz/D7QCfTckn
> L3DOQZ7iASegXX2m/WJ2Cho=
> =bfXg
> -----END PGP SIGNATURE-----
>
>
> _______________________________________________
> ParaView mailing list
> ParaView at paraview.org
> http://www.paraview.org/mailman/listinfo/paraview








_______________________________________________
This is the private VTK discussion list.
Please keep messages on-topic. Check the FAQ at:
http://www.vtk.org/Wiki/VTK_FAQ
Follow this link to subscribe/unsubscribe:
http://www.vtk.org/mailman/listinfo/vtkusers





--------
Mike Jackson
imikejackson <at> gmail <dot>?com





From klug at ucla.edu  Thu Aug 24 17:02:42 2006
From: klug at ucla.edu (William Klug)
Date: Thu Aug 24 17:03:25 2006
Subject: [Paraview] "Save View Image" crashes X on my Intel Mac
In-Reply-To: <C113838A.3974%imikejackson@gmail.com>
References: <C113838A.3974%imikejackson@gmail.com>
Message-ID: <22689F78-EF3A-44BA-B1CC-C50B7B280F91@ucla.edu>

Great!  Commenting out the SetOffScreenRendering calls works.  In the  
future I'll check the vtk-users list too.

Thanks for your help!

Bill

On Aug 24, 2006, at 1:25 PM, Mike Jackson wrote:

> On 8/24/06 4:05 PM, "William Klug" <klug@ucla.edu> wrote:
>
>> I did find the thread titled "PV crashed when saving image" from
>> June, where the problem was on Linux (Fedora Core 5) and seemed to be
>> resolved by a patch added to the cvs distribution.  Berk, you had
>> mentioned in this post:
>>    http://public.kitware.com/pipermail/paraview/2006-June/003294.html
>> that there's a line that could be commented out to work around the
>> problem.  Can you point me to this line?
>>
>> Also, Joe, thanks for the head's up about the Apple X11-users list.
>> I'll check that out too.
>>
>> Bill
>>
>> On Aug 24, 2006, at 11:59 AM, Berk Geveci wrote:
>>
>>> This has come up several time on the mailing list actually. We will
>>> track it down.
>>>
>>> -Berk
>>>
>>> On 8/24/06, William Klug < klug@ucla.edu> wrote:Hi all,
>>> I recently switched from a PowerBook to a new Intel-based
>>> MacBookPro.  Using the compile options specified in the FAQ,  
>>> ParaView
>>> compiles and runs just fine on the intel mac, but whenever I try to
>>> use the "Save View Image" command, X11 crashes.  I've tried stable
>>> releases ParaView-2.2, ParaView-2.4, and the cvs distribution, and
>>> all have the same problem.  As soon as I click "Save" after entering
>>> a file name, ParaView and X11 both die, leaving the message
>>>
>>>    X connection to :0.0 broken (explicit kill or server shutdown).
>>>
>>> on the command line.  I'm guessing that X is crashing and taking
>>> ParaView with it, but I'm not sure what's causing the problem.  I've
>>> looked for clues in the mailing list archives, but haven't seen any
>>> mention of quite this sort of behavior.  Does anyone have any ideas?
>>>
>>> Thanks,
>>> Bill
>>>
>>> =============================================
>>> William S. Klug, Assistant Professor
>>> UCLA Mechanical & Aerospace Engineering
>>> 48-121B Engineering IV, Los Angeles, CA 90095
>>> Tel: (310) 794-7347  Fax: (310) 206-4830
>>>
>
> This was on the VTK users mailing list:
>
>
> Have you tried what I suggested? Commenting out the offscreen  
> lines? It
> would be helpful in tracing the problem. I didn't get around to  
> compiling
> ParaView 2 on my new Mac yet. I should get around to it next week  
> or so.
>
> -Berk
>
> On 8/23/06, Stewart.Dickson@noaa.gov <Stewart.Dickson@noaa.gov >  
> wrote:
> Just to complain...
>
> This bug crashes X11 outright on MacOS-X (Darwin) 10.4.7
>
> Crash log attached.
>
> [Apple has a handy-dandy bug reporter which fires off every time an
> application goes down.  I've been using this lots.]
>
> Thanks,
>
> -Stewart Dickson
> Principal Scientific Subject Matter Expert in Visualization
> NOAA National Climatic Data Center
>
>
> Berk Geveci berk.geveci at gmail.com
> Mon Apr 10 12:27:01 EDT 2006
>
>     * Previous message: [Paraview] Crash Save View Image
>     * Next message: [Paraview] Crash Save View Image
>     * Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>
> Try editing Servers/ServerManager/vtkSMRenderModuleProxy.cxx and
> commenting out this line (around line 1112)
>   this->GetRenderWindow()->SetOffScreenRendering(1);
> and this line:
>   this->GetRenderWindow()->SetOffScreenRendering(0);
> around line 1129.
> I have seen this problem before. I think it is due to an OpenGL
> driver/implementation bug.
>
> -Berk
>
> On 4/10/06, Kevin H. Hobbs < kevin.hobbs.1 at ohiou.edu> wrote:
>> I've been experiencing a crash when I try to save an image from
>> Paraview.  All that's required is for me to open Paraview, select  
>> "Save
>> View Image" from the file menu and enter a file name. The Paraview
>> window vanishes and the following is printed to the terminal:
>>
>> X Error of failed request:  GLXBadContext
>>   Major opcode of failed request:  144 (GLX)
>>   Minor opcode of failed request:  5 (X_GLXMakeCurrent)
>>   Serial number of failed request:  31500
>>   Current serial number in output stream:  31500
>>
>> I'm using paraview from today's CVS. This computer is running Fedora
>> Core 5.
>>
>> 'uname -a' says
>>
>> Linux gargon.hooperlab 2.6.15-1.2054_FC5 #1 SMP Tue Mar 14  
>> 15:48:20 EST
>> 2006 x86_64 x86_64 x86_64 GNU/Linux
>>
>> I've made a bug report here:
>>
>> http://www.vtk.org/Bug/bug.php?op=show&bugid=3116&pos=1
>>
>>
>>
>> -----BEGIN PGP SIGNATURE-----
>> Version: GnuPG v1.4.2.2 (GNU/Linux)
>>
>> iD8DBQBEOoLrqBtEuW+gRPERAk3+AJ9PlO+sGJr9cYiMGmrYmr0wVz/D7QCfTckn
>> L3DOQZ7iASegXX2m/WJ2Cho=
>> =bfXg
>> -----END PGP SIGNATURE-----
>>
>>
>> _______________________________________________
>> ParaView mailing list
>> ParaView at paraview.org
>> http://www.paraview.org/mailman/listinfo/paraview
>
>
>
>
>
>
>
>
> _______________________________________________
> This is the private VTK discussion list.
> Please keep messages on-topic. Check the FAQ at:
> http://www.vtk.org/Wiki/VTK_FAQ
> Follow this link to subscribe/unsubscribe:
> http://www.vtk.org/mailman/listinfo/vtkusers
>
>
>
>
>
> --------
> Mike Jackson
> imikejackson <at> gmail <dot> com
>
>
>
>
>

From wkoegle at ca.sandia.gov  Mon Aug 28 17:28:20 2006
From: wkoegle at ca.sandia.gov (Wendy Doyle)
Date: Mon Aug 28 17:28:26 2006
Subject: [Paraview] Problems with Exodus file
Message-ID: <44F35FF4.5030306@ca.sandia.gov>

Sometime between 6/22 and 6/26 I lost the ability to open
Exodus datasets with "bar" elements (e.g. lines). When I
try, the machine beeps like crazy and prints lots of this:

vtkOpenGLPainterDeviceAdapter: Unsupported attribute index: 5

I poked around in the code but couldn't make heads or tails
of it. It happens in the adapter's "SendAttribute" call.
Anyone have suggestions? I can send you the file
that is having problems (only 20k) if you'd like to try it.

Thanks,
Wendy


-- 
Wendy (Koegler) Doyle
Sandia National Laboratories     925-294-4877
P.O. Box 969, MS 9152            925-294-6588 (fax)
Livermore, CA 94550              wkoegle@ca.sandia.gov

From kmorel at sandia.gov  Mon Aug 28 17:53:48 2006
From: kmorel at sandia.gov (Moreland, Kenneth)
Date: Mon Aug 28 17:53:59 2006
Subject: [Paraview] Problems with Exodus file
In-Reply-To: <44F35FF4.5030306@ca.sandia.gov>
Message-ID: <7137A9E1D1768C44BE7DF11D30FAB32302C4E5AA@ES21SNLNT.srn.sandia.gov>

I've seen this problem off and on since global ids were added to VTK.  I
believe the problem is that the painters pass data set attributes to the
rendering system as varying variables.  Of course, there is no OpenGL
analog for a global id, so if those are not stripped off by the time the
data reaches the end of the painter chain, an error occurs.

I think the correct fix for this problem is to painter that strips off
any attributes that are not applicable to rendering (vectors, tensors,
ids, etc.) and then add this painter to the internal chain in
vtkDefaultPainter.  Utkarsh, do you want to take care of this?

-Ken

> -----Original Message-----
> From: paraview-bounces+kmorel=sandia.gov@paraview.org
[mailto:paraview-
> bounces+kmorel=sandia.gov@paraview.org] On Behalf Of Wendy Doyle
> Sent: Monday, August 28, 2006 3:28 PM
> To: paraview@paraview.org
> Subject: [Paraview] Problems with Exodus file
> 
> Sometime between 6/22 and 6/26 I lost the ability to open
> Exodus datasets with "bar" elements (e.g. lines). When I
> try, the machine beeps like crazy and prints lots of this:
> 
> vtkOpenGLPainterDeviceAdapter: Unsupported attribute index: 5
> 
> I poked around in the code but couldn't make heads or tails
> of it. It happens in the adapter's "SendAttribute" call.
> Anyone have suggestions? I can send you the file
> that is having problems (only 20k) if you'd like to try it.
> 
> Thanks,
> Wendy
> 
> 
> --
> Wendy (Koegler) Doyle
> Sandia National Laboratories     925-294-4877
> P.O. Box 969, MS 9152            925-294-6588 (fax)
> Livermore, CA 94550              wkoegle@ca.sandia.gov
> 
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview


From pjb9508 at vashon.ca.boeing.com  Tue Aug 29 13:03:51 2006
From: pjb9508 at vashon.ca.boeing.com (Peter J. Bismuti)
Date: Tue Aug 29 13:04:02 2006
Subject: [Paraview] streamtrace filter not available?
Message-ID: <200608291003.51938.pjb9508@vashon.ca.boeing.com>

Hi, under what conditions will the streamtrace filter become available?  Do 
there have to be variables of particular names?  

Thanks
From berk.geveci at gmail.com  Tue Aug 29 13:12:19 2006
From: berk.geveci at gmail.com (Berk Geveci)
Date: Tue Aug 29 13:12:24 2006
Subject: [Paraview] streamtrace filter not available?
In-Reply-To: <200608291003.51938.pjb9508@vashon.ca.boeing.com>
References: <200608291003.51938.pjb9508@vashon.ca.boeing.com>
Message-ID: <a2ab21560608291012g4b87dd4dycffc2036c57cb8bd@mail.gmail.com>

I think the conditions are:
* vtkDataSet or vtkCompositeDataSet
* 3 component array

-Berk

On 8/29/06, Peter J. Bismuti <pjb9508@vashon.ca.boeing.com> wrote:
>
> Hi, under what conditions will the streamtrace filter become
> available?  Do
> there have to be variables of particular names?
>
> Thanks
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060829/4ca1ccf5/attachment.html
From amy.squillacote at kitware.com  Tue Aug 29 13:12:24 2006
From: amy.squillacote at kitware.com (Amy Squillacote)
Date: Tue Aug 29 13:12:36 2006
Subject: [Paraview] streamtrace filter not available?
In-Reply-To: <200608291003.51938.pjb9508@vashon.ca.boeing.com>
References: <200608291003.51938.pjb9508@vashon.ca.boeing.com>
Message-ID: <44F47578.6060904@kitware.com>

Hi Peter,

The Stream Tracer filter is available when your dataset has a 
3-component point-centered array.

- Amy

Peter J. Bismuti wrote:
> Hi, under what conditions will the streamtrace filter become available?  Do 
> there have to be variables of particular names?  
>
> Thanks
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>
>
>   

From amy.squillacote at kitware.com  Tue Aug 29 13:26:16 2006
From: amy.squillacote at kitware.com (Amy Squillacote)
Date: Tue Aug 29 13:26:23 2006
Subject: [Paraview] streamtrace filter not available?
In-Reply-To: <200608291021.14522.pjb9508@vashon.ca.boeing.com>
References: <200608291003.51938.pjb9508@vashon.ca.boeing.com>
	<44F47578.6060904@kitware.com>
	<200608291021.14522.pjb9508@vashon.ca.boeing.com>
Message-ID: <44F478B8.4020403@kitware.com>

Hi Peter,

Please keep the discussion on the ParaView mailing list.

Use the Calculator filter. Your function would look something like 
"u*iHat + v*jHat + w*kHat". Be sure that the Attribute Mode is set to 
Point Data.

- Amy

Peter J. Bismuti wrote:
> Is there a filter that lets you construct a  3-component point-centered array 
> from existing variables?  Say I'm given a dataset with "u","v","w", can I use 
> these to create an array? 
>
> Thanks
>
>   
>> The Stream Tracer filter is available when your dataset has a
>> 3-component point-centered array.
>>
>> - Amy
>>
>> Peter J. Bismuti wrote:
>>     
>>> Hi, under what conditions will the streamtrace filter become available? 
>>> Do there have to be variables of particular names?
>>>
>>> Thanks
>>> _______________________________________________
>>> ParaView mailing list
>>> ParaView@paraview.org
>>> http://www.paraview.org/mailman/listinfo/paraview
>>>       
>
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060829/866d242c/attachment.htm
From m.patel at medsch.ucl.ac.uk  Tue Aug 29 14:03:53 2006
From: m.patel at medsch.ucl.ac.uk (Patel, Manish (MedSch Medsch/Oncology))
Date: Tue Aug 29 14:04:02 2006
Subject: [Paraview] newbie question
Message-ID: <B96A8FF8CECA454AA36508656051DC01050EA2@medsch-2970.medsch.ucl.ac.uk>

Dear all,

I have just downloaded the precompiled version for Mac OS X but can't get Paraview application to run. I keep getting the follwing message:

dyld: Library not loaded: /usr/X11R6/lib/libGL.1.dylib
  Referenced from: /Users/mp/paraview-2.4.4-darwin-files/lib/paraview-2.4/paraview-real
  Reason: image not found
Trace/BPT trap
logout

I know i don't have the libGL.1.dylib file - in my X11R6/lib directory i have:

libXpm.4.11.dylib
libXpm.dylib


Should it be pointing to one of these instead? If so, how do i change that?

Cheers

mp.

From reinhard.afstuderen at gmail.com  Wed Aug 30 05:40:05 2006
From: reinhard.afstuderen at gmail.com (Reinhard Hameeteman)
Date: Wed Aug 30 05:40:23 2006
Subject: [Paraview] Create mesh of outline
Message-ID: <91345ba70608300240x4f6223b0j14701964cabf4a90@mail.gmail.com>

Hi all,

I am trying to get a mesh from 3 of the 6 planes that form the border
of an image. Actually I want exactly what is show by the "extract
subgrid or subsample" icon on the toolbar. This seems a trivial task,
but for a newbie like me it seems a hidden property.
Could anyone give me some clues?

Thanks,
Reinhard
From amagda at gmail.com  Wed Aug 30 09:58:45 2006
From: amagda at gmail.com (Adrian Magda)
Date: Wed Aug 30 09:58:49 2006
Subject: [Paraview] paraview file-formats
Message-ID: <6bb554800608300658l218f0759v139765d3ac3cc922@mail.gmail.com>

Hi all,

I use paraview to postprocess the results obtained with our home-made CFD
software using the VTK file format.

Due to the size of the files (even if i write binary) i need to split the
results in several files.

1 - It is necessary to write the geometry in each VTK file (for example one
contains the temp, other the vel & turbulence, other the species and so on)
? If i write a  different file for each property or group of flow
properties  it seems i can not  color a isosurface of a flow variable
according to another flow properties from another file (i.e. temp isosurface
with co2 concentrations)

2 - What file-type i need to use in order to write the geometry only once
and have the flow properties in different vtk files?

Thanks a lot

Adi

-- 
########################################

   Diplom. Eng Adrian Magda

   Institut f?r W?rme- und Brennstofftechnik
   Franz-Liszt-Stra?e 35
   38106 Braunschweig, Germany

   Telefon:  +49 -531 391-3031(office)
   Telefax:  +49 -531 391-5932

########################################
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://public.kitware.com/pipermail/paraview/attachments/20060830/fac4aaca/attachment.htm
From pjb9508 at vashon.ca.boeing.com  Wed Aug 30 12:23:52 2006
From: pjb9508 at vashon.ca.boeing.com (Peter J. Bismuti)
Date: Wed Aug 30 12:23:58 2006
Subject: [Paraview] Create mesh of outline
In-Reply-To: <91345ba70608300240x4f6223b0j14701964cabf4a90@mail.gmail.com>
References: <91345ba70608300240x4f6223b0j14701964cabf4a90@mail.gmail.com>
Message-ID: <200608300923.52102.pjb9508@vashon.ca.boeing.com>

Perhaps the  "clip" filter is what you're looking for.  You need to choose 
type "box" and select the "inside-out" button.  

> Hi all,
>
> I am trying to get a mesh from 3 of the 6 planes that form the border
> of an image. Actually I want exactly what is show by the "extract
> subgrid or subsample" icon on the toolbar. This seems a trivial task,
> but for a newbie like me it seems a hidden property.
> Could anyone give me some clues?
>
> Thanks,
> Reinhard
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview

-- 


Peter Bismuti
Boeing Commercial Airline Division
Shared Services
Renton, WA
(425) 234-0873
From wkoegle at ca.sandia.gov  Wed Aug 30 15:19:10 2006
From: wkoegle at ca.sandia.gov (Wendy Doyle)
Date: Wed Aug 30 15:19:16 2006
Subject: [Paraview] Problems with Exodus file
In-Reply-To: <7137A9E1D1768C44BE7DF11D30FAB32302C4E5AA@ES21SNLNT.srn.sandia.gov>
References: <7137A9E1D1768C44BE7DF11D30FAB32302C4E5AA@ES21SNLNT.srn.sandia.gov>
Message-ID: <44F5E4AE.3040800@ca.sandia.gov>

If someone could fix this, I'd be very very grateful.
I had submitted it to the kitware bug tracker --
bug #3454 -- if you want more details.

Thanks,
Wendy



Moreland, Kenneth wrote:
> I've seen this problem off and on since global ids were added to VTK.  I
> believe the problem is that the painters pass data set attributes to the
> rendering system as varying variables.  Of course, there is no OpenGL
> analog for a global id, so if those are not stripped off by the time the
> data reaches the end of the painter chain, an error occurs.
> 
> I think the correct fix for this problem is to painter that strips off
> any attributes that are not applicable to rendering (vectors, tensors,
> ids, etc.) and then add this painter to the internal chain in
> vtkDefaultPainter.  Utkarsh, do you want to take care of this?
> 
> -Ken
> 
>> -----Original Message-----
>> From: paraview-bounces+kmorel=sandia.gov@paraview.org
> [mailto:paraview-
>> bounces+kmorel=sandia.gov@paraview.org] On Behalf Of Wendy Doyle
>> Sent: Monday, August 28, 2006 3:28 PM
>> To: paraview@paraview.org
>> Subject: [Paraview] Problems with Exodus file
>>
>> Sometime between 6/22 and 6/26 I lost the ability to open
>> Exodus datasets with "bar" elements (e.g. lines). When I
>> try, the machine beeps like crazy and prints lots of this:
>>
>> vtkOpenGLPainterDeviceAdapter: Unsupported attribute index: 5
>>
>> I poked around in the code but couldn't make heads or tails
>> of it. It happens in the adapter's "SendAttribute" call.
>> Anyone have suggestions? I can send you the file
>> that is having problems (only 20k) if you'd like to try it.
>>
>> Thanks,
>> Wendy
>>
>>
>> --
>> Wendy (Koegler) Doyle
>> Sandia National Laboratories     925-294-4877
>> P.O. Box 969, MS 9152            925-294-6588 (fax)
>> Livermore, CA 94550              wkoegle@ca.sandia.gov
>>
>> _______________________________________________
>> ParaView mailing list
>> ParaView@paraview.org
>> http://www.paraview.org/mailman/listinfo/paraview
> 
> 
> 


-- 
Wendy (Koegler) Doyle
Sandia National Laboratories     925-294-4877
P.O. Box 969, MS 9152            925-294-6588 (fax)
Livermore, CA 94550              wkoegle@ca.sandia.gov

From imikejackson at gmail.com  Wed Aug 30 15:20:23 2006
From: imikejackson at gmail.com (Mike Jackson)
Date: Wed Aug 30 15:20:36 2006
Subject: [Paraview] Creating a Custom Data Reader
Message-ID: <C11B5D37.4B35%imikejackson@gmail.com>

I am wanting to create a custom data reader for our dataset. I would also
like to be able to use the reader from VTK 5.x. What version of VTK is
Paraview 2.4.4 based on?

 I have looked at the PVLocaConeSource Template in the paraview distribution
but that didn't reveal much.


Thanks
-- 
Mike Jackson
imikejackson <at> gmail <dot>?com


From utkarsh.ayachit at kitware.com  Wed Aug 30 15:51:56 2006
From: utkarsh.ayachit at kitware.com (Utkarsh Ayachit)
Date: Wed Aug 30 15:50:36 2006
Subject: [Paraview] Problems with Exodus file
In-Reply-To: <44F5E4AE.3040800@ca.sandia.gov>
References: <7137A9E1D1768C44BE7DF11D30FAB32302C4E5AA@ES21SNLNT.srn.sandia.gov>
	<44F5E4AE.3040800@ca.sandia.gov>
Message-ID: <44F5EC5C.8060209@kitware.com>

I will look into fix this bug at the earliest.

Utkarsh.

Wendy Doyle wrote:
> If someone could fix this, I'd be very very grateful.
> I had submitted it to the kitware bug tracker --
> bug #3454 -- if you want more details.
> 
> Thanks,
> Wendy
> 
> 
> 
> Moreland, Kenneth wrote:
>> I've seen this problem off and on since global ids were added to VTK.  I
>> believe the problem is that the painters pass data set attributes to the
>> rendering system as varying variables.  Of course, there is no OpenGL
>> analog for a global id, so if those are not stripped off by the time the
>> data reaches the end of the painter chain, an error occurs.
>>
>> I think the correct fix for this problem is to painter that strips off
>> any attributes that are not applicable to rendering (vectors, tensors,
>> ids, etc.) and then add this painter to the internal chain in
>> vtkDefaultPainter.  Utkarsh, do you want to take care of this?
>>
>> -Ken
>>
>>> -----Original Message-----
>>> From: paraview-bounces+kmorel=sandia.gov@paraview.org
>> [mailto:paraview-
>>> bounces+kmorel=sandia.gov@paraview.org] On Behalf Of Wendy Doyle
>>> Sent: Monday, August 28, 2006 3:28 PM
>>> To: paraview@paraview.org
>>> Subject: [Paraview] Problems with Exodus file
>>>
>>> Sometime between 6/22 and 6/26 I lost the ability to open
>>> Exodus datasets with "bar" elements (e.g. lines). When I
>>> try, the machine beeps like crazy and prints lots of this:
>>>
>>> vtkOpenGLPainterDeviceAdapter: Unsupported attribute index: 5
>>>
>>> I poked around in the code but couldn't make heads or tails
>>> of it. It happens in the adapter's "SendAttribute" call.
>>> Anyone have suggestions? I can send you the file
>>> that is having problems (only 20k) if you'd like to try it.
>>>
>>> Thanks,
>>> Wendy
>>>
>>>
>>> -- 
>>> Wendy (Koegler) Doyle
>>> Sandia National Laboratories     925-294-4877
>>> P.O. Box 969, MS 9152            925-294-6588 (fax)
>>> Livermore, CA 94550              wkoegle@ca.sandia.gov
>>>
>>> _______________________________________________
>>> ParaView mailing list
>>> ParaView@paraview.org
>>> http://www.paraview.org/mailman/listinfo/paraview
>>
>>
>>
> 
> 

From samuelkey at comcast.net  Wed Aug 30 21:47:01 2006
From: samuelkey at comcast.net (SamuelKey)
Date: Wed Aug 30 21:42:18 2006
Subject: [Paraview] paraview file-formats
In-Reply-To: <6bb554800608300658l218f0759v139765d3ac3cc922@mail.gmail.com>
References: <6bb554800608300658l218f0759v139765d3ac3cc922@mail.gmail.com>
Message-ID: <44F63F95.6000802@comcast.net>

Greetings Adrian,

I suggest you consider using EnSight-formatted binary files. See 
attached example of a Fortran-90 language example that writes such data. 
A complete description of EnSight formats can be found in Chapter 11 of 
the EnSight Online User Manual.
https://www.ensight.com/downloads/doc_download-47.html

Each cell variable and each point variable is written to its own file.  
If you learn how to use this format's "part" concept
you can subdivide your mesh into any number of individually displayable 
pieces based on any criterion you chose.  The Extract Datasets filter 
will then let select a subset of 1, 2 or many parts for 
closer/individual examination.

Regards,

Sam Key


Adrian Magda wrote:
> Hi all,
>
> I use paraview to postprocess the results obtained with our home-made CFD
> software using the VTK file format.
>
> Due to the size of the files (even if i write binary) i need to split the
> results in several files.
>
> 1 - It is necessary to write the geometry in each VTK file (for 
> example one
> contains the temp, other the vel & turbulence, other the species and 
> so on)
> ? If i write a  different file for each property or group of flow
> properties  it seems i can not  color a isosurface of a flow variable
> according to another flow properties from another file (i.e. temp 
> isosurface
> with co2 concentrations)
>
> 2 - What file-type i need to use in order to write the geometry only once
> and have the flow properties in different vtk files?
>
> Thanks a lot
>
> Adi
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> ParaView mailing list
> ParaView@paraview.org
> http://www.paraview.org/mailman/listinfo/paraview
>   
-------------- next part --------------
      SUBROUTINE WRITE_TO_ESG_RESULTS_FILE
!!
!! Copyright (c) by FMA Development, LLC, 28-SEP-2005
!!
!! Purpose: Write results to EnSight Gold C-binary files suitable for
!! EnSight or ParaView postprocessing. Note: EnSight's "UNFORMATTED"
!! Fortran file option (Fortran Binary) could not be used because 
!! ParaView does not support it. See the "FORM = 'BINARY'" directive
!! in the OPEN statements contained in this file.
!!
      USE shared_common_data
!!
!! The complete simulation data set.
!!
      USE indx_;           USE node_;           USE input_function_;
      USE beam_;           USE coord_;          USE sliding_interface_;
      USE value_;          USE force_;          USE nodal_constraints_;
      USE hexah_;          USE penta_;          USE nonreflecting_bc_;
      USE tetra_;          USE lsold_;          USE nodal_point_mass_;
      USE membq_;          USE membt_;          USE rigid_body_mass_;
      USE truss_;          USE platq_;          USE state_variables_;
      USE platt_;          USE motion_;         USE enumerated_sets_;
      USE spring_;         USE damper_;         USE displacement_bc_;
      USE stress_;         USE segment_;        USE contact_surface_;
      USE tied_bc_;        USE results_;        USE relink_scratch_;
      USE gauge1d_;        USE gauge2d_;        USE rigid_wall_bc_;
      USE gauge3d_;        USE massprop_;       USE include_file_;
      USE material_;       USE layering_;       USE sliding_node_;
      USE force_bc_;       USE node_set_;       USE contact_node_;
      USE nrbc_data_;      USE spring_bc_;      USE periodic_bc_;
      USE damper_bc_;      USE spot_weld_;      USE pressure_bc_;
      USE qa_record_;      USE plate_pair_;     USE segment_set_;
      USE body_force_;     USE section_2d_;     USE element_set_;
      USE section_1d_;     USE rigid_body_;     USE velocity_ic_;
      USE section_3d_;     USE extreme_value_;  USE centrifugal_force_;
      USE location_;       USE mean_stress_;    USE output_;         
      USE wedge_;          USE energy_flow_;    USE pyramid_;

      USE precision_

      IMPLICIT    REAL(RTYPE) ( A-H, O-Z )
      IMPLICIT INTEGER(ITYPE) ( I-N      )
!!
!! Local variables.
      INTEGER(ITYPE), SAVE :: TStep = 0   ! Local count of time steps written
      INTEGER(ITYPE), SAVE :: MStep       ! Max number time steps requested/written
      CHARACTER(2)         :: LEGO        ! Used in Pathf95-unique procedure ASSIGN
      CHARACTER(8)         :: MEGO        ! Buffer for Material MatID output
      CHARACTER(5)         :: NEGO        ! Buffer for number-of-time-steps
      CHARACTER(80)        :: CBUFFER     ! EnSight Gold character const buffer

      REAL(RTYPE), DIMENSION(:), ALLOCATABLE, SAVE :: TIME_VALUES

      INTEGER              :: NERROR
      INTEGER(ITYPE), SAVE :: NUMXL
      INTEGER(ITYPE)       :: NTUPLE(8)
      INTEGER(ITYPE)       :: WedgeID
      LOGICAL              :: IOERROR
      LOGICAL,    EXTERNAL :: NEXT_NP_ID
      LOGICAL,    EXTERNAL :: NEXT_SEG_ID
      LOGICAL,        SAVE :: FIRST = .TRUE.
      LOGICAL,        SAVE :: INSERT_C_BINARY_QUE = .TRUE. 

      INTEGER(ITYPE), SAVE :: MHX,MPX,MPY,MTX,MM3,MP3,MM4,MP4,MTR
!!
!! The following arrays are used to extract esg/vtk "parts" based on
!! material models.  For material "M," I = ELEMENTS_AND_NODES_USED(M) 
!! fills the following arrays with indecies.
!!
      INTEGER(ITYPE), DIMENSION(:), ALLOCATABLE, SAVE :: NELUSED ! Elems used by material M
      INTEGER(ITYPE), DIMENSION(:), ALLOCATABLE, SAVE :: NPTUSED ! Nodes used by material M
      INTEGER(ITYPE), DIMENSION(:), ALLOCATABLE, SAVE :: NPTNOWI ! Node's ESG output-index
!!
!! Contained functions
!!    INTEGER :: ELEMENTS_AND_NODES_USED ! Gens material access arrays
!!    CHAR(8) :: ELEMENT_ESG_TYPE        ! Rtns EnSight Gold elem type
!!    INTEGER :: ELEMENT_N_TUPLE         ! Rtns connectivity count
!!    INTEGER :: MatID_DATA              ! Rtns material ID MatID
!!    INTEGER :: EleID_DATA              ! Rtns element ID  EleID
!!    REAL    :: STRESS_DATA             ! Rtns element stress
!!    REAL    :: BULK_STRAIN             ! Rtns element bulk strain
!!    REAL    :: STRAIN_ENERGY_DENSITY   ! Rtns element int energy
!!    REAL    :: PRESSURE                ! Rtns element pressure
!!    REAL    :: EFFECTIVE_STRESS        ! Rtns element eff stress
!!    INTEGER :: SEGMENTS_AND_NODES_USED ! Gens segment access arrays
!!    INTEGER :: SEGMENT_N_TUPLE         ! Rtns connectivity count
!!    INTEGER :: WEDGES_AND_NODES_USED   ! Gens wedge access arrays
!!    INTEGER :: WEDGE_N_TUPLE           ! Rtns connectivity count
!!    REAL    :: WEDGE_NP_COORDINATE     ! Rtns wedge np coordinates
!!    REAL    :: WEDGE_NP_VELOCITY       ! Rtns wedge np velocities
!!
!!############################################################################
!! 1. CONSTANT FOR ALL-TIME DATA
!! "Create one-time geometry for subsequent ESG Data Files to reference."
!! This file will contain the undeformed configuration. It is generated the
!! first time this routine is called and contains the current velocities. 
!!
!! =========FIRST=============================================================
!! This file will contain the the undeformed mesh colored by material and 
!! have current velocity at the nodal points for examination.
!!
      IF (FIRST) THEN

#ifdef LANGUAGE_FORTRAN90
!!
!! ASSIGN is a PathScale pathf95 compiler unique procedure.
!! It causes the unformatted output to be Big_Endian (mips).
!! 
        CALL ASSIGN( "assign -N mips p:fmaego%", NERROR )
        IF (NERROR .NE. 0) THEN
          WRITE (MSG1,'(I8)') NERROR
          CALL USER_MESSAGE
     &      (
     &      MSGL//"FATAL"//
     &      MSGL//"WRITE_TO_ESG_RESULTS_FILE.999.99"//
     &      MSGL//"Call To pathf95 ASSIGN Failed."//
     &      MSGL//"Call PathScale. Error Number:"//MSG1
     &      )
        ENDIF
#endif
!!
!! Allocate storage for the number of time steps expected from the ESGFILE
!! input record entries. If the requested time increment is zero, limit the
!! number of time steps.
!!
      Tbgn = ESG_RESULTS_FILE%Begin
      Tinc = ESG_RESULTS_FILE%Delta
      Tend = MIN( TIME%Stop, ESG_RESULTS_FILE%End )

      IF (Tinc .GT. ZERO) THEN
        MStep = NINT( (Tend-Tbgn)/Tinc ) + 1
      ELSE
        MStep = 101
        WRITE (MSG1,'(I8)') MStep
        CALL USER_MESSAGE
     &    (
     &    MSGL//'INFORM'//
     &    MSGL//'WRITE_ESG_DATA_FILE.010.01'//
     &    MSGL//'Since "ESGFILE DELTA=0.0" Was Input And'//
     &    MSGL//'Due To The Nature Of The EnSight Gold Case'//
     &    MSGL//'File Format, The Number Of Time Steps Was'//
     &    MSGL//'Capped At'//MSG1//' Steps. Try A Non-Zero'//
     &    MSGL//'DELTA Value To Allow A Non-Zero Divide.'
     &    )
      ENDIF

      ALLOCATE ( TIME_VALUES(1:MStep) )
!!
!! Total finite element count. Note: Only one qudrilateral is produced for
!! each membrane (NUMM3, NUMM4) and shell (NUMP3, NUMP4) finite element.
!!
        NUMXL = NUMHX + NUMPX + NUMPY + NUMTX + NUMM3 + NUMP3 + NUMM4 + NUMP4 + NUMTR
!!
!! Count number of elements using each material model. Note: There may be more
!! material models specified then are actually referenced by elements in the
!! mesh. Hence, the effort to isolate materials that have a null usage count.
!!
        MXSNW = MAX ( NUMXL, NUMSG, NUMNP, NUMWX )
        ALLOCATE ( NELUSED(1:MXSNW), NPTUSED(1:NUMNP), NPTNOWI(1:NUMNP) )
!!
!! Define element and node counts for MATERIAL(*)%NElems and MATERIAL(*)%NNodes
!!
        DO M = 1,NUMMT
          I = ELEMENTS_AND_NODES_USED(M)
        ENDDO
!!
!! Open one-time geometry file fmaego.mesh.geom (EnSight Gold output).
!!
        IOERROR = .TRUE.
        OPEN
     &    (
     &    UNIT    =  IO_UNIT%LEGO,
     &    FILE    = 'fmaego.mesh.geom',
     &    STATUS  = 'UNKNOWN',
#ifdef _G95_
     &    FORM    = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &    FORM    = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &    FORM    = 'BINARY',                        !  Pathf95
#endif
     &    ERR     =  100
     &    )
        IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 100    IF (IOERROR) THEN
          CALL USER_MESSAGE
     &      (
     &      MSGL//'FATAL'//
     &      MSGL//'WRITE_ESG_DATA_FILE.001.00'//
     &      MSGL//'Unable To Execute OPEN On: '//'fmaego.mesh.geom'
     &      )
        ELSE
!!
!! Initialize sequential Material part counter.
!!
          MPart = 0
!!
!! Initialize EnSight Gold C-binary data file (see FORM='UNFORMATTED' above).
!!
          CBUFFER = "C Binary"                         ! EnSight reader format que.
          WRITE (IO_UNIT%LEGO) CBUFFER
          CBUFFER = TRIM(JOB_ID_RECORD%CURRENT%TITLE)  ! User's job title record.
          WRITE (IO_UNIT%LEGO) CBUFFER
          CBUFFER = " "                                ! (unused subtitle)
          WRITE (IO_UNIT%LEGO) CBUFFER
          CBUFFER = "node id given"                    ! Expect to read nodal ID's
          WRITE (IO_UNIT%LEGO) CBUFFER
          CBUFFER = "element id given"                 ! Expect to read element ID's
          WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Turn individual material domains into esg/vtk "parts."
!!
          DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
            IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

              WRITE (MEGO,'(I8.8)') MATERIAL(M)%MatID

              NNodes = MATERIAL(M)%NNodes
              NElems = MATERIAL(M)%NElems

              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = Mpart + 1
              WRITE (IO_UNIT%LEGO) MPart
              CBUFFER = "Part with MatID: "//MEGO
              WRITE (IO_UNIT%LEGO) CBUFFER
              CBUFFER = "coordinates"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) NNodes
              WRITE (IO_UNIT%LEGO) (NODE(NPTUSED(n))%ID,                   n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Px,KIND(0E0)), n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Py,KIND(0E0)), n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Pz,KIND(0E0)), n = 1,NNodes)

              Nend = 0

              IF (MHX .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MHX
                CBUFFER = "hexa8"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MHX
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

              IF (MPX .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MPX
                CBUFFER = "penta6"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MPX
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

              IF (MPY .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MPY   
                CBUFFER = "pyramid5"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MPY  
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

              IF (MTX .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MTX   
                CBUFFER = "tetra4"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MTX  
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

              IF (MM3 .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MM3   
                CBUFFER = "tria3"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MM3  
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

              IF (MP3 .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MP3   
                CBUFFER = "tria3"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MP3  
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

              IF (MM4 .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MM4   
                CBUFFER = "quad4"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MM4  
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

              IF (MP4 .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MP4 
                CBUFFER = "quad4"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MP4  
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

              IF (MTR .GT. 0) THEN
                Nbgn = Nend + 1
                Nend = Nend + MTR   
                CBUFFER = "bar2"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) MTR  
                WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
                WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
              ENDIF

            ENDIF
          ENDDO
        ENDIF
!!
!! =========SECOND============================================================
!! Write the individual node-sets segment-sets, and wedge-sets as separate 
!! parts. The idea is that EnSight and ParaView can load these parts one at 
!! a time "on top of" the above mesh file to confirm that the individual sets 
!! have been correctly specified. (The underlying mesh should first be colored 
!! "gray" so that the colors assigned by ParaView to each set standout and are 
!! more easily examined for correctness.)
!!
        DO M = 1,NUMNS
!!
!! Clear marker/index-sequence and translation arrays.
!!
          NELUSED = 0
          NPTUSED = 0
          NPTNOWI = 0
!!
!! Mark nodes used by this node set.
!!
          N = 0
          DO WHILE (NEXT_NP_ID(M,N))
            NPTUSED(N) = 1
          ENDDO
!!
!! Covert NPTUSED (and NELUSED) into a sequential index map.
!!
          K = 0
          DO N = 1,NUMNP
            IF (NPTUSED(N) .EQ. 1) THEN
              K = K + 1
              NPTNOWI(N) = K
              NPTUSED(K) = N
              NELUSED(K) = N
            ENDIF
          ENDDO
!!
!! For later use, record the number of nodes and elements (each node will be 
!! a "vertex element" for ParaView) that will be in the file for this NP_SET.
!!
          NNodes = K
          NElems = K

          IF (NNodes .GT. 0) THEN
            WRITE (MEGO,'(I8.8)') NODE_SET(M)%SetID
!!
!! Node Set: Nodal point ID's and coordinates.
!!
            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = Mpart + 1
            WRITE (IO_UNIT%LEGO) MPart
            CBUFFER = "Node Set ID: "//MEGO
            WRITE (IO_UNIT%LEGO) CBUFFER
            CBUFFER = "coordinates"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) NNodes
            WRITE (IO_UNIT%LEGO) (NODE(NPTUSED(n))%ID,                   n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Px,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Py,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Pz,KIND(0E0)), n = 1,NNodes)
!!
!! Node Set: Point-element inventory.
!!
            CBUFFER = "point"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) NElems  
            WRITE (IO_UNIT%LEGO) (NODE(NPTUSED(n))%ID, n = 1,NElems)
            WRITE (IO_UNIT%LEGO) (n,                   n = 1,NElems)
  
          ENDIF
        ENDDO
!!
!! Now, write segment set files.
!!
        DO M = 1,NUMSS
!!
!! The function SEGMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! segments-used array NELUSED and esg/esg output-index translation array NPTNOWI for 
!! this segment set. If segment set M is not empty, the function returns 1, else 0. 
!!
          IF (SEGMENTS_AND_NODES_USED(M) .GT. 0) THEN
            WRITE (MEGO,'(I8.8)') SEGMENT_SET(M)%SetID
!!
!! Segment Set: Nodal point ID's and coordinates.
!!
            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = Mpart + 1
            WRITE (IO_UNIT%LEGO) MPart
            CBUFFER = "Segment Set ID: "//MEGO
            WRITE (IO_UNIT%LEGO) CBUFFER
            CBUFFER = "coordinates"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) NNodes
            WRITE (IO_UNIT%LEGO) (NODE(NPTUSED(n))%ID,                   n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Px,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Py,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Pz,KIND(0E0)), n = 1,NNodes)
!!
!! Segment Set: Quadrilateral and Triangle facet (element) inventory.
!!
            CBUFFER = "quad4"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) NElems  
            WRITE (IO_UNIT%LEGO) (SEGMENT(NELUSED(n))%PAR%SegID,         n = 1,NElems)
            WRITE (IO_UNIT%LEGO) (NTUPLE(1:SEGMENT_N_TUPLE(NELUSED(n))), n = 1,NElems)
  
          ENDIF
        ENDDO
!!
!! Now, write wedge-set files. (Wedge-sets are generated internally based
!! on each specified solid-to-solid tied interface (Keyword: MPCON4).
!!
        WedgeID = 0
        DO M = 1,NUMC4
!!
!! The function WEDGES_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED,
!! wedges-used array NELUSED and esg output-index translation array NPTNOWI for
!! this wedge set. If wedge set M is not empty, the function returns 1, else 0.
!!
          IF (WEDGES_AND_NODES_USED(M) .GT. 0) THEN
            WRITE (MEGO,'(I8.8)') SOLID_SOLID_INTERFACE(M)%MPCID
!!
!! Wedge Set: Nodal point ID's and coordinates.
!!
            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = Mpart + 1
            WRITE (IO_UNIT%LEGO) MPart
            CBUFFER = "Wedge Set ID: "//MEGO
            WRITE (IO_UNIT%LEGO) CBUFFER
            CBUFFER = "coordinates"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) NNodes
            WRITE (IO_UNIT%LEGO) (n,                                        n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(WEDGE_NP_COORDINATE(n,1),KIND(0E0)), n = 1,NNodes)  !  x-coordinate
            WRITE (IO_UNIT%LEGO) (REAL(WEDGE_NP_COORDINATE(n,2),KIND(0E0)), n = 1,NNodes)  !  y-coordinate
            WRITE (IO_UNIT%LEGO) (REAL(WEDGE_NP_COORDINATE(n,3),KIND(0E0)), n = 1,NNodes)  !  z-coordinate
!!
!! Wedge Set: Interface wedge set inventory for this tied-contact (MPCON4).
!!
            CBUFFER = "penta6"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) NElems  
            WRITE (IO_UNIT%LEGO) (WedgeID + n,                n = 1,NElems)
            WRITE (IO_UNIT%LEGO) (NTUPLE(1:WEDGE_N_TUPLE(n)), n = 1,NElems)

            WedgeID = WedgeID + NElems

          ENDIF
        ENDDO

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')
!!
!! =========THIRD=============================================================
!! Write nodal point and cell (element) data.
!! 
!! Open an ESG nodal point velocity initial condition file.
!!
        IOERROR = .TRUE.
        OPEN
     &    (
     &    UNIT    =  IO_UNIT%LEGO,
     &    FILE    = 'fmaego.mesh.vics',
     &    STATUS  = 'UNKNOWN',
#ifdef _G95_
     &    FORM    = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &    FORM    = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &    FORM    = 'BINARY',                        !  Pathf95
#endif
     &    ERR     =  200
     &    )
        IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 200    IF (IOERROR) THEN
          CALL USER_MESSAGE
     &      (
     &      MSGL//'FATAL'//
     &      MSGL//'WRITE_ESG_DATA_FILE.002.00'//
     &      MSGL//'Unable To Execute OPEN On: '//'fmaego.mesh.vics'
     &      )
        ELSE
!!
!! Initialize sequential Material part counter.
!!
          MPart = 0
!!
!! Initialize EnSight Gold static variable results file
!!
          CBUFFER = "Velocity Initial Conditions"
          WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
          DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
            IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

              NNodes = MATERIAL(M)%NNodes
              NElems = MATERIAL(M)%NElems

              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = MPart + 1
              WRITE (IO_UNIT%LEGO) MPart
              CBUFFER = "coordinates"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vx,KIND(0E0)), n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vy,KIND(0E0)), n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vz,KIND(0E0)), n = 1,NNodes)

            ENDIF
          ENDDO
!!
!! Assign initial velocity values to node sets.
!!
          DO M = 1,NUMNS
!!
!! Clear marker/index-sequence and translation arrays.
!!
            NELUSED = 0
            NPTUSED = 0
            NPTNOWI = 0
!!
!! Mark nodes used by this node set.
!!
            N = 0
            DO WHILE (NEXT_NP_ID(M,N))
              NPTUSED(N) = 1
            ENDDO
!!
!! Covert NPTUSED (and NELUSED) into a sequential index map.
!!
            K = 0
            DO N = 1,NUMNP
              IF (NPTUSED(N) .EQ. 1) THEN
                K = K + 1
                NPTNOWI(N) = K
                NPTUSED(K) = N
                NELUSED(K) = N
              ENDIF
            ENDDO
!!
!! For later use, record the number of nodes and elements (each node will be 
!! a "vertex element" for ParaView) that will be in the file for this NP_SET.
!!
            NNodes = K
            NElems = K

            IF (NNodes .GT. 0) THEN
!!
!! Node Set: Velocity initial conditions.
!!
              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = MPart + 1
              WRITE (IO_UNIT%LEGO) MPart
              CBUFFER = "coordinates"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vx,KIND(0E0)), n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vy,KIND(0E0)), n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vz,KIND(0E0)), n = 1,NNodes)

            ENDIF
          ENDDO
!!
!! Assign initial velocity values to segment sets.
!!
          DO M = 1,NUMSS
!!
!! The function SEGMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! segments-used array NELUSED and esg/esg output-index translation array NPTNOWI for 
!! this segment set. If segment set M is not empty, the function returns 1, else 0. 
!!
            IF (SEGMENTS_AND_NODES_USED(M) .GT. 0) THEN
!!
!! Segment Set: Velocity initial conditions.
!!
              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = Mpart + 1
              WRITE (IO_UNIT%LEGO) MPart
              CBUFFER = "coordinates"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vx,KIND(0E0)), n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vy,KIND(0E0)), n = 1,NNodes)
              WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vz,KIND(0E0)), n = 1,NNodes)

            ENDIF
          ENDDO
!!
!! Assign initial velocity values to wedge sets.
!!
          DO M = 1,NUMC4
!!
!! The function WEDGES_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED,
!! wedges-used array NELUSED and esg output-index translation array NPTNOWI for
!! this wedge set. If wedge set M is not empty, the function returns 1, else 0.
!!
            IF (WEDGES_AND_NODES_USED(M) .GT. 0) THEN
!!
!! Wedge Set: Velocity initial conditions.
!!
              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = Mpart + 1
              WRITE (IO_UNIT%LEGO) MPart
              CBUFFER = "coordinates"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(WEDGE_NP_VELOCITY(n,1),KIND(0E0)), n = 1,NNodes)  !  x-coordinate
              WRITE (IO_UNIT%LEGO) (REAL(WEDGE_NP_VELOCITY(n,2),KIND(0E0)), n = 1,NNodes)  !  y-coordinate
              WRITE (IO_UNIT%LEGO) (REAL(WEDGE_NP_VELOCITY(n,3),KIND(0E0)), n = 1,NNodes)  !  z-coordinate

            ENDIF
          ENDDO

          CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')
        ENDIF
!! 
!! Open an ESG element material number file.
!!
        IOERROR = .TRUE.
        OPEN
     &    (
     &    UNIT    =  IO_UNIT%LEGO,
     &    FILE    = 'fmaego.mesh.mats',
     &    STATUS  = 'UNKNOWN',
#ifdef _G95_
     &    FORM    = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &    FORM    = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &    FORM    = 'BINARY',                        !  Pathf95
#endif
     &    ERR     =  300
     &    )
        IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 300    IF (IOERROR) THEN
          CALL USER_MESSAGE
     &      (
     &      MSGL//'FATAL'//
     &      MSGL//'WRITE_ESG_DATA_FILE.003.00'//
     &      MSGL//'Unable To Execute OPEN On: '//'fmaego.mesh.mats'
     &      )
        ELSE
!!
!! Initialize sequential part counter.
!!
          MPart = 0
!!
!! Initialize EnSight Gold static variable results file.
!!
          CBUFFER = "Cell Material Color Index"
          WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
          DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
            IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

              NNodes = MATERIAL(M)%NNodes
              NElems = MATERIAL(M)%NElems

              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = MPart + 1
              WRITE (IO_UNIT%LEGO) MPart

              IF (MHX .GT. 0) THEN
                CBUFFER = "hexa8"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MHX)
              ENDIF

              IF (MPX .GT. 0) THEN
                CBUFFER = "penta6"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MPX)
              ENDIF

              IF (MPY .GT. 0) THEN
                CBUFFER = "pyramid5"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MPY)
              ENDIF

              IF (MTX .GT. 0) THEN
                CBUFFER = "tetra4"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MTX)
              ENDIF

              IF (MM3 .GT. 0) THEN
                CBUFFER = "tria3"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MM3)
              ENDIF

              IF (MP3 .GT. 0) THEN
                CBUFFER = "tria3"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MP3)
              ENDIF

              IF (MM4 .GT. 0) THEN
                CBUFFER = "quad4"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MM4)
              ENDIF

              IF (MP4 .GT. 0) THEN
                CBUFFER = "quad4"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MP4)
              ENDIF

              IF (MTR .GT. 0) THEN
                CBUFFER = "bar2"
                WRITE (IO_UNIT%LEGO) CBUFFER
                WRITE (IO_UNIT%LEGO) (REAL(M,KIND(0E0)), n = 1,MTR)
              ENDIF

            ENDIF
          ENDDO
!!
!! Assign "MatID" values to node sets.
!!
          DO M = 1,NUMNS
!!
!! Clear marker/index-sequence and translation arrays.
!!
            NELUSED = 0
            NPTUSED = 0
            NPTNOWI = 0
!!
!! Mark nodes used by this node set.
!!
            N = 0
            DO WHILE (NEXT_NP_ID(M,N))
              NPTUSED(N) = 1
            ENDDO
!!
!! Covert NPTUSED (and NELUSED) into a sequential index map.
!!
            K = 0
            DO N = 1,NUMNP
              IF (NPTUSED(N) .EQ. 1) THEN
                K = K + 1
                NPTNOWI(N) = K
                NPTUSED(K) = N
                NELUSED(K) = N
              ENDIF
            ENDDO
!!
!! For later use, record the number of nodes and elements (each node will be 
!! a "vertex element" for ParaView) that will be in the file for this NP_SET.
!!
            NNodes = K
            NElems = K

            IF (NNodes .GT. 0) THEN

              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = Mpart + 1
              WRITE (IO_UNIT%LEGO) MPart
!!
!! Node Set: Assign internal node set ID as "MatID."
!!
              CBUFFER = "point"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(NUMMT+M,KIND(0E0)), n = 1,NElems)

            ENDIF
          ENDDO
!!
!! Assign "MatID" values to segment sets.
!!
          DO M = 1,NUMSS
!!
!! The function SEGMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! segments-used array NELUSED and esg/esg output-index translation array NPTNOWI for 
!! this segment set. If segment set M is not empty, the function returns 1, else 0. 
!!
            IF (SEGMENTS_AND_NODES_USED(M) .GT. 0) THEN

              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = Mpart + 1
              WRITE (IO_UNIT%LEGO) MPart
!!
!! Segment Set: Assign internal segment set ID as "MatID."
!!
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(NUMMT+NUMNS+M,KIND(0E0)), n = 1,NElems)

            ENDIF
          ENDDO
!!
!! Assign "MatID" values to wedge sets.
!!
          DO M = 1,NUMC4
!!
!! The function WEDGES_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED,
!! wedges-used array NELUSED and esg output-index translation array NPTNOWI for
!! this wedge set. If wedge set M is not empty, the function returns 1, else 0.
!!
            IF (WEDGES_AND_NODES_USED(M) .GT. 0) THEN

              CBUFFER = "part"
              WRITE (IO_UNIT%LEGO) CBUFFER
              MPart = Mpart + 1
              WRITE (IO_UNIT%LEGO) MPart
!!
!! Wedge Set: Assign internal wedge set ID as "MatID."
!!
              CBUFFER = "penta6"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(NUMMT+NUMNS+NUMSS+M,KIND(0E0)), n = 1,NElems)

            ENDIF
          ENDDO

          CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')
        ENDIF
!!
!! =========FOURTH============================================================
!! Write a *.case file to allow EnSight and ParaView to identify the mesh, 
!! node-set, side-set and wedge-set files as distinct "Parts."
!! 
!! Open an ESG case-file.
!!
        IOERROR = .TRUE.
        OPEN
     &    (
     &    UNIT    =  IO_UNIT%LEGO,
     &    FILE    = 'fmaego.mesh.case',
     &    STATUS  = 'UNKNOWN',
     &    FORM    = 'FORMATTED',
     &    ERR     =  400
     &    )
        IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 400    IF (IOERROR) THEN
          CALL USER_MESSAGE
     &      (
     &      MSGL//'FATAL'//
     &      MSGL//'WRITE_ESG_DATA_FILE.004.00'//
     &      MSGL//'Unable To Execute OPEN On: '//'fmaego.mesh.case'
     &      )
        ELSE

          WRITE (IO_UNIT%LEGO,'(A)') "FORMAT"
          WRITE (IO_UNIT%LEGO,'(A)') "type: ensight gold"

          WRITE (IO_UNIT%LEGO,'(A)') "GEOMETRY"
          WRITE (IO_UNIT%LEGO,'(A)') "model: fmaego.mesh.geom"

          WRITE (IO_UNIT%LEGO,'(A)') "VARIABLE"
          WRITE (IO_UNIT%LEGO,'(A)') "vector per node: Velocity-IC fmaego.mesh.vics"
          WRITE (IO_UNIT%LEGO,'(A)') "scalar per element: Material fmaego.mesh.mats"

          CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')
        ENDIF

        FIRST = .FALSE.
      ENDIF
!!
!!
!!############################################################################
!! PART 2. RESULTS FOR THIS TIME STEP.
!! Initialize and append nodal point and cell (element) data.
!!
!! Increment EnSight Gold number-of-time-steps counter and store current time.
!!
      TStep = TStep + 1
      IF (TStep .LE. MStep) THEN
        WRITE (NEGO,'(I5)') TStep
        TIME_VALUES(TStep) = TIME%Total
      ELSE
        WRITE (MSG1,'(I8)') TStep
        WRITE (MSG2,'(I8)') MStep
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.010.02'//
     &    MSGL//'TStep, The Current Write Counter, Has Exceeded MStep.'//
     &    MSGL//'TStep:'//MSG1//
     &    MSGL//'MStep:'//MSG2
     &    )
      ENDIF
!!
!! =========FIRST=============================================================
!! Open geometry file fmaego.data.geom (EnSight Gold output) for nodal point 
!! and cell results to reference.
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.geom',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  500
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 500  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.005.00'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.geom'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Insert EnSight Gold C-binary data file que (see FORM='UNFORMATTED' above).
!!
        IF (INSERT_C_BINARY_QUE) THEN
          CBUFFER = "C Binary"                       ! EnSight reader format que.
          WRITE (IO_UNIT%LEGO) CBUFFER
          INSERT_C_BINARY_QUE = .FALSE.
        ENDIF
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"                  ! "Time serialized" que.
        WRITE (IO_UNIT%LEGO) CBUFFER
        CBUFFER = TRIM(JOB_ID_RECORD%CURRENT%TITLE)  ! User's job title record.
        WRITE (IO_UNIT%LEGO) CBUFFER
        CBUFFER = " "                                ! (unused subtitle)
        WRITE (IO_UNIT%LEGO) CBUFFER
        CBUFFER = "node id given"                    ! Expect to read nodal ID's
        WRITE (IO_UNIT%LEGO) CBUFFER
        CBUFFER = "element id given"                 ! Expect to read element ID's
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Turn individual material domains into esg/vtk "parts."
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            WRITE (MEGO,'(I8.8)') MATERIAL(M)%MatID

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = Mpart + 1
            WRITE (IO_UNIT%LEGO) MPart
            CBUFFER = "Part with MatID: "//MEGO
            WRITE (IO_UNIT%LEGO) CBUFFER
            CBUFFER = "coordinates"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) NNodes
            WRITE (IO_UNIT%LEGO) (NODE(NPTUSED(n))%ID,                                         n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Px+MOTION(NPTUSED(n))%Ux,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Py+MOTION(NPTUSED(n))%Uy,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Pz+MOTION(NPTUSED(n))%Uz,KIND(0E0)), n = 1,NNodes)

            Nend = 0

            IF (MHX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MHX
              CBUFFER = "hexa8"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MHX
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

            IF (MPX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPX
              CBUFFER = "penta6"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MPX
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

            IF (MPY .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPY   
              CBUFFER = "pyramid5"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MPY  
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

            IF (MTX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTX   
              CBUFFER = "tetra4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MTX  
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

            IF (MM3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MM3  
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

            IF (MP3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MP3  
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

            IF (MM4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM4   
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MM4  
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

            IF (MP4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP4 
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MP4  
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

            IF (MTR .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTR   
              CBUFFER = "bar2"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) MTR  
              WRITE (IO_UNIT%LEGO) (EleID_DATA(NELUSED(n)),                n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (NTUPLE(1:ELEMENT_N_TUPLE(NELUSED(n))), n = Nbgn,Nend)
            ENDIF

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')
      ENDIF
!!
!! =========SECOND============================================================
!! Open and append ESG nodal point results to data files.
!!
!! Displacements...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.ndis',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  601
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 601  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.006.01'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.ndis'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Nodal Point Displacement Results"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart
            CBUFFER = "coordinates"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Ux,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Uy,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Uz,KIND(0E0)), n = 1,NNodes)

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! Velocities...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.nvel',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  602
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 602  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.006.02'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.nvel'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Nodal Point Displacement Results"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart
            CBUFFER = "coordinates"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vx,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vy,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Vz,KIND(0E0)), n = 1,NNodes)

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! Accelerations...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.nacc',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  603
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 603  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.006.03'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.nacc'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Nodal Point Displacement Results"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart
            CBUFFER = "coordinates"
            WRITE (IO_UNIT%LEGO) CBUFFER
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Ax,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Ay,KIND(0E0)), n = 1,NNodes)
            WRITE (IO_UNIT%LEGO) (REAL(MOTION(NPTUSED(n))%Az,KIND(0E0)), n = 1,NNodes)

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! =========THIRD=============================================================
!! Open and append ESG element (cell) results to data files.
!!
!! Internal Material Number...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.emat',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  701
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 701  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.007.01'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.emat'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Element Internal Material Index"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart

            Nend = 0

            IF (MHX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MHX
              CBUFFER = "hexa8"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

            IF (MPX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPX
              CBUFFER = "penta6"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

            IF (MPY .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPY   
              CBUFFER = "pyramid5"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

            IF (MTX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTX   
              CBUFFER = "tetra4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

            IF (MM3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

            IF (MP3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

            IF (MM4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM4   
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

            IF (MP4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP4 
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

            IF (MTR .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTR   
              CBUFFER = "bar2"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (REAL(MatID_DATA(NELUSED(n)),KIND(0E0)), n = Nbgn,Nend)
            ENDIF

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! Stress...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.estr',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  702
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 702  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.007.02'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.estr'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Element Stress(xx,yy,zz,xy,xz,yz) Results"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart

            Nend = 0

            IF (MHX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MHX
              CBUFFER = "hexa8"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

            IF (MPX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPX
              CBUFFER = "penta6"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

            IF (MPY .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPY   
              CBUFFER = "pyramid5"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

            IF (MTX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTX   
              CBUFFER = "tetra4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

            IF (MM3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

            IF (MP3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

            IF (MM4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM4   
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

            IF (MP4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP4 
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

            IF (MTR .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTR   
              CBUFFER = "bar2"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),1), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),2), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),3), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),4), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),5), n = Nbgn,Nend)
              WRITE (IO_UNIT%LEGO) (STRESS_DATA(NELUSED(n),6), n = Nbgn,Nend)
            ENDIF

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! Bulk Strain...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.elnv',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  703
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 703  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.007.03'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.elnv'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Element Bulk Strain Results"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart

            Nend = 0

            IF (MHX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MHX
              CBUFFER = "hexa8"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MPX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPX
              CBUFFER = "penta6"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MPY .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPY   
              CBUFFER = "pyramid5"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MTX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTX   
              CBUFFER = "tetra4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MM3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MP3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MM4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM4   
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MP4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP4 
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MTR .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTR   
              CBUFFER = "bar2"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (BULK_STRAIN(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! Strain Energy Density...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.esed',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  704
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 704  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.007.04'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.esed'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Element Strain Energy Density Results"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart

            Nend = 0

            IF (MHX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MHX
              CBUFFER = "hexa8"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MPX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPX
              CBUFFER = "penta6"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MPY .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPY   
              CBUFFER = "pyramid5"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MTX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTX   
              CBUFFER = "tetra4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MM3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MP3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MM4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM4   
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MP4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP4 
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MTR .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTR   
              CBUFFER = "bar2"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (STRAIN_ENERGY_DENSITY(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! Pressure...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.eprs',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  705
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 705  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.007.05'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.eprs'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Element Pressure Density Results"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart

            Nend = 0

            IF (MHX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MHX
              CBUFFER = "hexa8"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MPX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPX
              CBUFFER = "penta6"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MPY .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPY   
              CBUFFER = "pyramid5"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MTX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTX   
              CBUFFER = "tetra4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MM3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MP3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MM4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM4   
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MP4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP4 
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MTR .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTR   
              CBUFFER = "bar2"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (PRESSURE(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! Effective stress (deviatoric stress magnitude)...
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT     =  IO_UNIT%LEGO,
     &  FILE     = 'fmaego.data.edev',
     &  STATUS   = 'UNKNOWN',
#ifdef _G95_
     &  FORM     = 'UNFORMATTED', ACCESS='STREAM',  !  G95
#endif
#ifdef _CVF_NT_
     &  FORM     = 'BINARY', CONVERT='BIG_ENDIAN',  !  CVF
#endif
#ifdef LANGUAGE_FORTRAN90
     &  FORM     = 'BINARY',                        !  Pathf95
#endif
     &  POSITION = 'APPEND',
     &  ERR      =  706
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 706  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.007.06'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.edev'
     &    )
      ELSE
!!
!! Initialize sequential Material part counter.
!!
        MPart = 0
!!
!! Start this-time-step block.
!!
        CBUFFER = "BEGIN TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CBUFFER = "Element Effective Stress Results"
        WRITE (IO_UNIT%LEGO) CBUFFER
!!
!! Loop on Material parts.
!!
        DO M = 1,NUMMT
!!
!! The function ELEMENTS_AND_NODES_USED(*) gen's nodal-points-used array NPTUSED, 
!! elements-used array NELUSED and vtk output-index translation array NPTNOWI for 
!! this material. If material M is used, the function returns 1, otherwise 0. 
!!
          IF (ELEMENTS_AND_NODES_USED(M) .GT. 0) THEN

            NNodes = MATERIAL(M)%NNodes
            NElems = MATERIAL(M)%NElems

            CBUFFER = "part"
            WRITE (IO_UNIT%LEGO) CBUFFER
            MPart = MPart + 1
            WRITE (IO_UNIT%LEGO) MPart

            Nend = 0

            IF (MHX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MHX
              CBUFFER = "hexa8"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MPX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPX
              CBUFFER = "penta6"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MPY .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MPY   
              CBUFFER = "pyramid5"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MTX .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTX   
              CBUFFER = "tetra4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MM3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MP3 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP3   
              CBUFFER = "tria3"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MM4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MM4   
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MP4 .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MP4 
              CBUFFER = "quad4"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

            IF (MTR .GT. 0) THEN
              Nbgn = Nend + 1
              Nend = Nend + MTR   
              CBUFFER = "bar2"
              WRITE (IO_UNIT%LEGO) CBUFFER
              WRITE (IO_UNIT%LEGO) (EFFECTIVE_STRESS(NELUSED(n)), n = Nbgn,Nend)
            ENDIF

          ENDIF
        ENDDO
!!
!! Close out this-time-step block.
!!
        CBUFFER = "END TIME STEP"
        WRITE (IO_UNIT%LEGO) CBUFFER

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')

      ENDIF
!!
!! =========FOURTH============================================================
!! Write a *.case file to allow EnSight and ParaView to access the nodal point
!! and element (cell) results.
!! 
!! Open an ESG case-file.
!!
      IOERROR = .TRUE.
      OPEN
     &  (
     &  UNIT    =  IO_UNIT%LEGO,
     &  FILE    = 'fmaego.data.case',
     &  STATUS  = 'UNKNOWN',
     &  FORM    = 'FORMATTED',
     &  ERR     =  800
     &  )
      IOERROR = .FALSE.
!!
!! Fatal error exit for failed OPEN operation.
!!
 800  IF (IOERROR) THEN
        CALL USER_MESSAGE
     &    (
     &    MSGL//'FATAL'//
     &    MSGL//'WRITE_ESG_DATA_FILE.010.03'//
     &    MSGL//'Unable To Execute OPEN On: '//'fmaego.data.case'
     &    )
      ELSE

        WRITE (IO_UNIT%LEGO,'(A)') "FORMAT"
        WRITE (IO_UNIT%LEGO,'(A)') "type: ensight gold"

        !                                                   ts fs
        WRITE (IO_UNIT%LEGO,'(A)') "GEOMETRY"
        WRITE (IO_UNIT%LEGO,'(A)') "model:                   1  1  fmaego.data.geom    change_coords_only"

        !                                                   ts fs
        WRITE (IO_UNIT%LEGO,'(A)') "VARIABLE"
        WRITE (IO_UNIT%LEGO,'(A)') "vector per node:         1  1  Displacement          fmaego.data.ndis"
        WRITE (IO_UNIT%LEGO,'(A)') "vector per node:         1  1  Velocity              fmaego.data.nvel"
        WRITE (IO_UNIT%LEGO,'(A)') "vector per node:         1  1  Acceleration          fmaego.data.nacc"
        WRITE (IO_UNIT%LEGO,'(A)') "scalar per element:      1  1  Material              fmaego.data.emat"
        WRITE (IO_UNIT%LEGO,'(A)') "scalar per element:      1  1  Pressure              fmaego.data.eprs"
        WRITE (IO_UNIT%LEGO,'(A)') "scalar per element:      1  1  Bulk-Strain           fmaego.data.elnv"
        WRITE (IO_UNIT%LEGO,'(A)') "scalar per element:      1  1  Strain-Energy-Density fmaego.data.esed"
        WRITE (IO_UNIT%LEGO,'(A)') "scalar per element:      1  1  Effective-Stress      fmaego.data.edev"
        WRITE (IO_UNIT%LEGO,'(A)') "tensor symm per element: 1  1  Stress                fmaego.data.estr"

        !                                                   ts
        WRITE (IO_UNIT%LEGO,'(A)') "TIME"
        WRITE (IO_UNIT%LEGO,'(A)') "time set:                1"
        WRITE (IO_UNIT%LEGO,'(A)') "number of steps:     "//NEGO
        WRITE (IO_UNIT%LEGO,'(A,12X,2(1PE24.12)/(3(1PE24.12)))') "time values:",(TIME_VALUES(n), n= 1,TStep)

        !                                                      fs
        WRITE (IO_UNIT%LEGO,'(A)') "FILE"
        WRITE (IO_UNIT%LEGO,'(A)') "file set:                   1"
        WRITE (IO_UNIT%LEGO,'(A)') "number of steps:        "//NEGO

        CLOSE (UNIT=IO_UNIT%LEGO, STATUS='KEEP')
      ENDIF

      RETURN

      CONTAINS
!!
      FUNCTION ELEMENTS_AND_NODES_USED ( M )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Purpose: Mark elements and nodes used, count number of unique elements 
!! and nodes used by the elements, and create index translation arrays 
!! for material "M".
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: M  !  Material Index
!!
!! Function return value.
      INTEGER(4) :: ELEMENTS_AND_NODES_USED
!!
!! Local Variables.
      INTEGER(ITYPE), PARAMETER :: IUNITY(8) = (/1,1,1,1,1,1,1,1/)
      INTEGER(ITYPE) :: K,N
!!
!! Clear marker/index-sequence and translation arrays.
!!
      NELUSED = 0
      NPTUSED = 0
      NPTNOWI = 0
!!
!! Initialize the program's element-type counters
!!
      MHX = 0;  MPX = 0;  MPY = 0;  MTX = 0;  
      MM3 = 0;  MP3 = 0;  MM4 = 0;  MP4 = 0;  
      MTR = 0;
!!
!! Scan all elements for the elements using MATERIAL(M).
!! Note: The element scan order here must match that in
!! the other extraction routines: NUMHX, NUMPX, NUMPY,
!! NUMTX, NUMM3, NUMP3, NUMM4, NUMP4, NUMTR.
!!
      K = 0
      ELEMENTS_AND_NODES_USED = 0

      DO N = 1,NUMHX
        K = K + 1
        IF (HEXAH(N)%PAR%MatID .EQ. M) THEN
          MHX = MHX + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1
          NPTUSED(HEXAH(N)%PAR%IX(1:8)) = IUNITY(1:8)
        ENDIF
      ENDDO

      DO N = 1,NUMPX
        K = K + 1
        IF (PENTA(N)%PAR%MatID .EQ. M) THEN
          MPX = MPX + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1
          NPTUSED(PENTA(N)%PAR%IX(1:6)) = IUNITY(1:6)
        ENDIF
      ENDDO

      DO N = 1,NUMPY
        K = K + 1
        IF (PYRAMID(N)%PAR%MatID .EQ. M) THEN
          MPY = MPY + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1
          NPTUSED(PYRAMID(N)%PAR%IX(1:5)) = IUNITY(1:5)
        ENDIF
      ENDDO

      DO N = 1,NUMTX
        K = K + 1
        IF (TETRA(N)%PAR%MatID .EQ. M) THEN
          MTX = MTX + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1

! ParaView does not know how to handle 8-node tetrahedrons.
!          Iform = SECTION_3D( TETRA(N)%PAR%SecID )%Iform
!          IF (Iform .EQ. Eight_Nodes) Then
!            NPTUSED(TETRA(N)%PAR%IX(1:8)) = IUNITY(1:8)
!          ELSE
!            NPTUSED(TETRA(N)%PAR%IX(1:4)) = IUNITY(1:4)
!          ENDIF

          NPTUSED(TETRA(N)%PAR%IX(1:4)) = IUNITY(1:4)
        ENDIF
      ENDDO

      DO N = 1,NUMM3
        K = K + 1
        IF (MEMBT(N)%PAR%MatID .EQ. M) THEN
          MM3 = MM3 + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1
          NPTUSED(MEMBT(N)%PAR%IX(1:3)) = IUNITY(1:3)
        ENDIF
      ENDDO

      DO N = 1,NUMP3
        K = K + 1
        IF (PLATT(N)%PAR%MatID .EQ. M) THEN
          MP3 = MP3 + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1
          NPTUSED(PLATT(N)%PAR%IX(1:3)) = IUNITY(1:3)
        ENDIF
      ENDDO

      DO N = 1,NUMM4
        K = K + 1
        IF (MEMBQ(N)%PAR%MatID .EQ. M) THEN
          MM4 = MM4 + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1
          NPTUSED(MEMBQ(N)%PAR%IX(1:4)) = IUNITY(1:4)
        ENDIF
      ENDDO

      DO N = 1,NUMP4
        K = K + 1
        IF (PLATQ(N)%PAR%MatID .EQ. M) THEN
          MP4 = MP4 + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1
          NPTUSED(PLATQ(N)%PAR%IX(1:4)) = IUNITY(1:4)
        ENDIF
      ENDDO

      DO N = 1,NUMTR
        K = K + 1
        IF (TRUSS(N)%PAR%MatID .EQ. M) THEN
          MTR = MTR + 1
          NELUSED(K) = 1
          ELEMENTS_AND_NODES_USED = 1
          NPTUSED(TRUSS(N)%PAR%IX(1:2)) = IUNITY(1:2)
        ENDIF
      ENDDO
!!
!! Get count of elements and nodes used by this material.
!!
      MATERIAL(M)%NElems = SUM ( NELUSED(1:NUMXL) )
      MATERIAL(M)%NNodes = SUM ( NPTUSED(1:NUMNP) )

!!    write (IO_UNIT%LELO,*) ' *** Material Number:',M
!!    write (IO_UNIT%LELO,*) '              NElems:',MATERIAL(M)%NElems
!!    write (IO_UNIT%LELO,*) '              NNodes:',MATERIAL(M)%NNodes
!!    write (IO_UNIT%LELO,*) '    NELUSED(1:NUMXL):',(NELUSED(n), n=1,NUMXL)
!!    write (IO_UNIT%LELO,*) '    NPTUSED(1:NUMNP):',(NPTUSED(n), n=1,NUMNP)

!!
!! Create nodal point index map NPTNOWI for use with 
!! element connectivity n-tuples. (Maps program index 
!! to index written to esg files for this material.)
!!
!! Also, covert NPTUSED into a sequential index map.
!!
      K = 0
      DO N = 1,NUMNP
        IF (NPTUSED(N) .EQ. 1) THEN
          K = K + 1
          NPTNOWI(N) = K
          NPTUSED(K) = N
        ENDIF
      ENDDO
!!
!! Covert NELUSED into a sequential index map.
!!
      K= 0 
      DO N = 1,NUMXL
        IF (NELUSED(N) .EQ. 1) THEN
          K = K + 1
          NELUSED(K) = N
        ENDIF
      ENDDO

      RETURN
      END FUNCTION ELEMENTS_AND_NODES_USED
!!
      FUNCTION ELEMENT_ESG_TYPE( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Nth element
!!
!! Function return value.
      CHARACTER(8) :: ELEMENT_ESG_TYPE
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N

      CHARACTER(8), SAVE :: ESG_VERTEX      = "point"
      CHARACTER(8), SAVE :: ESG_LINE        = "bar2"
      CHARACTER(8), SAVE :: ESG_TRIANGLE    = "tria3"
      CHARACTER(8), SAVE :: ESG_QUAD        = "quad4"
      CHARACTER(8), SAVE :: ESG_TETRAHEDRON = "tetra4"
      CHARACTER(8), SAVE :: ESG_HEXAHEDRON  = "hexa8"
      CHARACTER(8), SAVE :: ESG_WEDGE       = "penta6"
      CHARACTER(8), SAVE :: ESG_PYRAMID     = "pyramid5"
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      ELEMENT_ESG_TYPE = " "
      IF (NEL .LE. NHX) THEN
        N = NEL
        ELEMENT_ESG_TYPE = ESG_HEXAHEDRON  ! HEXAH(N)%PAR%EleID
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        ELEMENT_ESG_TYPE = ESG_WEDGE       ! PENTA(N)%PAR%EleID
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        ELEMENT_ESG_TYPE = ESG_PYRAMID     ! PYRAMID(N)%PAR%EleID
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        ELEMENT_ESG_TYPE = ESG_TETRAHEDRON ! TETRA(N)%PAR%EleID
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        ELEMENT_ESG_TYPE = ESG_TRIANGLE    ! MEMBT(N)%PAR%EleID
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        ELEMENT_ESG_TYPE = ESG_TRIANGLE    ! PLATT(N)%PAR%EleID
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        ELEMENT_ESG_TYPE = ESG_QUAD        ! MEMBQ(N)%PAR%EleID
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4
        ELEMENT_ESG_TYPE = ESG_QUAD        ! PLATQ(N)%PAR%EleID
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        ELEMENT_ESG_TYPE = ESG_LINE        ! TRUSS(N)%PAR%EleID
      ENDIF

      RETURN
      END FUNCTION ELEMENT_ESG_TYPE
!!
      FUNCTION EleID_DATA ( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 12-APR-1991 18:59:44 
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Nth element
!!
!! Function return value.
      INTEGER(4) :: EleID_DATA
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      EleID_DATA = 0
      IF (NEL .LE. NHX) THEN
        N = NEL
        EleID_DATA = HEXAH(N)%PAR%EleID
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        EleID_DATA = PENTA(N)%PAR%EleID
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        EleID_DATA = PYRAMID(N)%PAR%EleID
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        EleID_DATA = TETRA(N)%PAR%EleID
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        EleID_DATA = MEMBT(N)%PAR%EleID
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        EleID_DATA = PLATT(N)%PAR%EleID
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        EleID_DATA = MEMBQ(N)%PAR%EleID
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4
        EleID_DATA = PLATQ(N)%PAR%EleID
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        EleID_DATA = TRUSS(N)%PAR%EleID
      ENDIF

      RETURN
      END FUNCTION EleID_DATA
!!
      FUNCTION ELEMENT_N_TUPLE( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Nth element
!!
!! Function return value.
      INTEGER(ITYPE) :: ELEMENT_N_TUPLE
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      ELEMENT_N_TUPLE = 0
      IF (NEL .LE. NHX) THEN
        N = NEL
        ELEMENT_N_TUPLE = 8
        NTUPLE(1:8) = NPTNOWI(HEXAH(N)%PAR%IX(1:8))
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        ELEMENT_N_TUPLE = 6
        NTUPLE(1:6) = NPTNOWI(PENTA(N)%PAR%IX(1:6))
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        ELEMENT_N_TUPLE = 5
        NTUPLE(1:5) = NPTNOWI(PYRAMID(N)%PAR%IX(1:5))
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        ELEMENT_N_TUPLE = 4
        NTUPLE(1:4) = NPTNOWI(TETRA(N)%PAR%IX(1:4))
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        ELEMENT_N_TUPLE = 3
        NTUPLE(1:3) = NPTNOWI(MEMBT(N)%PAR%IX(1:3))
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        ELEMENT_N_TUPLE = 3
        NTUPLE(1:3) = NPTNOWI(PLATT(N)%PAR%IX(1:3))
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        ELEMENT_N_TUPLE = 4
        NTUPLE(1:4) = NPTNOWI(MEMBQ(N)%PAR%IX(1:4))
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4
        ELEMENT_N_TUPLE = 4
        NTUPLE(1:4) = NPTNOWI(PLATQ(N)%PAR%IX(1:4))
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        ELEMENT_N_TUPLE = 2
        NTUPLE(1:2) = NPTNOWI(TRUSS(N)%PAR%IX(1:2))
      ENDIF

      RETURN
      END FUNCTION ELEMENT_N_TUPLE
!!
      FUNCTION MatID_DATA ( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 12-APR-1991 18:59:44 
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Nth element
!!
!! Function return value.
      INTEGER(ITYPE) :: MatID_DATA
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      MatID_DATA = 0
      IF (NEL .LE. NHX) THEN
        N = NEL
        MatID_DATA = HEXAH(N)%PAR%MatID
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        MatID_DATA = PENTA(N)%PAR%MatID
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        MatID_DATA = PYRAMID(N)%PAR%MatID
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        MatID_DATA = TETRA(N)%PAR%MatID
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        MatID_DATA = MEMBT(N)%PAR%MatID
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        MatID_DATA = PLATT(N)%PAR%MatID
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        MatID_DATA = MEMBQ(N)%PAR%MatID
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4
        MatID_DATA = PLATQ(N)%PAR%MatID
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        MatID_DATA = TRUSS(N)%PAR%MatID
      ENDIF

      RETURN
      END FUNCTION MatID_DATA
!!
      FUNCTION STRESS_DATA ( NEL, I )
!!
!! Copyright (c) by FMA Development, LLC, 8-APR-1991 20:33:30 
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL  ! Nth element
      INTEGER(ITYPE), INTENT(IN) :: I    ! Stress component requested
!!
!! Function return value.
      REAL :: STRESS_DATA
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N
      INTEGER(ITYPE)       :: NDEX(4)
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      STRESS_DATA = 0.0
      IF (NEL .LE. NHX) THEN
        N = NEL
        STRESS_DATA = HEXAH(N)%RES%Stress(I)
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        STRESS_DATA = PENTA(N)%RES%Stress(I)
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        STRESS_DATA = PYRAMID(N)%RES%Stress(I)
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        Iform = SECTION_3D( TETRA(N)%PAR%SecID )%Iform
        IF (Iform .EQ. Nodal_Based) Then
          NDEX = TETRA(N)%RES%IN
          STRESS_DATA = P4TH * SUM( TETNP(NDEX)%Stress(I) )
        ELSE
          STRESS_DATA = TETRA(N)%RES%Stress(I)
        ENDIF
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        IF (I .LE. 2) THEN
          STRESS_DATA = MEMBT(N)%RES%Stress(I)
        ELSE IF (I .EQ. 4) THEN
          STRESS_DATA = MEMBT(N)%RES%Stress(3)
        ENDIF
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        Ist = PLATT(N)%PAR%Ist
        STRESS_DATA = STRESS(I,Ist)
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        IF (I .LE. 2) THEN
          STRESS_DATA = MEMBQ(N)%RES%Stress(I)
        ELSE IF (I .EQ. 4) THEN
          STRESS_DATA = MEMBQ(N)%RES%Stress(3)
        ENDIF
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4
        Ist = PLATQ(N)%PAR%Ist
        STRESS_DATA = STRESS(I,Ist)
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        IF (I .EQ. 1) THEN
          STRESS_DATA = TRUSS(N)%RES%Stress
        ELSE
          STRESS_DATA = 0.0
        ENDIF
      ENDIF

      RETURN
      END FUNCTION STRESS_DATA
!!
      FUNCTION BULK_STRAIN ( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 12-APR-1991 18:59:44 
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL  ! Nth element
!!
!! Function return value.
      REAL :: BULK_STRAIN
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N
!!
!! Function reference.
      REAL(RTYPE), EXTERNAL :: LOG_POS
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      BULK_STRAIN = 0.0
      IF (NEL .LE. NHX) THEN
        N = NEL
        BULK_STRAIN = LOG_POS(HEXAH(N)%RES%Volume/HEXAH(N)%PAR%Volume)
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        BULK_STRAIN = LOG_POS(PENTA(N)%RES%Volume/PENTA(N)%PAR%Volume)
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        BULK_STRAIN = LOG_POS(PYRAMID(N)%RES%Volume/PYRAMID(N)%PAR%Volume)
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        BULK_STRAIN = LOG_POS(TETRA(N)%RES%Volume/TETRA(N)%PAR%Volume)
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        BULK_STRAIN = LOG_POS(MEMBT(N)%RES%Area/MEMBT(N)%PAR%Area)
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        BULK_STRAIN = LOG_POS(PLATT(N)%RES%Area/PLATT(N)%PAR%Area)
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        BULK_STRAIN = LOG_POS(MEMBQ(N)%RES%Area/MEMBQ(N)%PAR%Area)
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4
        BULK_STRAIN = LOG_POS(PLATQ(N)%RES%Area/PLATQ(N)%PAR%Area)
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        BULK_STRAIN = LOG_POS(TRUSS(N)%RES%Length/TRUSS(N)%PAR%Length)
      ENDIF

      RETURN
      END FUNCTION BULK_STRAIN
!!
      FUNCTION STRAIN_ENERGY_DENSITY ( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 12-APR-1991 18:59:44 
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Nth element
!!
!! Function return value.
      REAL :: STRAIN_ENERGY_DENSITY
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N
      INTEGER(ITYPE)       :: NDEX(4)
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      STRAIN_ENERGY_DENSITY = 0.0
      IF (NEL .LE. NHX) THEN
        N = NEL
        STRAIN_ENERGY_DENSITY = HEXAH(N)%RES%Str_Eng
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        STRAIN_ENERGY_DENSITY = PENTA(N)%RES%Str_Eng
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        STRAIN_ENERGY_DENSITY = PYRAMID(N)%RES%Str_Eng
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        Iform = SECTION_3D( TETRA(N)%PAR%SecID )%Iform
        IF (Iform .EQ. Nodal_Based) Then
          NDEX = TETRA(N)%RES%IN
          STRAIN_ENERGY_DENSITY = P4TH * SUM( TETNP(NDEX)%Str_Eng )
        ELSE
          STRAIN_ENERGY_DENSITY = TETRA(N)%RES%Str_Eng
        ENDIF
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        STRAIN_ENERGY_DENSITY = MEMBT(N)%RES%Str_Eng
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        STRAIN_ENERGY_DENSITY = PLATT(N)%RES%Str_Eng
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        STRAIN_ENERGY_DENSITY = MEMBQ(N)%RES%Str_Eng
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4
        STRAIN_ENERGY_DENSITY = PLATQ(N)%RES%Str_Eng
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        STRAIN_ENERGY_DENSITY = TRUSS(N)%RES%Str_Eng
      ENDIF
!!
      RETURN
      END FUNCTION STRAIN_ENERGY_DENSITY
!!
      FUNCTION PRESSURE ( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 8-APR-1991 20:33:30 
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Nth element
!!
!! Function return value.
      REAL :: PRESSURE
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N
      INTEGER(ITYPE)       :: NDEX(4)
      REAL(RTYPE)          :: TEMP(4)
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      PRESSURE = 0.0
      IF (NEL .LE. NHX) THEN
        N = NEL
        PRESSURE = P3RD * SUM( HEXAH(N)%RES%Stress(1:3) )
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        PRESSURE = P3RD * SUM( PENTA(N)%RES%Stress(1:3) )
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        PRESSURE = P3RD * SUM( PYRAMID(N)%RES%Stress(1:3) )
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        Iform = SECTION_3D( TETRA(N)%PAR%SecID )%Iform
        IF (Iform .EQ. Nodal_Based) Then
          NDEX = TETRA(N)%RES%IN
          TEMP = (/ZERO,ZERO,ZERO,ZERO/)
          TEMP = TEMP + TETNP(NDEX)%Stress(1)
          TEMP = TEMP + TETNP(NDEX)%Stress(2)
          TEMP = TEMP + TETNP(NDEX)%Stress(3)
          PRESSURE = P12TH * SUM( TEMP ) 
        ELSE
          PRESSURE = P3RD * SUM( TETRA(N)%RES%Stress(1:3) )
        ENDIF
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        PRESSURE = P3RD * SUM( MEMBT(N)%RES%Stress(1:2) )
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        Ist = PLATT(N)%PAR%Ist
        PRESSURE = P3RD * SUM( STRESS(1:2,Ist) )
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        PRESSURE = P3RD * SUM( MEMBQ(N)%RES%Stress(1:2) )
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4
        Ist = PLATQ(N)%PAR%Ist
        PRESSURE = P3RD * SUM( STRESS(1:2,Ist) )
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        PRESSURE = P3RD * TRUSS(N)%RES%Stress
      ENDIF

      RETURN
      END FUNCTION PRESSURE
!!
      FUNCTION EFFECTIVE_STRESS ( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 8-APR-1991 20:33:30 
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Nth element
!!
!! Function return value.
      REAL :: EFFECTIVE_STRESS
!!
!! Local variables.
      LOGICAL,        SAVE :: FIRST = .TRUE.
      INTEGER(ITYPE), SAVE :: NHX,NPX,NPY,NTX,NM3,NP3,NM4,NP4,NTR,N
      INTEGER(ITYPE)       :: NDEX(4)
      REAL(RTYPE)          :: TEMP(4)
      REAL(RTYPE)          :: PRESSURE,S1,S2,S3,S4,S5,S6
!!
!! Function reference.
      REAL(RTYPE) :: EFF_STR
!!
      IF (FIRST) THEN
        NHX = NUMHX
        NPX = NHX + NUMPX
        NPY = NPX + NUMPY
        NTX = NPY + NUMTX
        NM3 = NTX + NUMM3
        NP3 = NM3 + NUMP3
        NM4 = NP3 + NUMM4
        NP4 = NM4 + NUMP4
        NTR = NP4 + NUMTR
        FIRST = .FALSE.
      ENDIF
!!
      EFFECTIVE_STRESS = 0.0
      IF (NEL .LE. NHX) THEN
        N = NEL
        PRESSURE = P3RD * SUM( HEXAH(N)%RES%Stress(1:3) )
        S1 = HEXAH(N)%RES%Stress(1) - PRESSURE
        S2 = HEXAH(N)%RES%Stress(2) - PRESSURE
        S3 = HEXAH(N)%RES%Stress(3) - PRESSURE
        S4 = HEXAH(N)%RES%Stress(4) * HEXAH(N)%RES%Stress(4)
        S5 = HEXAH(N)%RES%Stress(5) * HEXAH(N)%RES%Stress(5) 
        S6 = HEXAH(N)%RES%Stress(6) * HEXAH(N)%RES%Stress(6)
        S4 = S4 + S5 + S6
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ELSE IF (NEL .LE. NPX) THEN
        N = NEL - NHX
        PRESSURE = P3RD * SUM( PENTA(N)%RES%Stress(1:3) )
        S1 = PENTA(N)%RES%Stress(1) - PRESSURE
        S2 = PENTA(N)%RES%Stress(2) - PRESSURE
        S3 = PENTA(N)%RES%Stress(3) - PRESSURE
        S4 = PENTA(N)%RES%Stress(4) * PENTA(N)%RES%Stress(4)
        S5 = PENTA(N)%RES%Stress(5) * PENTA(N)%RES%Stress(5) 
        S6 = PENTA(N)%RES%Stress(6) * PENTA(N)%RES%Stress(6)
        S4 = S4 + S5 + S6
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ELSE IF (NEL .LE. NPY) THEN
        N = NEL - NPX
        PRESSURE = P3RD * SUM( PYRAMID(N)%RES%Stress(1:3) )
        S1 = PYRAMID(N)%RES%Stress(1) - PRESSURE
        S2 = PYRAMID(N)%RES%Stress(2) - PRESSURE
        S3 = PYRAMID(N)%RES%Stress(3) - PRESSURE
        S4 = PYRAMID(N)%RES%Stress(4) * PYRAMID(N)%RES%Stress(4)
        S5 = PYRAMID(N)%RES%Stress(5) * PYRAMID(N)%RES%Stress(5) 
        S6 = PYRAMID(N)%RES%Stress(6) * PYRAMID(N)%RES%Stress(6)
        S4 = S4 + S5 + S6
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ELSE IF (NEL .LE. NTX) THEN
        N = NEL - NPY
        Iform = SECTION_3D( TETRA(N)%PAR%SecID )%Iform
        IF (Iform .EQ. Nodal_Based) THEN
          NDEX = TETRA(N)%RES%IN
          TEMP = (/ZERO,ZERO,ZERO,ZERO/)
          TEMP = TEMP + TETNP(NDEX)%Stress(1)
          TEMP = TEMP + TETNP(NDEX)%Stress(2)
          TEMP = TEMP + TETNP(NDEX)%Stress(3)
          PRESSURE = P12TH * SUM( TEMP ) 
        ELSE
          PRESSURE = P3RD * SUM( TETRA(N)%RES%Stress(1:3) )
        ENDIF
        IF (Iform .EQ. Nodal_Based) THEN
          S1 =  P4TH * SUM( TETNP(NDEX)%Stress(1) ) - PRESSURE
          S2 =  P4TH * SUM( TETNP(NDEX)%Stress(2) ) - PRESSURE
          S3 =  P4TH * SUM( TETNP(NDEX)%Stress(3) ) - PRESSURE
          S4 = (P4TH * SUM( TETNP(NDEX)%Stress(4) ) )**2
          S5 = (P4TH * SUM( TETNP(NDEX)%Stress(5) ) )**2
          S6 = (P4TH * SUM( TETNP(NDEX)%Stress(6) ) )**2
          S4 = (S4 + S5 + S6)
        ELSE
          S1 = TETRA(N)%RES%Stress(1) - PRESSURE
          S2 = TETRA(N)%RES%Stress(2) - PRESSURE
          S3 = TETRA(N)%RES%Stress(3) - PRESSURE
          S4 = TETRA(N)%RES%Stress(4) * TETRA(N)%RES%Stress(4)
          S5 = TETRA(N)%RES%Stress(5) * TETRA(N)%RES%Stress(5) 
          S6 = TETRA(N)%RES%Stress(6) * TETRA(N)%RES%Stress(6)
          S4 = S4 + S5 + S6
        ENDIF
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ELSE IF (NEL .LE. NM3) THEN
        N = NEL - NTX
        PRESSURE = P3RD * SUM ( MEMBT(N)%RES%Stress(1:2) )
        S1 = MEMBT(N)%RES%Stress(1) - PRESSURE
        S2 = MEMBT(N)%RES%Stress(2) - PRESSURE
        S3 =                        - PRESSURE
        S4 = MEMBT(N)%RES%Stress(3) * MEMBT(N)%RES%Stress(3)
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ELSE IF (NEL .LE. NP3) THEN
        N = NEL - NM3
        Ist = PLATT(N)%PAR%Ist
        PRESSURE = P3RD * SUM( STRESS(1:2,Ist) )
        S1 = STRESS(1,Ist) - PRESSURE
        S2 = STRESS(2,Ist) - PRESSURE
        S3 =               - PRESSURE
        S4 = STRESS(4,Ist) * STRESS(4,Ist) 
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ELSE IF (NEL .LE. NM4) THEN
        N = NEL - NP3
        PRESSURE = P3RD * SUM( MEMBQ(N)%RES%Stress(1:2) )
        S1 = MEMBQ(N)%RES%Stress(1) - PRESSURE
        S2 = MEMBQ(N)%RES%Stress(2) - PRESSURE
        S3 =                        - PRESSURE
        S4 = MEMBQ(N)%RES%Stress(3) * MEMBQ(N)%RES%Stress(3)
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ELSE IF (NEL .LE. NP4) THEN
        N = NEL - NM4 
        Ist = PLATQ(N)%PAR%Ist
        PRESSURE = P3RD * SUM( STRESS(1:2,Ist) )
        S1 = STRESS(1,Ist) - PRESSURE
        S2 = STRESS(2,Ist) - PRESSURE
        S3 =               - PRESSURE
        S4 = STRESS(4,Ist) * STRESS(4,Ist) 
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ELSE IF (NEL .LE. NTR) THEN
        N = NEL - NP4
        PRESSURE = P3RD * TRUSS(N)%RES%Stress
        S1 = TRUSS(N)%RES%Stress - PRESSURE
        S2 =                     - PRESSURE
        S3 =                     - PRESSURE
        S4 = 0.0
        EFFECTIVE_STRESS = EFF_STR (S1,S2,S3,S4)
      ENDIF

      RETURN
      END FUNCTION EFFECTIVE_STRESS
!!
      FUNCTION SEGMENTS_AND_NODES_USED ( M )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Purpose: Mark segments and nodes used, count number of unique segments
!! and nodes used by the segment set, and create index translation arrays 
!! for segment set "M".
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: M   !  Segment set ID
!!
!! Function return value.
      INTEGER(ITYPE) :: SEGMENTS_AND_NODES_USED
!!
!! Local Variables.
      INTEGER(ITYPE), SAVE :: IX(4),N,K
!!
!! Clear marker/index-sequence and translation arrays.
!!
      NELUSED = 0
      NPTUSED = 0
      NPTNOWI = 0
!!
!! Mark nodes used by this segment set.
!!
      SEGMENTS_AND_NODES_USED = 0

      N = 0
      DO WHILE (NEXT_SEG_ID(M,N))
        NELUSED(N) = 1
        IX(1:4) = SEGMENT(N)%PAR%IX(1:4)
        IF (IX(4) .LE. 0) THEN
          NPTUSED(IX(1:3)) = (/1,1,1/)            
        ELSE
          NPTUSED(IX(1:4)) = (/1,1,1,1/)            
        ENDIF
        SEGMENTS_AND_NODES_USED = 1
      ENDDO
!!
!! Create nodal point index map NPTNOWI for use with 
!! element connectivity n-tuples. (Maps program index 
!! to index written to esg files for this segment set.)
!!
!! Also, covert NPTUSED into a sequential index map.
!!
      K = 0
      DO N = 1,NUMNP
        IF (NPTUSED(N) .EQ. 1) THEN
          K = K + 1
          NPTNOWI(N) = K
          NPTUSED(K) = N
        ENDIF
      ENDDO
      NNodes = K
!!
!! Covert NELUSED into a sequential index map.
!!
      K= 0 
      DO N = 1,NUMSG
        IF (NELUSED(N) .EQ. 1) THEN
          K = K + 1
          NELUSED(K) = N
        ENDIF
      ENDDO
      NElems = K

      RETURN
      END FUNCTION SEGMENTS_AND_NODES_USED
!!
      FUNCTION SEGMENT_N_TUPLE( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Segment ID
!!
!! Function return value.
      INTEGER(ITYPE) :: SEGMENT_N_TUPLE
!!
!! Local variables.
      INTEGER(ITYPE), SAVE :: IX(4)
!!
      IX(1:4) = SEGMENT(NEL)%PAR%IX(1:4)
      IF (IX(4) .LE. 0) THEN
        IX(4) = IX(3)
      ENDIF
      SEGMENT_N_TUPLE = 4
      NTUPLE(1:4) = NPTNOWI(IX(1:4))

      RETURN
      END FUNCTION SEGMENT_N_TUPLE
!!
      FUNCTION WEDGES_AND_NODES_USED ( M )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Purpose: Mark wedges and nodes used, count number of unique wedges
!! and nodes used by the wedge set, and create index translation arrays 
!! for wedge set "M".
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: M   ! Solid-to-solid interface ID
!!
!! Function return value.
      INTEGER(ITYPE) :: WEDGES_AND_NODES_USED
!!
!! Local Variables.
      INTEGER(ITYPE), SAVE :: IX(4),N,K
      LOGICAL              :: FOUND
!!
!! Clear marker/index-sequence and translation arrays.
!!
      NELUSED = 0
      NPTUSED = 0
      NPTNOWI = 0
!!
!! Mark wedges used by this solid-to-solid interface.
!!
      WEDGES_AND_NODES_USED = 0

      DO N = 1,NUMWX
        IF (WEDGE(N)%MPCID .EQ. M) THEN
          NELUSED(N) = 1
          WEDGES_AND_NODES_USED = 1
        ENDIF
      ENDDO
!!
!! Note: The wedges don't use the nodal points of the
!! mesh, but contain information for building their
!! own vertex coordinates, see WEDGE_NP_COORDINATE.
!!
!! Create nodal point index map NPTNOWI for use with 
!! element connectivity n-tuples. (Maps program index 
!! to index written to esg files for this wedge set.)
!!
!! Also, covert NPTUSED into a sequential index map.
!!
!!      K = 0
!!      DO N = 1,NUMNP
!!        IF (NPTUSED(N) .EQ. 1) THEN
!!          K = K + 1
!!          NPTNOWI(N) = K
!!          NPTUSED(K) = N
!!        ENDIF
!!      ENDDO
!!      NNodes = K
!!
!! Covert NELUSED into a sequential index map.
!!
      K= 0 
      DO N = 1,NUMWX
        IF (NELUSED(N) .EQ. 1) THEN
          K = K + 1
          NELUSED(K) = N
        ENDIF
      ENDDO

      NElems = K
      NNodes = 6 * NElems

      RETURN
      END FUNCTION WEDGES_AND_NODES_USED
!!
      FUNCTION WEDGE_N_TUPLE( NEL )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: NEL   ! Wedge ID
!!
!! Function return value.
      INTEGER(ITYPE) :: WEDGE_N_TUPLE
!!
!! This routine supplies element connectivity n-tuples.
!!
      IOS = 6*NEL - 6

      NTUPLE(1:6) = (/1+IOS,2+IOS,3+IOS,4+IOS,5+IOS,6+IOS/)

      WEDGE_N_TUPLE = 6

      RETURN
      END FUNCTION WEDGE_N_TUPLE
!!
      FUNCTION WEDGE_NP_COORDINATE( I, J )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: I     ! Nodal counter
      INTEGER(ITYPE), INTENT(IN) :: J     ! 1/2/3=x/y/z
!!
!! Function return value.
      REAL(RTYPE) :: WEDGE_NP_COORDINATE
!!
!! Local variables.
      REAL(RTYPE)    :: PXYZ,QXYZ,W
      INTEGER(ITYPE) :: JXYZ,NEL,NPT,N
!!
!! Caution: This routine contains a hard-coded dependency.
!! This routine will generate nodal point coordinates for
!! the sequence of wedges contained in NELUSED(*). Each
!! wedge has its own six nodal points.
!!
      NEL = ((I-1)/6) + 1
      NPT = I - 6*((I-1)/6)

      MEL = NELUSED(NEL)

      PXYZ = ZERO

      DO k = 1,WEDGE(MEL)%K(NPT)
        N =    WEDGE(MEL)%N(k,NPT)
        W =    WEDGE(MEL)%W(k,NPT)
        JXYZ = J
        SELECT CASE (JXYZ)
          CASE(1);  QXYZ = W * MOTION(N)%Px
          CASE(2);  QXYZ = W * MOTION(N)%Py
          CASE(3);  QXYZ = W * MOTION(N)%Pz
        END SELECT
        PXYZ = PXYZ + QXYZ
      ENDDO

      WEDGE_NP_COORDINATE = PXYZ

      RETURN
      END FUNCTION WEDGE_NP_COORDINATE
!!
      FUNCTION WEDGE_NP_VELOCITY( I, J )
!!
!! Copyright (c) by FMA Development, LLC, 26-MAY-2004
!!
!! Arguments.
      INTEGER(ITYPE), INTENT(IN) :: I     ! Nodal counter
      INTEGER(ITYPE), INTENT(IN) :: J     ! 1/2/3=x/y/z
!!
!! Function return value.
      REAL(RTYPE) :: WEDGE_NP_VELOCITY
!!
!! Local variables.
      REAL(RTYPE)    :: VXYZ,QXYZ,W
      INTEGER(ITYPE) :: JXYZ,NEL,NPT,N
!!
!! Caution: This routine contains a hard-coded dependency.
!! This routine will generate nodal point velocities for
!! the sequence of wedges contained in NELUSED(*). Each
!! wedge has its own six nodal points.
!!
      NEL = ((I-1)/6) + 1
      NPT = I - 6*((I-1)/6)

      MEL = NELUSED(NEL)

      VXYZ = ZERO

      DO k = 1,WEDGE(MEL)%K(NPT)
        N =    WEDGE(MEL)%N(k,NPT)
        W =    WEDGE(MEL)%W(k,NPT)
        JXYZ = J
        SELECT CASE (JXYZ)
          CASE(1);  QXYZ = W * MOTION(N)%Vx
          CASE(2);  QXYZ = W * MOTION(N)%Vy
          CASE(3);  QXYZ = W * MOTION(N)%Vz
        END SELECT
        VXYZ = VXYZ + QXYZ
      ENDDO

      WEDGE_NP_VELOCITY = VXYZ

      RETURN
      END FUNCTION WEDGE_NP_VELOCITY

      END SUBROUTINE WRITE_TO_ESG_RESULTS_FILE
